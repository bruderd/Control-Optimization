function [Y,Xf,Af] = nnet_2019_09_30_17_35(X,~,~)
%NNET_2019_09_30_17_35 neural network simulation function.
%
% Auto-generated by MATLAB, 30-Sep-2019 17:35:52.
% 
% [Y] = nnet_2019_09_30_17_35(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 17xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.50566973365885;-2.25694169526187;-2.31692614454142;-0.471170701104527;-0.774205211588157;-0.402151554455529;-0.511885876304734;-0.409329193605152;-0.374994664663569;-0.557722911621781;-0.36744855605419;-0.434539574899692;-0.269603176892205;-0.533608961880087;-0.432473277150089;-0.547210723295743;-0.278943021765764];
x1_step1.gain = [0.385388843904636;0.454451989534436;0.464244179672087;2.43415831731761;1.23472842292366;2.62429906715104;1.92050522864306;2.52850862503473;2.39140830014692;2.08231246386328;3.31096809319801;2.3489748796149;3.92513715946847;2.09144593491317;2.58059823267537;1.59422294724464;3.60669702312731];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.6117350304461570687;-0.67783375492691466668;0.56239603421300399244;-0.80700336679703332798;-0.8405572834293324469;-0.76299108537922333273;-0.67266101666490818456;-0.7377722789219086641;-0.77186692833394354718;1.5659699738978467565];
IW1_1 = [-1.2723612314259296063 0.3485794673019826373 0.020921985981815473254 0.050392796474075490787 -0.028762001617535566667 0.22089254707797761901 0.06106870398983396675 0.18673231887026445208 0.036610263023550811134 0.086668678357266076828 0.24952218532376671534 0.13414164162666064595 0.53221385716507074726 0.24913488653644380588 0.23159495261164253499 0.33898544704181776677 -0.097693695250198137048;-1.2375242065082290299 0.39324375877661832401 -0.44327583189419228482 -0.15369045050737981106 0.0018411197405797091048 -0.020152761909972602417 0.1981966597194237123 0.014283127439235545134 -0.01410251029515341599 0.21705270743255075661 -0.43284321574829254242 -0.11284491984871024284 -0.26839700944158767504 0.070341588791470024966 0.058713617743285428929 0.01332935384125089745 -0.046169842474461174342;-0.58457875218569721465 0.68152676663290434611 0.97516511705794040044 0.20477657513323516136 -0.10203228169709227524 -0.21146722484372998396 -0.31023889170783386371 0.18548057286066274574 -0.26874054574712702426 0.37940141454169595825 -0.44809146186377052379 0.023343988011664339177 0.069317171870815971757 -0.15842660659326351924 -0.36327106384731006061 -0.35236316614966661787 0.11794293084522947113;1.3135027995437562609 0.26300148821674768085 0.6821435636570379879 -0.16882274982749478909 0.26407300581533738049 -0.078821769709000941151 0.37260196841900716791 -0.38878968823943715893 -0.16109400336744991722 0.40929724025450969771 -0.065775457910574500198 0.27772324467996456487 0.40737801621344876812 -0.10243643855676431986 -0.23357172921047550385 0.00069641551070265955703 -0.094926240227890992807;0.76477447405915222056 1.2005059487717562039 0.014151970227595634874 -0.33377216406489479406 0.76569232476626125639 0.43993693497942448767 0.5025579554672315874 -0.030285705310495208975 -0.25955952440308421858 -0.09919218956450277791 0.28263517963313417036 -0.013002864026349510509 -0.1534524169834211027 0.056980755392051600505 -0.086272421339635002591 -0.018918272356672476142 0.04919228122050984392;-0.76183335609055868876 0.17775428633654430377 0.72120335142221159153 -0.15775915092914641336 -0.24125716410197223238 -0.32517010805687918129 -0.32866996091776723432 -0.031954066627999364036 0.074667374649771661721 -0.27603341888352966871 0.077317340984188673292 -0.016039490234140214159 -0.05174366430466577349 0.029344827157628126241 -0.088702482971194498984 -0.14472078468292670639 -0.042695605847767360841;0.87298684127216064077 0.55178215946858211183 -0.6557856783717960214 -0.32479190662284346258 -0.10892041236797120329 -0.17775868896777888284 -0.56377705565745772631 0.0902873013575502259 0.030842419504625108451 0.0396805671802021101 -0.15833429008681490502 0.11024517665981581338 0.25102178453392998136 -0.088566705859577460336 -0.24654123506730382664 -0.12829025766067750358 -0.074720678680566282592;-1.3307457315375881279 -0.58787492525280815592 -0.59428202084800296756 -0.14939513322273725859 0.19033935114480673989 -0.24044293786384735023 0.24477841545342085561 -0.47229653507344210306 -0.072860939532436816424 -0.25909924058589672846 0.025092930771713581328 0.24953118474994406828 0.24616083968331509135 -0.019494544714657280338 -0.44329688242924525365 -0.48378596225506981243 0.099183682046475540872;-0.97821906271582714787 -1.2917936982477966623 0.58618270805404104618 -0.56328064242437470011 0.0043838770381115178473 0.26936357150421708084 -0.29135545423397557485 0.14160663712477572496 -0.25402408487919497793 0.012793328529626186302 -0.13126094251911324395 -0.043559152149185861869 0.021774850044472514321 0.051746788178017318061 -0.074757151794271600731 -0.04591718203790546432 -0.020243154585622553238;-0.96852652134383121485 -0.24284152143471615659 0.14544307778468876236 0.058782166724219493681 -0.93246596448054475115 -0.11056242138992686264 0.046735861908496628692 0.4089240575811238787 0.20028261646341327662 -1.0931936017771322067 -0.10934939979780687602 -0.87067173809923137373 -0.47409530160756263584 0.52374186582899451281 0.37134644179567394273 -0.20277102937556462647 0.2046858403545910865];

% Layer 2
b2 = [-0.0019468937369358837314;-0.30920703930344228816;-0.33932062051052369611];
LW2_1 = [0.11304236110475522625 0.1915721265102559856 0.047715850913071490569 0.016535587474442021289 0.53169623662522103036 -0.13301212699462774958 0.78629167260767895975 -0.12846458288356463195 -0.61582936030733137489 0.38876897180125091769;-0.44243309988115142595 -0.61203025652496989562 0.13548209238035233137 0.76427795690276523199 -0.044085679652699279185 0.2296912121228407988 -0.35270070574692519161 -0.51710166853227479411 0.24692007579150956897 0.36413667335903165956;-0.46274201131663167397 -0.30652966656253544109 -0.47355581686048103807 -0.10105081244575972454 -0.47756912334187040514 -1.1381450980191563094 0.37909985797266787522 0.21475701581097236814 0.18559022537120006824 0.16474827807736946994];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
