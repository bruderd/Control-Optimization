function [Y,Xf,Af] = nnet_2019_12_03_20_55(X,~,~)
%NNET_2019_12_03_20_55 neural network simulation function.
%
% Auto-generated by MATLAB, 03-Dec-2019 20:55:02.
% 
% [Y] = nnet_2019_12_03_20_55(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.939493900010358;-0.156317472825152;-0.214529657056311;-0.282988744811906;-1;-1];
x1_step1.gain = [1.6708106843366;2.17557725631814;4.18301785702075;3.63317800808515;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.2800485148785765155;3.686328596941840452;1.8012503444193164182;-3.0793579226954808092;2.4463057206648475272;-3.4356297752172992865;-1.838859769431292257;-1.0924152675053682149;-0.18904844273355242423;2.6996801835791779389;3.7995213496906288242;1.3447695452546410966;5.2311219902095462686;-1.7594432820267091877;-0.58490294527208719355;3.6485464362338713151;1.1155177808743190759;-1.3078424268955217702;-0.17834519680487773141;1.053583265053503526;-2.530418222608231904;-5.8020418422921471446;1.4899489549539162159;-4.9991123003611024345;1.6027143518901882935;-5.2133584804970807269;-3.2900240049010043286;0.18268037262636843687;2.7196295255509785882;1.4366403114655852402];
IW1_1 = [0.52755281240237372753 1.5182248226817380843 2.0482105663767051773 0.70504599714694127233 -2.7432459023060253855 -2.7534762813478494969;-1.034646222590661413 -0.056650934491354713873 2.4240695261899976032 0.28661001809706465604 1.491997228770321815 -3.900456211711635035;-0.86861694358810714878 -0.52932636838716151662 1.8173151660357267367 -2.4380003069910722857 -1.5929573508584309316 -1.1529244746771587504;0.99798244680161618536 0.024459968877257293185 0.089317945370127785343 -0.49048879931737160431 3.8445842228468012358 1.1146570805648809976;-5.7376635653953931282 -0.38167799374920946542 -0.58553451523637534137 -0.26671131163532552089 0.81989488939556232072 0.96765064867132266624;1.3873346955447980466 0.4591818621670173961 -3.3466839224316009549 -0.25243751053729973632 -4.1594054806231923749 4.0243386962328289158;0.66664201868728945044 0.33626445932705234521 -1.8877401851720163606 2.1216380886818311247 1.9486990771472429973 1.1723440775874642839;0.70429311848405951046 0.29610960729180102469 0.71837112714052953066 -0.049370581671567978499 0.4512260196868573825 2.7464829128396566205;1.2337104248622379199 0.36169317159293118413 0.95161194662381831666 0.15478521012026558168 1.2548000627846818134 -2.5936335733118718316;0.038936062509784173657 1.4001972148241290661 2.3959937885920399303 0.78051253953422972121 -2.6769961738198557732 -3.4270001254850797068;-1.2415069374487974763 0.14619695762878384682 -0.13573638134539961486 0.59886191275475053608 -4.7091193784840639225 -1.0826057037312035725;-0.7577939753121580857 -0.29193855765039244954 -0.50541357544161724658 -0.040452579238790635496 -0.80656930272524685055 -2.6215876190738662821;-9.3704398330942435535 -1.7065722971599077695 -0.58683583863473620656 0.1889804440395111973 5.8825982168474286738 -0.37759594062977325235;1.1864050649718758113 1.5608433990061030272 2.3624599989613059847 2.9977566965321971182 2.4321331882279597636 -2.1980484605335588455;-0.50581380547418308691 -0.72592083623542447146 -1.0329721313121438264 -0.18553391916915001891 1.7779950767361920594 2.8672320383156284507;-1.6014353163322150309 0.46670562391835895832 2.1274882899044347262 0.26755658661782766305 5.9487423315589120776 -1.5027680014441342493;-2.2885460763064919831 -0.74902262853556278444 2.135159781398026535 0.5446360629252394725 11.275291395656415361 -4.0800237873285620793;5.6650188431157646463 0.67001767723832761359 1.0038663248813302076 0.21790786440812129343 -4.2866798745559107076 -0.085779177743518855714;-0.20558398732796404063 0.3851324210598888742 -0.073863942290896836274 -0.19115012207163303848 0.9867476411113647039 1.3752141550472836151;-2.3005111029409777146 -0.81775845016297854517 2.2070291802775172663 0.54478665072786203183 11.499099862363653557 -4.2446353930533522458;0.28334791991065966243 -0.10082404050119446459 -1.3524206697773635266 -0.096383502531536990876 -3.6819381667340733699 4.0844682060909773824;0.91787372651196252882 -0.13697983421716208863 -0.94850790893384406832 0.17885075141515055508 -2.0752245911673612433 6.2732140544896859424;1.5149571565268138418 0.86911124450608367997 -0.578011689564641995 -0.028690680560105291663 -2.9677201754084614471 1.7018818055479087992;-0.35756932537519436899 -3.0912075586977962871 -2.2640974600782270976 0.26386159210582232904 4.0063808973377827982 0.047678861458376527171;0.035986598548066718595 0.62370305871087883265 1.0411994639823729525 0.068308459300965670979 2.2215520504465544604 -1.4345692747352956076;0.58341393292280663285 -0.073458095525189254227 -2.2632512442787326989 -0.083865670738234296411 -0.56156123070816788001 7.3359943478832354558;0.63534168247013345088 -0.15163215946693098246 -1.2882626727993224947 -0.057172330044075611588 -4.9179758707578864474 4.6679516657012758429;1.6959657748152980883 -1.0143087985233052439 0.975750089090651751 -0.002234055051769736483 -0.78543538417256220097 0.76784334892073236034;0.43035702151158156115 -2.7774903239008374989 0.72374214363316191623 -1.9598529304507001925 -1.4154397621971417376 -0.037596219246834462757;0.54925423978751253262 0.28928878322760143149 -0.81393191662169328549 0.23238555764765550515 -0.49558026609924504813 3.8394930469343298007];

% Layer 2
b2 = -0.96485374687697278429;
LW2_1 = [-1.6624823679348834649 2.661819063062878854 1.2090242458984126195 -4.7303039964407114226 -0.10348551342164087619 1.4085926967875062044 1.3251546332029495723 -3.423427026028859288 0.48797661193601765683 1.4122090441693739837 -3.1949223069361698535 -4.0381990403735263939 -0.17659074896210213979 -0.031090260920514506404 -0.717519541214341805 0.44106047935430442442 2.6212317947074614821 0.2871099728204454804 2.5960897400823532699 -2.5084187297331714817 -4.9906652468211856188 -1.0142117932067664654 -0.27996317008026821993 -0.19416488684322816272 -1.9531915354485889225 1.2646013570878507082 3.5894636514317315168 -0.28847895251658511873 0.31450019671182399827 -0.16905891381627433101];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1;
y1_step1.xoffset = -1;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
