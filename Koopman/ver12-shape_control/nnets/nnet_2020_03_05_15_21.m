function [Y,Xf,Af] = nnet_2020_03_05_15_21(X,~,~)
%NNET_2020_03_05_15_21 neural network simulation function.
%
% Auto-generated by MATLAB, 05-Mar-2020 15:21:07.
% 
% [Y] = nnet_2020_03_05_15_21(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 14xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-5.53441668258215;-4.47466418224205;-1.99460668727524;-0.983557150890271;-2.54128063979664;-1.87281491078136;-1.38004666761455;-0.683066028413732;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.26060030875202;0.207678953585846;0.488789748172675;0.646782007745956;0.490911170380648;0.492894262048739;0.881855921081448;1.02671524615524;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.7649634453625209218;1.5535333846241741185;1.111892399453049185;-1.3076663623640949474;-1.4388817297833202957;-1.174640191009409973;0.86509648822902029952;-0.13423758069206956356;-0.43000147739942573555;-0.48248625473451522971;-0.3281270884291504486;0.78695628559656805034;0.5083223927879847448;0.60990748526949611907;-0.32603760684983867923;-0.23798952080733856707;-1.3730529567673861457;1.2917084021824845053;-1.9818421539775759044;1.3036907795717835867;0.96360175419347959824;0.67572494633633117811;-1.039935034370592426;-0.95940732656042559956;-0.5284498067377896291;1.2174947280953964945;-2.0156247336297798967;1.1828993407625132406;1.8421781313667848767;-1.7948053777872199355];
IW1_1 = [1.0814260264913730936 0.50494706962734947631 -0.19037103101501318125 0.21870224309860369916 0.42851737222737218413 -0.78235766288070440755 0.073438909450259229339 0.16829670123480910959 -1.1368497225797296046 0.46515353286616550887 1.2536926395418810376 0.02062359524839069147 0.18016919618516430424 -0.79080779805703049767;-0.31066243669029613983 0.35140662895453556036 -0.58235483098842744099 0.44949346527090788816 -0.77365133844170708155 -1.0126254731329060732 0.47636254106986675172 -0.15562013769551591436 0.56792343688934954216 -0.17662362522249269725 -0.24514387537257886773 -1.5078403200011041285 -1.8956839797457947228 -0.85114343151441362867;-1.6660724569781335536 -0.80351255091864570712 -0.75847593536492785571 -0.45979923639683839554 -0.44635662006869375462 -0.30625342233641239531 0.55597670306759572334 -0.26955149759397339926 -0.21442024676396603811 -0.84617546194351833666 0.76602227821490587178 -0.27963145476678630263 -1.3077816340863221978 -1.1949521862754921564;0.78438293278595050406 0.73352054721756609901 0.60082916514631923288 -0.20819912521753500267 -0.1152232603664384708 -0.34778032974421796419 -0.13560102846156488199 0.59981223758698165582 -2.0928138794838053727 -2.631056318873198574 -0.53676299778612590607 0.15220296534371272057 0.63149689397404928926 0.54164206147246751755;0.85611706919055730047 0.138496975497008179 -0.67553025418324841311 0.6940632275480610458 0.20451367384544599792 0.35144509224559983274 0.30813429748872078751 0.23495368938521471458 -1.3814320392242933622 -1.8376424630653100944 0.50215753141210162092 -1.3936893950339084292 -2.3155191838460069675 -0.30190111919429468701;-0.34875167434665688138 0.36463207847651241122 -0.075779269898610085443 -0.34181973696953732444 -0.020429169047881813592 -0.53257464745039173604 -0.13776159303537366396 -0.080090208078101743361 0.041844232143370949095 -1.6964587603280441019 0.40767083232060813414 0.37216305464832066807 -0.86448769178422435466 -1.1930634003132041254;-1.3780099255589579599 1.1408898593914085229 -0.23449656084494971409 -0.68186075729709794135 0.5516459521739991434 -1.0763624975731200806 0.61539918416276773172 -0.23210941163012963062 -1.7151960026522452551 -0.10684558349112718845 -0.061540309785414207266 -0.15359261370094468013 -0.35480568312335319936 0.61806742916264345578;-0.16087732352194322738 -0.53012159338898057204 -0.035803604091508074714 -0.048486100743209713249 -0.092778065695213449149 -0.22627228924783465702 0.20884894993405331287 -0.12586684949867085748 -1.7174263083354446291 0.93658489739915795624 2.0896712939392627639 0.0099387072244442389857 0.0013635670513600234299 0.26582946100775534104;0.65398735150046005682 -0.14886615751877560476 -0.22056934436190889226 0.13954206621321563198 0.17599701558932159817 0.15016470548866339696 0.087874038878731033919 0.19316243291443421781 1.1781554502327347134 1.9457739103104718659 0.34888852644159762395 -0.62457130579470909737 -0.68602612975141119556 -1.9521544822905023686;-0.67836858295876478753 -0.70861011887950442478 -0.41765391961177228408 0.18738332580429620244 -0.17247574092579218141 0.61904879899943365817 0.3350661409011342351 -0.55389459489870740416 0.5322269506631827074 1.9945106111075683319 0.073754017206720631772 -0.16697168658377800621 -1.143063072265765534 -0.29794849951714086345;0.13521063905571659158 0.74254121163185315968 -0.065176750633954103065 -0.093847205571701383664 -0.23071755204514662885 -0.69974897282481340888 0.17903301982262675995 -0.004752487049540043626 -0.80388674115289449063 2.0948196195997854652 2.8156006621739293472 -0.0019092585592999965563 0.63105289608509851362 0.91493896091471338394;-0.25988950691892992451 1.184278963056088152 -0.3531654619854334709 -0.25313673885035214983 -0.20802853793204509336 0.14606879795163157931 0.22544846568419665833 0.10127037299972137252 1.0367317172521222091 2.5632413772699602639 -0.25115045081284254058 0.42039046737753754668 1.7256325133830960894 2.2489638892334848919;-2.4481214808727642662 0.85315380051275746531 0.14733718644601206949 0.41596019667018740984 -0.35259206993429020871 -0.36843991217776000946 0.44717902886755744873 -0.50781361719070783334 1.7869077193467546305 0.17409533568018781269 -0.10648103307488858416 1.4623081786982559116 -0.25068369069538337657 -0.10068966559454903265;-0.75234529254622584116 0.62886869303132575393 0.4988775556343633677 -0.23143870323055631966 -0.34959897455809846312 -0.13468455944414517433 -0.54414383547787448236 -0.20807649607483708065 -1.3400449589561780339 -0.82399687342714711402 0.38487178897249424425 1.1267143293603407717 0.85289006024466340605 2.2035558297581729903;-0.26917845918701449603 -0.93804154829564168061 -0.4544891043929560337 0.14116789320054121126 -0.27350531598713528902 0.79693842415657911715 0.020069093795443748718 -0.36108832722266243076 0.69231421056739461672 1.8891514588500948335 0.83688824933456407162 0.91494144134992949624 0.98270636607456729461 0.92050179607873494625;0.015984496526976428588 -0.61351122366370802741 -0.20852631873925017714 -0.17465512061697782698 -0.3149063814619771362 0.09358769826240312395 -0.11705128513726521799 -0.061853351456000446595 1.0976264634244103924 0.95536179557916345306 1.374476436358867959 0.071069903308362006311 0.051081160797917246619 -0.19851271068033091161;-0.57868331126627003957 -0.2487667115423018438 0.087414159963260129604 0.37703328219150156198 -0.11428771271756854588 0.50868311575704405758 0.39464468331182034344 -0.24403794932213795921 -0.353117202069526126 -0.53246806770099797124 -2.1507428362654605891 0.95709803308467544802 2.3691300321583002031 1.2003847726184666556;-0.54856190853457975631 1.0590305866906659649 0.066060158108240590868 0.13056385267403711192 -0.1197883282136063543 0.15325753427021809872 -0.067357272926484787479 0.15911755214602588127 0.51882038239338734709 1.2731734477357223856 0.81023104642269483389 0.83804551389482839774 0.085803827123186501846 0.58336057128402962757;-0.82898153078374325897 0.111741586647089719 0.17174892138613587211 -0.43983170343761096577 0.3521794369727657692 -0.66605037461795146836 0.67333484099063012351 -0.2593368800441503419 1.7735184789462441479 2.7266065596268642679 0.11061775926700095907 -0.13862055321141109054 -2.3136430527621811848 -1.3732443588725518069;1.0717485673747211283 -0.49343939391081781398 0.27188337036466403429 0.47938803549921538139 -0.069310606907797722709 -0.080063471801819871554 -0.36440508220649836524 0.092081321981835495549 -1.6054299256188229172 -1.0671053801732157673 0.12163528978631407695 -1.8733204204772349044 0.091869689896049766542 0.23241837129414211205;0.11200119227236793318 -0.83919284508883329465 -0.068192540476527480076 0.067294969154472167316 0.18403436094840122661 0.77090260134015364812 -0.6076693920670057647 -0.31939063164059283695 1.8324647465000736268 0.68982608632496544843 -1.0688190310302960739 0.047755094823001810467 -1.7122912912950054576 -2.0257322075238488601;0.55355564762879072571 -0.034703157734971339099 0.40144973453223348203 0.074956527993075977578 0.23461245695474178263 0.16695507943195392331 -0.61633444852996155383 -0.028999340980219015518 -0.56780223670612672837 0.039198000814163802552 0.76358970191949959716 0.1759333215033896114 -1.0128015117660917888 -0.55671914483272100238;-0.58233045189166476874 -0.09802793123896683114 -0.26678640693016120178 0.36702180648275944952 -0.27064315774199315667 0.28897078749739807391 0.45689515141764391881 -0.34163355824117469517 0.94151178417433423196 2.3938292275579757806 0.23078550622427523864 0.4874504419764155716 0.91411219005036881136 -0.4271160990392820489;1.1672453865926082361 -0.52447345490442009996 0.20260694546497132196 -0.0066404624654205750972 0.042717971113062296051 0.56913712310363506752 -0.86474739140111600566 -0.042225349652105503839 1.5168379395945477128 2.3738757232879343917 1.1861239052426912899 -0.017027317249349388506 -0.076086199454225608707 -0.83066516537376378082;0.64224517606088249444 1.1245108901086200426 0.29970381208915014559 -0.20645802194303664034 0.27857187733510219152 -0.54715927146064347042 -0.21419731513234818721 0.13029202926625943482 1.1613189181689107521 1.2186786661014292754 -0.47868025115394718938 0.20262658700210561813 1.8545705371109990622 0.97888737627801369889;-0.96527862172161171816 -0.4367288940572303102 -0.34462046036547322458 -0.28202928535116961184 -0.28482586704745549433 -0.11803140948280256561 0.62790136418573094801 0.035843636927537045334 1.6731354552431931815 3.1153918347907385566 1.7643260348600555698 -0.2220062992788722489 0.77680487596061609246 0.80910943585075945084;-0.54644632109765733929 0.0020733193785875091153 -0.41776853904002853035 -0.80403860405310034754 -0.034640795721737241419 -0.49382502529903021804 0.018210221838219173285 -0.2508167318692197667 0.52649739139332252247 1.0417101476053267639 2.5951469995850779959 0.1921563724864399636 1.2676536600302770186 0.095907399108967117396;-1.026031372325460822 -1.5656079940418410335 -0.24191633331717021793 -0.080556491979224847944 -0.46362573734107914714 0.69127557366473402212 0.23856425010999279812 -0.54495949152065092935 0.40994441884410315335 -0.58378149556306546675 -1.3781544877968725515 0.6207217197254963903 0.69543992658807696206 0.12556509117461514546;0.11293677159779418051 -0.27055807030207984498 -0.62856195402682268902 0.96023802588796181023 -1.1728064843383469995 -0.72275601254129895334 0.11315599014382168863 -0.053127450333436701535 1.1734297042694827873 0.29994772293730914692 -0.31251360635846703317 -1.3616990774616322124 1.3682704526719808857 1.6203775716387291972;0.69281270626200808227 -2.0242477681411710222 -0.47920322248793623121 0.056521222123707012819 -0.19609883762049110101 0.26117006562468120245 0.19855648393006508634 -0.42307138212509648456 -0.20675074783826566382 -0.6399171348718422081 -0.67090795286833115885 -1.5449315494411524075 -1.1581033562943743309 -1.1598812155627495901];

% Layer 2
b2 = [-0.17456409423637475609;0.15249945633133896172;-0.38082618975180787535];
LW2_1 = [0.66655078409644918924 0.60123633675754872829 -0.89603703572251225395 0.58829603624147008833 0.0026903984641411535575 0.23098788088171284816 0.70625838335621315967 -0.62639962830140150096 0.020642263622548104318 -0.46089340324472699573 0.12610333914359581065 0.75390997120048786062 0.57621798529217826967 -0.15411781034511126687 -0.37072155062878470178 1.2486961016651958456 0.21904286300419045785 1.0470455738003923152 0.59191772568913225694 1.2562961574881339466 0.19460972879193011442 0.48970337647649864188 0.13086481748007511294 0.19774594484632110336 -0.28302562672349956818 0.59639939512078143924 -0.39655910405691252585 0.6117064654527236689 -0.58762203645088939563 1.4434678349981755474;-1.2911381117479461267 0.69525821122315245582 -0.78779065991547558845 -1.1114695661485902711 -0.74349491147334567653 0.83938788134934261276 0.19221957115847890241 -0.60079490499929388836 1.4327427342550076439 -1.655468803887737872 0.21320164177716577347 0.35450651210714667627 -0.01792549773925942308 0.82239564942116327728 1.8121642997047484602 -0.30266164019593688739 -0.10929632111339077083 -2.619945537920866041 2.8677313510869266722 1.5904938328624209642 -0.70488454331478356263 1.0106634176647830703 0.48730955526634045505 -0.019216443429365428347 -1.730807848040575303 0.96587453255859356815 -0.39071375612633341134 -1.6041213535398828327 -0.44871062969938169118 -1.1235024359644991687;-0.92833157805231636406 -1.0139710793284484325 -0.30537557652645325179 -2.1936797295156220677 -0.54263407824325837758 -1.1810811333147590574 -0.62678371175916980373 3.1520623127044666845 1.7458706489516511162 1.66502779198660944 -2.6921735785441409661 0.54264752713618813473 -0.30466890920655126385 0.67286224371371317066 -2.2130186996698077984 3.9780799555678005852 -2.3126013793615669556 1.6648896213464694505 -0.65872775436852237796 -1.6881429847800015764 -3.0714085043306149636 2.7970396020474530552 2.2543610242705600655 -2.5371034317442511252 2.0255696255755566426 -2.727149844052532579 0.9012093894840672581 -0.47155401312711425765 0.75508549410463476903 0.72440401101125784233];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
