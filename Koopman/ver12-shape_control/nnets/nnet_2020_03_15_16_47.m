function [Y,Xf,Af] = nnet_2020_03_15_16_47(X,~,~)
%NNET_2020_03_15_16_47 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Mar-2020 16:47:07.
% 
% [Y] = nnet_2020_03_15_16_47(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 17xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-4.68019377106114;-1.86502531575239;-2.73075697164836;-2.01328170960426;-1.50072767998275;-1.51988244737615;-1.25105181572148;-1.00216156172962;-1.38319066422089;-1;-1;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.245962031117027;0.259062289214078;0.446879322612556;0.686311169521684;0.423170120759984;0.654638005559917;0.691590281980717;1.16770716676627;0.880596023773673;1;1;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.7880080757070213604;2.1155501697096417146;0.88778384544594579619;-1.7226822239299321993;-1.6015183400490695664;0.14810699811239749768;1.6202712664860521308;-1.0847791150704284568;-2.1661703255143436309;1.1954743497136051111;-1.1348523339169191981;1.2515865105908063892;0.36529191321714155061;0.51460394217163307751;-0.82037549223154893063;0.12316424599031940146;0.49477312100604270428;-0.0049666411100927065903;-0.39165352253712781838;-1.0875155939780913883;0.0074904640785220678173;0.93951543321930497399;1.4016472428552235741;-0.55885496268631318362;-0.60799875073257036995;-0.84381607444525597028;1.1310340842296602304;1.4433535559082439903;-2.1043259192129974977;2.3945189273989173628];
IW1_1 = [-1.1241677658263418138 0.73646108209353000618 0.21823223431739166567 0.03933466114981577777 -0.20156776836620202142 -0.23274999109240412931 0.75585821192913793531 0.26588591960532592662 0.069971543467565538998 0.0051038241460486660772 0.031850484000881675029 -0.089048033704857323944 0.23272088154947012661 -0.55070469181278991488 -0.41432949675600122541 0.80422846912129442032 -0.23414302056688351961;-0.47128650493413226652 0.20486323548581622522 0.38338466898228967805 0.53041750834999390474 0.40490676733844660484 0.16515412127074552417 0.095778081287478986083 0.093360682169884870452 0.069092177106704871781 -0.7548365834092213289 -0.54754379191560742512 0.79615820937938031054 -0.32245536738593927328 0.82686278233186316644 -0.47752457138759546451 -0.51369318835195798556 -0.3833730315780444764;-0.052266981504848597506 0.026851803519234523909 -0.27362820715364555291 0.27557669086300157213 1.0683095751212017266 0.2785109057566942381 -0.60415127605876461914 -0.10277114004912829559 0.26174758646419216124 0.22260843205806760126 -0.7715838822527052443 0.35560190770663946402 -0.27938560455093564006 0.43203010155921517388 0.25257052251603812065 0.73991146347205272171 -0.4835462727301588215;0.76636739678265741738 0.25739428281218790229 -0.96345883490565420448 -0.37438451490775082053 0.99072780077463995507 -0.20652585837497980381 -0.39683086864931016446 0.53721173090682927675 -0.25676959282664779671 0.24030560740178119605 0.60231561543891376509 -0.35559636079648554441 0.088549943263460786924 -0.22907702991210163179 0.20723379535471961321 0.09090661882684959727 0.72854431214181669674;0.51854953122956470857 0.91471684322395874212 0.10476026533250031025 0.23317037929268666363 -0.20189611069582530378 0.26183379987889643381 0.057032052910718222805 -0.43603459378271369751 -0.44608559499606142973 -0.76020418814102319605 0.74597087152170626911 -0.088437491077049290578 -0.25288516977379327244 -0.55468711869723807961 0.25405685331346600231 -0.30540090122469221168 0.035758428526383029267;-0.34271295605358709224 -0.56254525623336504303 1.0969093997151664333 0.053507961242354691589 0.22595351499222185443 0.50906694834277121942 -0.34858592862938209134 -0.36474521749990618247 0.28042240767925807887 0.04765209056198214943 0.054078241829044366995 -0.449791088545783313 -0.17394105660815431524 0.57333682676426156455 -0.31504037692428688011 -0.010752741616276324799 1.0363546891569750397;-0.83853603349908722997 0.21459567063297846357 0.099789092472992252381 0.086561720771734518287 0.060610082500110698533 0.40651678023500703585 0.10135644099126485396 0.086701690036073308931 0.005533915172719124087 -0.16930741652444428191 -0.2854161182764700655 0.52657464054828717614 -0.37307222820212415648 -0.5594848222940423943 -0.30949767328872940242 0.21209873370175530427 -0.25180748064877528369;-0.34045584349285840098 0.17988885148777616907 0.38804392056897091257 -0.14833999667947600498 0.39960845970460806553 -0.47526936822907950297 -0.49680090826811357241 0.26310373651085966484 -0.27691054824590471961 0.711755778097641012 0.029079209404794754967 -0.40460472522699564291 0.3404331312951939803 -0.056185737332675803057 0.29766322455563171134 0.058664990742828646009 0.22851199588192278034;0.5687315676441045964 -0.28852992880952693655 -0.58530215994295742288 -0.23108861454558290993 0.27644020767232224678 -0.42087673724135271636 -0.81320645765509214087 -0.02707927950330914213 0.062313898445762544442 1.6767277536072582311 0.54505863057455394838 -0.75237518812064085871 0.51446628876111222262 0.19270092323219306651 0.24379494325291087287 -0.31715526273546978953 0.37938093377211673518;-0.90647284243592907149 -0.14233058904640497055 -0.21096298815893910206 -0.13252964560143432049 0.019690713573931380165 0.45497487661063429343 -0.53047765792767442861 -0.33688570701844361421 -0.035664314946756092706 -0.17539537740696134471 -0.56342631562671519063 -0.59842130113253200197 0.58394267103856600798 0.50183644940398897116 0.40912048231965236766 -0.1245224325167081092 0.022635401936567673548;0.101574698483824305 0.01381069930759237438 -0.36412721756331878353 0.40964005593003133265 0.083966147766773940875 -0.19480569208883080634 0.049290108592548460831 0.25870663649599612288 -0.3206321004297598698 0.07331589501093083161 -0.15723922141662288743 0.86861983523430263965 0.063323584139353503164 0.92424281489748383311 0.060466345890295515597 0.58565535089695475168 -0.55008359708273446564;-0.14384014128213062911 0.74482931669062002467 -0.18088328589729929519 0.32040675965467363406 -0.030220412580029654831 -0.0093766432762074566898 0.026067276557049025298 -0.048014721024444588504 0.37308195501316226972 0.72689354240480885672 -0.35700210661116676958 0.5563547871982043036 -0.61346142530955682926 0.7077619597866009471 0.50728623553663332313 0.10677197912692473758 0.021791804661168066165;-0.52141546567032182047 -0.43310215320437051023 -0.57707209437766293636 0.1130857808689106625 -0.30880439116997671078 -0.073038742154415636776 -0.55224026430979611391 -0.50143405154242604027 0.1098722758853609982 -1.1335137045199605854 -1.4554423798781266353 0.072319479478489656632 0.39527525399540186513 -0.1114362283251455199 0.79839273987768089036 0.05507127315535585016 0.2880211927269393235;-0.17623144407034413428 0.37979198178986184331 -0.044283642945804425894 0.22916316693158084172 -0.10675223210555068176 -0.33009199489935681093 -0.51136928324368891019 -0.27940403508106748109 -0.091414285636050390815 -1.0203236088549774152 -0.31395813377127113064 -0.48261897295683603426 0.40009622914960296658 -0.11180425536398395925 -0.12810164311225613609 0.031184505371538311785 0.35043817093860024636;-0.15617867592071807414 -0.025871979090566432635 0.052994710519801702109 -0.3588907218575728697 -0.28202107243407920079 -0.29381265347712232083 -0.23159351862798577271 -0.19421720447700635548 0.093841019545785622769 0.24242795442488565549 -0.18899229321855445796 0.00052484257764022664017 0.8771497977073503538 -0.75287278964522585945 0.49361669138975716731 -0.49879305575449539578 0.48364265995168487233;-0.21609737950764595915 0.34442998149122960871 0.69242413284584480859 -0.12196896792425572509 -0.24495141713988607957 -0.50960659491234427954 -0.41635362782736817788 -0.014178038338817817998 0.01468893601267269762 0.36673851442636795639 -0.2462877167433512593 -0.92227085158113208951 -0.046092934116753886409 0.16898020711532341087 -0.60810005660872057387 -0.019257889996477647182 0.017836339597499729914;0.35775234111656445402 1.1543700404911825252 -0.54702474151116586842 -0.2871386194260986402 0.028699299277591447388 0.20376105794265028659 -0.38375354260887734048 -0.024462664327075320236 -0.16169091012707412225 0.28686885661151545479 0.076673452835339606093 -0.23478385811532928584 -0.066326206040669619113 0.40679294977223090513 -0.36574594291406142821 0.94045775874771408986 -0.39719761850464263553;0.44388625543231724491 0.72960899287215053022 0.27404642875392332124 -0.30426005837751451955 0.34801668000010704818 0.80196250869449769993 0.57829712839746105768 -0.25573589871748581004 0.048331492148448902679 1.2210134980523128512 0.60033085442883793448 -0.51738832430546699559 -0.20359613428635434107 0.48560158706032457987 -0.10309808494925400135 -0.26949360045951337161 -0.2649623710061710935;-0.036357130733177617232 -0.18304727407122714511 -0.15975094412283394329 0.14624319599752422238 -0.30485836298128565769 0.093629535240609795821 -0.27519321205904212491 -0.32707437625624330435 -0.37496575797002923425 0.019246158316309758957 -0.004866316519437585697 0.51528479718767605799 -0.35033788275781047039 -0.065183656380867496805 0.37096801790539202237 0.94487128177500001591 -0.29439060067137934329;-0.35880661537396474348 -0.3588038403563247325 0.20113763053713451523 0.11113064330327926399 0.45051649237888119481 -0.24655165401239392819 0.24711608198436849082 0.45586474118504571873 0.20163427277945208949 0.76302778942077875701 0.58869064262958603617 -0.27868940390952795516 0.80777271717646104143 0.87481584327192907224 -0.47550415645123311759 -0.063129420932318769388 0.35408839270027164803;-0.27861840342009364102 0.61344585782447891287 -0.31047252382425361006 -1.0047582139864692508 0.18214275803622592687 0.17095754853514671945 -0.77024866053610363537 0.19669659902432090615 -0.39861002471930867541 0.10858576844219443303 0.23858508206631087734 0.5946477536893119975 0.23452598710772371016 -0.33227237266711567854 0.33548818910320138409 0.74063701891418209922 0.72396316039116692664;0.081901428803478226737 0.15123127038275138712 -0.21664922705749067866 -0.4609972915872300181 0.072186347821513910383 -0.1354839104611706424 -0.0069055283497671815507 0.052987915412773201052 0.13350085942357678426 0.54952019925106354581 0.16139769794099276257 -0.73690241835990843988 0.66353843796947309386 -1.3187232265050041757 0.22648868251191026091 -0.72310732140254929678 -0.35096233807789606329;0.43115144016277739958 -0.38742386782814991486 0.072386307007677674896 -0.3818202841438417261 -0.69359150961408355673 0.036456609443662468806 0.38245537422982595066 -0.2273731234743904539 -0.0012375169768886057353 0.36697635513739557123 0.0621012544679970524 -0.69585800736828162805 -1.087807165484596883 -0.56039159860039733374 -0.11392241339103229003 0.21227370530528616444 -0.27537404777304430592;-0.15412904776545358065 0.86023007638662607466 -0.75001260174238115752 -0.12493945814710157027 -0.047294266991157352109 0.4091615641147459681 0.24428404376186235725 0.4465634386329317973 0.0010615000336959626304 0.022415104943237972035 -0.50715597841021486936 0.29204498368999509683 0.38799013490037503882 -0.2396165302199068925 0.60579248301887334005 -0.78951240918918119682 0.18560182191831742227;-0.27537947468838452902 -0.50184799042829331128 0.10906441349437205612 -0.37741255681337620986 -0.062176280466891782617 0.16901309610013942608 -0.11194528134400867636 -0.10368393583391208312 -0.09939309116068903438 0.51539443300731002662 0.035935957092881457009 -0.97144846686094965538 0.27557923603103001708 -0.83149305835068243464 0.19446497277370083934 0.0064526963903111331927 -0.29460984887121921538;-0.76783852684977882408 0.80024383458097758659 0.22687123260280694925 0.21644399054422269746 0.014843069947885367821 0.011531425216460038791 0.092000835275729594964 0.19955377796730536244 0.17100187838894356784 -0.038509944329672064767 0.14962633936239616572 -0.12498378488203754078 -0.027418876856784624163 -0.37616696769454416316 0.020754657323620681608 -0.49656359461343596573 -0.12343501125472114421;0.88706682262586411536 -0.15614423920400222201 0.61211125658274867511 -0.12298180235187181064 -0.74435307937298156311 -0.04088268011238126165 -0.12156619272253982311 -0.48852038390839841453 -0.12258266829324210301 0.81463376994753844418 0.16875160399985422721 0.47307836986631524034 -0.10669329451681142107 0.40416386618191929569 -0.13836842537959642696 0.29819231789261985144 -0.063414935741516881285;1.2437074219606691905 0.51634545961835009997 0.26676873287498004128 0.45425390557043554551 0.27949212348219548696 -0.56772425676356252922 -0.070378126155059173019 0.18383858182322820873 0.053404219388068698005 -0.28305391914239758089 0.23472367912280345248 0.58455463316153566389 -0.92301738827741641735 0.46332666818552997734 -0.13719185426263108551 -0.66899177090244599242 0.12606788318109629632;-1.2610400697424728467 -0.76269032960130678234 -0.13125100998721903056 0.37667680145378035217 0.18277115103767604953 -0.085498425996754362499 -0.46753030208382134747 0.033394747137057680109 -0.25069575365841612058 -0.75390170407087342408 0.6076105920330286958 0.89370007101229942403 -0.48284333483364966222 -0.11072729630667375866 -0.0026149259149396038293 0.10794107195885105366 0.060566872960329656839;-1.1611958034305076559 -0.70951590488699767256 -0.9588014905860254844 -0.083199102457504878205 0.48571100739989953032 0.25930070150656681083 -0.42144660355068513935 -0.098166352603319045889 0.12427940262410208661 -0.12410511662699046098 -1.1517964460720961917 0.19732362831482022636 0.12550990461046074298 0.50025466376608607177 -0.82704978272721552113 -0.28522806331119987533 0.28408602401370069979];

% Layer 2
b2 = [0.72295153731333428038;-0.80687984129266643318;0.15861749839898284242];
LW2_1 = [0.28201117555357896327 0.4542007588496871362 -0.13959058979480223894 -0.22637261393541247001 0.84279548666722581274 -0.060133546752368302601 -0.81128602466042132324 0.31437982640307138293 0.53509559072051116058 1.712736555625763879 -0.27305564319443004218 0.82207171504673404172 -0.46527810151484050305 -1.2692408960133734208 -0.10688344697143202511 -0.24253949971176830269 0.1585781892043598984 -0.76808680698977760404 -0.3501629365211642031 -0.67313841485963032962 -0.12765774898827642048 -0.21477841126068714095 0.24952534278554810987 -0.26305591104752401588 -0.12019237378768662938 -0.14977861488343252594 -0.63200011931985600189 -0.47510805127190069985 0.25130128020887487761 -0.96594831266744163312;-0.73157173819930754188 1.1230714992624322157 -0.1459040561552115145 1.0452743652679816755 -0.8515324260739319806 -0.26743476044516817369 -0.50777775517380741022 -0.64484377236640944009 -0.84252217977112020542 0.48111144322451326882 -0.24004216687760882021 -0.91452508180530733828 0.3261771504892631568 0.82031676244207096804 0.45487688286232536017 0.39959668880913262745 -0.10186999745030228537 0.74701429698567789472 0.87035083850657291027 0.99894169878636673854 0.39235285268270914116 0.10106089609824278619 1.2802245236472677981 0.23205366564973242682 -1.4293557054359982139 1.2805234503214097952 0.40559531380020924507 0.50857265956338704171 1.2165132135108784883 0.84986927998281980301;1.2955194614170426615 -0.97860988607707921627 0.55144601855236741184 1.0969674776282920536 -0.26661323703057548951 0.942304798456206405 -1.0190232974639539254 -1.0526940174988999033 0.093427109401964400504 -0.47966482002545379748 1.1563737190518517117 0.091919036418663613297 -0.076254751463243175547 0.36423166008463420118 -1.5364939832213142523 0.90988671620398076101 -1.407603590097267654 0.11708740989515002695 1.3635194334277138672 -0.44649784306535456047 0.06352914969489303898 1.4355511533407567804 -0.82072677994855924855 1.1303001115740092253 1.0458017095396712204 0.44397864811491016823 0.94059303098205571114 -0.20785948666221318315 -0.96448462218216879371 0.6344466271953123071];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
