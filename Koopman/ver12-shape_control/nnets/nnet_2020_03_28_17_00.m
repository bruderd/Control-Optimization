function [Y,Xf,Af] = nnet_2020_03_28_17_00(X,~,~)
%NNET_2020_03_28_17_00 neural network simulation function.
%
% Auto-generated by MATLAB, 28-Mar-2020 17:00:24.
% 
% [Y] = nnet_2020_03_28_17_00(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.55617854461996;-1.97389590163265;-1.41973054790476;-1.61967509703524;-0.970961571361523;-0.541818567209647;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.371238708716135;0.737956059626752;0.594383538447723;0.5540533836419;0.863440560832728;1.6776055302029;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.7613763228835450647;2.6880028248687488635;1.7161847299190928773;2.0410591132204443099;1.3758743763302880847;-2.4848782520628702741;-2.0914732990022120163;1.4626467028389760205;1.8960451654960313039;-1.4858927083191173502;0.17485225264174381055;1.5873356317271432037;0.073583294127868861811;-0.22483895454889032961;0.21489200637548777628;0.02157334817425753809;0.033121194012214319469;0.67268277135968945757;-0.66323897527267128282;1.548915658434571796;-1.8139201883215918532;-0.98406110182607808845;0.49258836194701760558;-1.2443060043391964697;-1.7247323175746511748;2.2294454942036119327;-1.5636659826646508442;1.6517176385584861897;2.0214627827851687769;-1.7440793978799831176];
IW1_1 = [0.78480699890384919559 -0.57073624019529145546 -0.21306438233483285249 -0.49054985727076522162 -0.16196239689825653318 0.29961967310907938744 -0.55454448138082712561 0.69073809615410108886 0.83368158539066006263 -0.27543751954231709966 0.33814682196101991662 0.21390605934657733189;-1.4649500463949427509 0.14072212408451492682 0.052191968499307898888 -1.4100095567290296117 -0.16992105110610761232 0.34009202772785851465 0.37342048956583973052 0.25828911838348445063 -0.72096161694286320376 -0.90342082779189381014 0.63930222051729379551 -1.3213650258376126168;-0.026732458123347284384 -0.92057170214821726351 -0.19042954360208286246 0.61901306706098990773 -0.079276019119506796473 0.25987935476957957359 1.0370830561378110435 -0.90828198763602219223 0.66083499971452908106 -0.75348975773279780466 0.13963071580132649374 -0.070462897352966749609;0.8069062202187911037 0.17754722118667415343 -0.51977020417867270119 0.78069904473644158305 0.6647119036840352102 0.93096458342176746648 0.018289259635630696066 -0.84659407185835633403 -0.29982425087269909403 0.31723488522095616426 -0.22069123615893052048 -0.10122950087988930035;-0.61052041885492303042 -0.39579563819356344823 0.33288934969760880511 -0.26286619132281552336 -0.49586644047716771366 0.036694396825689624964 -0.10360612558768798885 -0.48894078913364769079 1.0382859281494887238 -0.46058266582054208094 -0.52759233385497350532 0.70279640088309658363;0.7944817574673933569 0.25943836643590811875 0.66011218171869256999 -0.95031583740681313532 -0.19549944696248316989 0.58471293529118939514 1.6436843847746893665 -0.73230309220573364115 0.58339726004435310536 0.2014720290837049288 0.39262277997339528612 1.2169781434589193037;1.1394428016924118552 -0.5058807183687151765 -0.36779580011004686657 -0.41830570562192398443 0.12132508840863169552 0.83978389740273307051 1.4549913546575521384 1.5879420499317200566 0.11300168695969040056 0.85982613075004155068 -1.1461374798632826266 -0.26777827658192721039;-1.0972850090381922605 -0.43695649497446520382 -0.89453880870472579634 -1.0830946969120824885 -0.23290809777895288279 -0.45046472382605540208 -0.99347885469591168395 -0.22502925165460971324 -0.098126045702801076298 -0.27192312139077801092 0.32794991854475091797 0.40255023985990007196;0.028687537047530679846 0.39322688550676121455 0.47808708340944816584 0.074511913490404563243 0.35290813324642539284 0.25174578894193738732 -1.2246904999540810799 -0.49874192563139990719 -0.93315815436611382339 0.23917559777911490126 -0.018910186241557852549 -0.7105711828743753733;1.1405778120818648169 0.046879476552586327176 0.63280212415070069554 0.05640333346674468451 -0.2685817461546584628 -0.1381459138489967986 -1.6472756644812007742 0.54948057604728528514 -0.3163698243246725883 0.22636317145929199524 1.0711892818987742704 -0.18601979695413922711;0.092670116738404015311 -0.23702348064649880754 -0.57636025145722735719 0.22154955521492700199 -0.093250008591089769694 0.18429748410654400725 1.2390913489020209948 0.11867144537456816855 -0.31480709753751034974 -0.71138157562080861496 -0.18815236510785762758 0.80585573942909560774;-0.91757529285175076783 -0.95208311301472248189 0.46486232380656716812 0.1687345167861357409 -0.59265187809756991744 0.07286943830872161243 1.1958200482243979135 -0.62616290699102539197 0.020417830127086956937 0.49558751426506369997 -1.1647831327345914421 -0.72037387634216165644;0.71702787925799027491 -0.27551585706885284299 -1.098621003470523938 0.11397449243633926697 0.136443705789348807 -0.017998325540481641127 -0.59860036194318266833 0.21924210241001557131 1.2068032953931746576 0.39004194871995118143 1.6185446376993979367 -0.61656645493903627919;-0.051697375407163619065 0.065115624152250001222 -0.58195815460735811353 -0.68419013680465767813 1.122453384330063475 0.13408147072299334002 0.36296520822109273885 0.99700362360157168684 -0.34329158470782883406 0.57210759196080274158 -1.0516902176171307737 -0.44915214205966791372;0.34287548226936681584 0.057040035752418595527 0.4660577438796172367 0.19379906068114574613 -0.30273450106126054138 0.0190937510148945222 1.2425085425923758642 -0.70532350418178413332 1.0530714112300834095 0.16918401378474973162 -0.71547836189867874968 0.57361771436120234657;-0.066205328700777527073 -0.15320212928938567454 -0.38011333835400190617 -0.08956704252581494663 -1.3387534071193600838 0.38332845824752564967 -0.077973028525247636833 0.21462062251220129228 0.2482127786599035435 -0.12092284739274734851 1.1604659881216019546 -0.4858957179903755641;0.043460223448805519741 0.040218069575986899189 0.072754704561998576051 -0.69909787789832056326 -0.035717274595019429806 -0.09735664706193095097 0.66245722096329884288 -0.019068297598950505189 0.67475497002857576234 -0.37712761565061120317 -0.65240792788502599553 -0.38933390137895129701;0.191768382524058284 0.29848232738216928794 -0.47506195224950120704 -1.6081053739534401092 -0.58063255495556265195 -0.49230282351385262762 -0.62954167113040471193 -0.74586694178754964213 0.35456458866581036515 0.35169282749663965948 0.058315617887249426854 -0.84615024680419714809;-1.0458549953333775573 -0.066793417887407127709 0.55454554554292267987 -0.4838232092365662429 0.237509656651523543 0.14204183857643604139 0.97224333160288689548 0.12638521057425849969 -0.92370063884649167285 0.45531255851383728439 -0.30908750573703347442 -0.57545662318111601152;0.54154391494273368401 -0.25552427067341298983 0.21028245960168698292 -0.66934810488949136875 -0.051560950794445573053 0.11820250176256336117 0.12211572765957123821 -1.2175971908190319493 0.51807467999289480431 -0.67555349234701966843 -0.76382705989494281695 0.4404678919624337996;0.61943535998443921553 0.35411837820343150529 -0.77599477571503128193 0.28450937175677049051 0.44440949584441336029 0.53208227864872825741 -0.091796652032152079026 0.47516715329598696593 -0.23220935632119010794 0.99930469172291869207 -0.095843819431778248807 0.36398003773550363649;0.013685328991263703141 -0.61444010600424459057 0.74344106887760519342 -0.35774688179324448667 0.040862599955850203992 -0.46046312579576870183 -0.52894517922902384299 -0.20338570268971931099 -0.42874416201104070812 0.00411474034494069274 -0.45812195305681513435 -0.14122441107948788264;-0.58976077022485429158 0.20601295917242623545 0.18551048564086042303 0.31165429700486119158 -0.34369150339607262845 -0.049358291065187187563 0.060682563068257089345 -0.96780963323339297411 -0.28042442664214550785 -0.00049874877903811551394 1.0019635624792671003 -0.043792017363846101607;-0.45672204745375577506 -0.080623910854992486552 -0.42385173238784873417 0.25835972121097233734 0.51138068178780571316 -0.60586258560358308145 -0.15161569129296381675 0.57683054412004930445 0.84970284537202001029 -0.31673082526544149573 1.1472248980742267843 -0.44489291500375682809;-1.287276217368031439 0.34619847458988167732 0.28618689034284394701 -0.50628029748004110822 0.48209003109877052173 -0.11182585176814024974 -0.27796700909197802343 0.64984671520129289046 0.06374832999250115706 -0.89417272377158651953 -0.67684245303680490302 0.83884238226273100114;-0.35554646780994597632 -0.42083921305136406943 0.98208235934653254073 0.35300120594276879205 -0.94864916376822572275 0.11177235198133880778 0.33467011421458808806 -0.06371648490350316496 -0.76732875306900028001 -0.17660174311213341913 -1.5862497756687066186 -1.043663607263976445;-0.82925605959570702908 0.16866901147263138605 0.27507409201575544477 -0.1183265708677732897 0.56358104573796630188 -0.74747573432739478072 -0.15138297045841472843 -0.045914489656509370474 -0.98240473613521528407 -0.082788510804327086756 -0.40237107615970180152 -0.005522041685156888792;-1.4107203100489660308 -0.54118289174489331295 0.89401635289273129192 0.18735609291632537854 -0.71197830075634271907 -0.22397114070417170617 0.046571736867228472057 -0.83613589217201800263 0.7239017253037245414 -0.021063242573959597981 -0.073712936331060505135 0.10326031249981015847;1.2285668327042027492 0.54317489101644544913 0.72481818846205414708 -0.87094306830308498846 0.75342455189240808977 -0.13029038655990510254 1.3518216345772673392 0.1166530072484681102 0.92034022786305980102 -0.63275046931651413029 -0.37048755302936392519 -0.097241561733863779438;-0.80399984931075707539 -0.032704744101811712709 0.25407402776626525354 0.63558187279847244699 0.71920780541030182587 -0.049986805110675859576 1.5792191227247296403 0.28847271935989593494 0.17271111869512129067 0.87359296172797773483 -1.4893543563416420383 -0.3404099619286515277];

% Layer 2
b2 = [0.45214592683435966824;0.88956446169472480623];
LW2_1 = [0.29929800840442388754 0.35181490145801136427 0.20631286492779654651 0.22272079536169725467 1.1626313542230299891 -0.34160021334148493732 0.24277380743009402408 0.57607709998263045836 -0.82066922205535342005 0.70428334092757671758 -0.44158651716286378974 0.37780765492594270416 -0.32088218735295770401 0.21984823591639751639 0.43092355217227001907 -0.20939426508751102229 0.77462992908349304066 -0.53715655046541788131 0.50920035361397164575 -0.63916296427707275374 -0.00081999620984178622773 -0.80329028655137657555 0.78204519070631695055 -0.17294601120650507364 -0.73685526194513351061 -0.12046847525420248393 0.85700397319180077194 -1.1829166290701678133 -0.86209815657344002204 -0.68819932654201521061;0.40572786682645434198 -1.8983834192775623784 -0.26605788419545339796 0.064409081032999665473 0.69502790577085182822 0.83263373392928963224 -0.49830067066313771251 -1.1040230706106872738 0.020744909695553828688 -1.9567467122469037744 -1.0649054042276133725 -0.69346309645159132096 0.95766592194952870898 -0.83124215392453359996 -0.86642646854116989186 0.64865941414265304577 -1.6568878680444072415 1.0829634128647549485 0.688466170483762685 0.79699407283505807609 0.65718608272809753146 0.58681813739766663929 -1.4996030217723279598 0.54257598889185487678 -0.74419061921053941688 0.55689010024402030297 -0.39333326360281822831 0.65356393621862696186 1.6954215510547594459 1.8285188462258703535];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
