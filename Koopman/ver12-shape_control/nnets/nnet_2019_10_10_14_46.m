function [Y,Xf,Af] = nnet_2019_10_10_14_46(X,~,~)
%NNET_2019_10_10_14_46 neural network simulation function.
%
% Auto-generated by MATLAB, 10-Oct-2019 14:46:02.
% 
% [Y] = nnet_2019_10_10_14_46(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 17xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.717074197601631;-1.1991754242677;-0.527152273355487;-0.608002746941745;-0.751598794584702;-0.628913937187581;-0.503265662386152;-0.423893077862826;-0.724803114769376;-0.552924638877355;-0.400018027406459;-0.149766011405235;-0.346770609060649;-0.657812009475605;0.000573229369405848;-1;-1];
x1_step1.gain = [1.35809369779432;1.19374918253281;1.70974705475878;1.51063073142139;1.45722983774088;1.60199435122163;2.16079910728526;2.05747355291035;1.47211625447802;1.65842588539186;2.51147506546924;5.42505687133394;2.53697997558309;1.40497118339847;36517399828.6716;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.9956367870053850488;6.8597130681981512978;0.01431049098097673597;-0.59045610247074609145;-1.7154242596099638085;0.93556522581957801687;2.7272053148045154458;-3.7607212781392611589;-5.549779403998755356;-2.451011006846592899];
IW1_1 = [0.68980756559165590236 3.5187606579760144498 4.5786956385519896884 2.2376965095769549841 7.3236413950637730963 0.13932705578624088316 -1.3229762814474901322 0.32110390125052656884 -1.19520347801038751 -1.3519126253654394354 0.84953696883356066838 -1.2058632654927439187 -1.8569388866465796895 -4.4284403669404195369 -3.7791082631954564519 0.79465192880504464945 -0.50789365670141406461;2.1098315347734417635 -3.0984491772938862475 5.1495491091805654094 -5.8189952465138858884 4.528894414902711496 -0.43055309623131132746 2.0829676016032059316 0.1018664703015562667 7.0111989308120215014 0.01199965527606551563 5.3970803720038773577 2.8575262617858183667 3.859045063964467559 5.591599045872068352 -2.1259232101658729341 -1.2443290142297778189 4.9060908373992724307;7.5007955809456960949 -1.2094272465307998043 3.9498134834721545516 -3.3650156678703533331 1.3314025691856143929 -8.3169086792515294349 0.18986131533279793082 -7.0153539989329827264 1.3747606311104236809 -2.5934658818382230194 1.8539328439452829045 -0.86369043687490665295 3.3121339301853800485 0.089832824684490192313 -0.37606113364042648151 -0.37927192481629196097 -1.2790849867394586958;-2.8476484716688106325 0.68378709560009520718 0.63146751968255365739 2.7757077058024708371 0.57401023143499352308 1.0677014964582094425 -0.52306891626984541865 -0.26772059363275729771 -0.62695242575898080251 -0.39698395294125976562 -1.1002844323307643393 -0.0049226238873278970257 -0.42760332259837985358 0.12302554634396400957 -0.027051064847189238566 -0.083787748567182421255 0.050773725164309058133;1.6344206453585938821 -1.4301151849588438214 -0.54777359843374395787 -2.14921824594593458 -3.1429355163303158704 -0.5352310840387549673 -6.3478528180886621968 -1.3832491738324848018 -2.1561737812708581252 -5.9145183760362645131 1.2014055481455192531 -2.5451536933028031662 2.2359763441851696619 -4.6816823013935930931 -0.21148577239530491623 -1.6117553757846392326 -0.90617383715930999166;6.5288982701764020078 3.7888696875115845941 -0.65304698455729881523 -0.77876271250770012777 5.8072997425226624557 -1.0054441566466905122 5.1720140919325405804 4.1635288327043467049 -1.3471285178176848341 6.8854570516999222818 1.446210403752955731 2.1177798406988221913 -3.407390620928125724 2.9755858190653241557 0.77635639785675703006 -1.60145839192617645 3.306254596346617447;-1.6204391598889786863 -0.24916787847229146524 1.5199118271142533221 5.9711396106706589038 0.87610070145406393483 1.2509905155575877789 -0.78562837222276826754 5.0444623279479534617 -1.3444137901766584076 0.91217172289680248376 -4.7783524958474137279 4.1918636285117374385 -5.9298369113733180313 3.8468427614756746102 0.17168952055364175568 1.2800712900907391667 3.611523448715467044;-2.6787739658970926016 2.6692897526712648926 -4.3250843902375049055 -6.5797206283677542871 -0.18383650555935615589 1.9798633046313718342 -0.77259661896898612632 -3.8224265559290779848 -0.84563636255610830084 -0.84319974211310100287 6.4618531396289053959 -5.8785116713153495738 8.1432467429348776022 -9.489593496497370495 -1.4903579872085133129 -1.9368140030413949493 -4.6598958204816414153;-4.4671306277506790394 2.1313519333406558687 -6.4972590942863615027 2.4027938177805197029 -3.4124388420150371104 0.9714095797550504896 -0.92138338246419870803 1.7993864365702196828 -2.4431390169995399475 1.5528108219773999465 -2.0198268002132704346 -0.88799532572585193613 -0.8800139260010967357 -1.3917017902343107316 1.8820477059077380666 -0.27906167749225646579 -2.4511854204393208612;-1.0183336330887966525 -4.9979353147821097281 -7.4903352757611783019 -2.6816302802907756586 -10.725447056615319497 -0.70248880050352979776 1.4390784740534392494 -2.5964520930900483187 2.2727425584811866699 5.9297489169177506341 0.21872533189266885056 4.1684575489859279074 -1.041775955725061209 8.4155234900965396605 3.2606292745781915166 -1.0187473160879396694 -0.2837046410977229205];

% Layer 2
b2 = [1.7917783877697592843;-4.7674627348009668282;-5.7009273545735323907];
LW2_1 = [-2.8161146305439266335 1.3027431906287976204 -0.0043513174563733474781 -0.89174658351017188629 -0.2336090868014545352 -0.28798738693166547886 0.15328402958127895772 0.10793335809731766095 1.9541442034340832379 -1.3840591518424876227;8.6177639880053522603 0.82938886574472669988 0.11125143392405401066 -0.31553276821332237878 0.10937380830637924434 0.1385113014452872271 0.063733522617505061758 0.0093070463927042868663 1.4826350144419562227 3.3627138895781598649;9.3486539373935162445 0.19548398501386332615 -0.1721578916016344718 0.065679305490444095383 0.17759209976686285426 0.055421330027953040476 -0.52912617838198394704 -0.42138874798617770301 0.2860479582452353231 3.3732550043225741909];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
