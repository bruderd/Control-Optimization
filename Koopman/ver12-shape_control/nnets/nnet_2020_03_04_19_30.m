function [Y,Xf,Af] = nnet_2020_03_04_19_30(X,~,~)
%NNET_2020_03_04_19_30 neural network simulation function.
%
% Auto-generated by MATLAB, 04-Mar-2020 19:30:52.
% 
% [Y] = nnet_2020_03_04_19_30(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.33695375844744;-1.00906749436901;-0.471450673925196;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [1.11349909693679;1.17921412379656;1.95417777006456;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.0766746550486279155;1.8989342862263340894;-1.4295260375126190855;1.8745554929052732351;0.6734758925576735944;-1.2479632588124205395;1.6831656600114732747;1.306365449747070917;-0.90295329713470440236;-0.73842416211254324754;-1.1166164912180795987;1.0831813008238238005;-0.49417099274180315005;-0.47141666186835318175;-0.3592664554517861486;-0.3397115880932685128;-0.80583689847657513639;-0.23128201926311836578;1.3225858853884056021;0.19096493642244319333;-0.65524140047422985145;-0.48477145641051699876;-1.3446796413931709768;1.7833976052131119694;-2.1034129666075278564;-0.88527124364142228963;-1.0254299684652514735;2.2057691927120912645;1.459636121843850276;2.0658847968459022049];
IW1_1 = [1.6790493192298356906 -0.043820259224218810479 0.17079006651660008642 -0.51039354939245662468 -0.58332805495836592691 -0.82949605218466693213 -0.46422555408763549467 -0.31814475960564475576 0.21369441794450566574;-0.55357380822527035846 -0.73664730682943080353 -0.62678473332543427343 -0.41248750798681627083 -0.14704124217197864222 -0.45403940103905188197 -0.49846177358200460805 -0.61835577179030931649 1.0950347283958523636;0.25064378201983450456 -0.76798713716104405336 -0.39622509695974650334 0.55301558080920798499 -0.40664686315879344791 0.87435280838833551176 -0.19284173952919522743 -1.2193126021431999195 -0.54706179182448666509;-0.3826107154391819587 0.25383151054757124854 0.50056965844779854891 -0.28260427840678081779 0.22283896737098785046 1.5972800617708009518 -0.72902350402327831258 -0.12599471106062670733 0.11525982951850198555;-1.3039518790833986017 -1.2977435611387171388 0.6914552150061069602 -1.121448788551975051 0.57145852970723576281 -1.031438122251757239 0.90287594247939184644 0.38333251790913780432 -0.7710717333076660962;0.65915994957668744281 0.67845204531757230537 -0.36018003395288344937 -0.6839820381810554073 0.22406017633681829526 -0.197329630172617565 -0.66500101651332454988 -0.14017816774968311355 -0.70717234151740426817;-0.010553791993713030131 -0.39808219089679763858 -0.13512824363967920749 -0.92982532993808675315 0.14824429864259899836 1.2488674001528845547 -1.3691705722784874855 0.17923240636411777449 -0.069905122435062555519;-0.55782937155961875852 -0.70553785077171449203 -0.18830037448390329891 -0.57568340881036872414 0.046898989406968322191 0.83998721725643266112 -0.64427079674446707802 -0.12683435876076659676 -0.55316623330651781831;-0.05983777441794888019 0.74955029963706998331 -0.11545624915889200757 -0.54613261558905168425 0.14235290389038224301 -1.52965742146402639 0.32782819493505066522 -0.039033753183288541488 -0.21666321882424438572;0.45864491030113596626 0.29327151200561119015 0.41245476226774119288 -0.057444539035745992295 -0.11803680812686678792 -1.0064073420410080129 0.65202637820572750815 0.85171506217539150185 0.2234113061949361545;0.60661554351769475524 0.48306308998514185804 -0.287349022315007252 -0.22441197071309121336 -0.80895367525078032411 -0.62695434071748223914 0.88541162975389942069 -0.84798762725434684295 -0.30067458265114049842;1.0718031452947711646 -0.48109530758776969384 -0.27852643182989733628 1.9295448531294445704 -0.98568536335004597326 -0.45610272014897679238 0.080048603162649639708 -1.0673835044888830836 -0.53625054060243670939;-0.61607259493131194539 0.61757663348176272677 0.54028894268559690683 -0.62633364138124547615 0.74096806868077513819 -0.0015382618560917504097 -0.62777293666280931106 0.72862991089442386006 -0.54094230641416052308;1.0973168241678896706 0.039396206682530653109 -0.89120614634210404414 1.0494543925053048117 -0.75619636273839674345 0.98766573033699212036 -0.42990468347119575876 -0.31498398620301137907 0.24712081452504131018;-0.57216696836438851737 0.60070588622431175807 0.068315503193065230114 -1.655234354001825281 -0.39167198280868803506 -0.78840317544433180519 -0.85483186018504941917 0.30961142028745558541 0.018023816083524622778;-0.9911806606463579028 -0.74459507028560323327 -0.81610006632666132198 0.79297480246928486736 0.97898500420336276306 0.58926535601640039896 0.054300982899087066325 0.36976094538817899648 -0.70086931107616667891;-0.82653455178020485139 0.33417433738415625033 -0.43760067483463510607 0.40288096778477971993 0.38640739078461205924 -0.63853033694470995307 0.96514810283082419495 -1.0057597711868362378 -0.18618050806889588356;-0.98484021093238360844 -0.73318591993160897591 0.82611190469325312957 -0.31012554671554215524 1.0821161301119350817 -0.31845191338384393198 -0.9595457076985465239 0.038456238638327172596 0.52843234783031978186;-0.010757942067828292834 -0.40188525012587245078 0.40793981596020489899 -0.74851230633659060487 0.15005591039421534161 0.72684522167934484393 1.3877201678049433387 0.65954003318940379597 0.2508552994767072053;0.54405301601463118555 -0.46024368672278359593 -0.46814620890229763361 -0.36054282190770758909 -0.65045406495345903242 0.23441398231603363667 0.83515775071713926891 -1.1290758373584470764 -0.16085928734528426309;-0.057116978191349435101 -0.76384187816693882578 0.32386492179142439829 -0.0965910252499559141 -0.36928158579955627783 0.61310722742268297658 0.98181173829982193446 0.075051585708236959182 -0.071064104144645104388;-0.35886976859785407745 0.77666796257781178792 -0.44737233992471175936 0.47691697516532549628 -0.94427892008114422406 -0.67095129217151450174 -0.46023026175254916348 0.80069552508737817931 0.521689466893035525;-0.62655051383375215401 0.22892119129085830576 1.0062505274387014698 0.83711719513674542892 0.24450242197106858422 0.70000767700410271299 -0.13300124871470464516 0.11136111838115000938 0.079724115684723192987;1.5189244400284613867 -0.89301467301417258859 -0.035098035176204182839 -1.3722798846416501828 -1.2675443661068610535 -1.1931391019988246693 -0.17945393349131347205 0.83700547312693074353 -0.53514983163994545023;-0.64795389759920274386 -0.11069332885305308012 -0.51166935438541283343 -0.094880979911115742587 0.42092190060984369104 0.96970711056561120778 -0.67031975794601672547 -0.057745154025716727286 -0.62377446032904004802;-0.96165310326979436262 0.22792976698733397045 -0.45441834641420647545 0.24607983104173292155 1.0121986518474694883 0.80853526631622829601 -0.13182572330734587673 0.41790580816855604773 -0.52429462335348331337;-0.68735475825038039321 -0.95365045055519392925 -0.02274581994823920636 0.1882581231157422208 0.082792398826790652988 -0.16831557398025182026 0.067631218503440226897 -0.67769763520798831369 -0.48251794003819165058;0.4906944384937998449 0.17066892997151020261 0.015497414395919180408 0.60055988247650315959 0.49991912954174988482 0.083042366294292888074 0.96886312928744799944 0.86567865494540641169 -0.26509304488185347903;0.50043265980599094256 -0.51846888793043532928 -0.83652378579845376727 -0.18361342227020571727 -0.95236996946022778321 -0.88575604320754219856 0.51280991106461437656 -0.13565454820404104774 0.88574233766546928148;0.4041823613315396746 -0.38615813097557172284 0.72170164385696866649 -0.19518588556469759765 -0.043987208339125102863 -0.44116813570318230697 0.82151701270880572725 0.90356073930422264873 0.36041621830360159873];

% Layer 2
b2 = [-0.26979615241060883601;0.99257948798622275266];
LW2_1 = [0.31660912859687079246 0.0090762325337399099578 0.6606615433895832723 0.79456822718362896119 -0.22868280254057188339 -0.25272648440004347181 0.12593985139306795862 -0.16370681413407933702 0.61650857454086760434 -0.51955761928385879589 -0.38543132733644036581 0.078042417608095215886 0.27923535534850091322 -0.22636381163748495182 -0.10840391214444392021 -0.12484536220966613307 0.24246242292427744314 -0.61864558302904948395 0.014677730043756843578 -0.044831866240112885902 0.61060669786827459493 -0.11518320883338137306 0.19417460397808988803 -0.19630807473629433013 0.30596875521267036246 0.17691225711593969172 -0.15743712556850134043 0.23638614143888764252 0.18810437329827392472 0.36794533932751000149;0.14692919019950514969 0.92577641915830732877 -0.48433190784892615754 0.25511164106814177011 0.41005529452793176848 0.32472467074950556176 -1.4495411535743001341 0.94170380521765972848 -0.021854979863412969665 1.0554897938567344706 -0.037360718231542744405 -0.38910362795837238892 -1.0230502804490100299 0.73123225274035763555 0.047790566555855978903 -0.28964931302352697751 -0.17291901474146095796 0.22216674895776619691 0.52846171732184166192 -1.0561084468033392625 -0.53817141688550285128 0.26144112577080547144 -0.55931790963045580067 0.34738732629106805483 -0.24905656005201259884 0.52220650515086342036 0.54490767187618416312 -0.20374276870109719884 -1.316263978923769784 -0.7703395809583942766];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
