function [Y,Xf,Af] = nnet_2019_12_12_14_13(X,~,~)
%NNET_2019_12_12_14_13 neural network simulation function.
%
% Auto-generated by MATLAB, 12-Dec-2019 14:13:30.
% 
% [Y] = nnet_2019_12_12_14_13(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.542497945689758;-0.747325846085022;-1.01956030156107;-0.892886306155753;-1;-1];
x1_step1.gain = [0.67088951194955;0.710854432637792;0.970857459294832;1.05624823109609;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.6861427088396392371;-2.1628434715000777189;-2.5472175502090079746;1.7828474696572775837;-2.6975774412489901266;1.0377544276029642134;-2.0488654946030240289;2.2336240769141584295;-3.0825246239818824279;-3.0956863289249034743;-1.0984627914128610726;-2.9640117386754885054;-0.24192714724089151024;-0.5061254154217703638;0.89095130474170924906;0.15453853403677023093;0.38837635375254730974;-0.090680458080216977401;-2.517214324696560368;0.82865464059586846357;0.25969451485110051081;-0.29880699635847757234;-2.7632439876663723588;-1.2784525448875945219;-3.30535954905048035;-1.8220026997520530898;-2.1433607513053662963;-3.8597811435889246567;-8.1504371364278860312;-7.7685349283746356619];
IW1_1 = [-1.497349938012106918 -0.38568677672684714697 -0.2468298587668863453 -1.809628856656214646 0.354647193690254936 -0.13020753198599027689;1.7907049371104750701 0.20674565620633078566 -0.42638203366930582661 2.458588984373044628 1.3724475150322725803 0.59735982322775471598;1.3591641749685261509 -1.6153650813382265383 0.88861952033423374786 1.5913132582154254635 2.0105055456752833898 -0.45460847934280346205;-0.66898746207713366552 0.2071046262945951677 -1.6916267045903403687 -0.2902609031286634278 0.46032258216869020861 1.647735786945812908;0.59591369294794072076 1.3659373485702703821 1.7177019544392326811 1.285887486418054948 0.03833081789886091939 1.7099057985865855347;-1.0630098378056849207 -1.4185541255434830354 0.25959063486397843112 -0.21068320736518175718 -1.0173794581422428429 -0.94144472821772884341;2.5403924956969592408 0.70091814394601081872 -0.7172200146276452859 -0.15309238702579672231 -1.6388836186743760415 -0.70065792579003027818;-1.3612260809458149868 0.81464822282832327627 0.88231453775552004526 1.4636385722744791327 -0.45462383412300716445 -2.3209214102678275005;1.3082139096587495075 -2.351498466739553983 -0.38645342626721262969 0.52031141906865818747 -1.9049056980862528743 0.71242245158083139511;1.8837444344084401937 -4.7060872737439423119 0.9218574038251258207 0.99271736946599031803 3.7164106770626137433 2.4548792183987035997;1.7819199381978418906 -0.027754445137822089662 1.1625266899860238201 0.19652237584076459598 -1.4388439696642840726 2.5065839100081053203;2.0616053622316088401 -2.6476011655732580863 2.6877857897024424183 0.59991486066561960921 -0.81473474243275645357 2.6189156923811922617;0.29596994626820771757 -6.0660091659725923208 0.66583119608661323063 1.4177975022591362553 -1.8535359985076751421 -0.7191455558846878704;-1.2797541841775852411 2.5593207243969682274 0.77519266263785291393 0.020416618476111376979 -3.1269912634013579122 0.93506104037133963569;-0.7483991613626576056 0.16394538247187320779 1.1666400449908425063 -2.4209184902579634624 -0.53465501936995729615 0.9141103172318708614;1.2764750496773780153 -2.5368876718694028938 0.40515007856558798993 0.26201472776715506452 -1.2122699453319178975 1.8877267109553204083;2.1425156148624435737 0.20402880327681724437 0.85650074225010808249 -0.50109634884448772674 0.85246814734581655149 0.28924876168207591665;-0.96992069828179683366 -0.37334003290609135695 -0.57679501008033040588 -0.48373052979687425346 -1.2548447409563461274 2.0740141650831462883;-1.9425905683449649075 1.5073752850284571903 -1.3805313219743282627 1.0349890756851061191 2.0686537839831178331 1.531420951392717722;0.25850014569788165586 -0.077645989501168050095 -1.8219744346836728166 2.1173415313852963493 0.26321694718059546192 -0.17612570213605324709;-1.0646313717903692631 1.2118279303885679532 -0.62034847710816842792 -1.1724816153878612202 0.54080080290703624879 0.72137518658438659624;1.2243974027508848224 -4.9312221199371526481 2.6603129794930082674 1.4899866581513245833 -3.7714993617756440436 -2.6670823806420727031;-0.48302299060972420097 -0.98560939179994733195 1.516668856473516902 0.29875173091637863276 -2.945461184007536648 2.3820099048731435687;-0.50598514557026064153 1.167551422515599846 -1.4338995772433520415 0.10541551070619070707 -1.0301308914152114138 -0.16151951813289527893;1.7810213748525429711 -5.2160371617483081152 0.81471874138690825173 1.011854611397000836 3.6641162367815840462 2.2395141610957325362;-0.52094534171389250687 -1.1295449672525075258 2.6275919161775886934 2.1598254718943614705 1.1091826306771170874 0.38787127855423708667;-0.50725349818069453978 -0.99901046441108942719 0.30506673154135843795 0.76884254161545406703 -0.54539717308963431286 -0.9372739896747664945;-2.5958374180901380157 0.53905610084096622359 -2.1276208695454807973 -0.0088021650647764782677 -0.15664905190823813497 -0.45568156540394733067;-0.67955084757865180656 3.0295939305449883783 -0.81246840878287052146 -0.85808942510594232722 -3.3412871119604119485 7.9771199431182271411;-4.882656945115166458 2.2584180325440743609 -2.045763197797461963 -1.1171963819237606952 5.6656874389225295729 5.3076136221939007598];

% Layer 2
b2 = -0.13556292620069104737;
LW2_1 = [-1.1218969565630509955 0.37830096771370386177 -1.3118089846620846206 1.487489424117969028 1.5120165239059477624 1.8545246323813961986 -0.94610205325758733874 0.55233613332941644547 -1.792068845955075318 3.2292013593791559778 0.40047714835283909629 -0.49951664242359411494 0.63789585954675942503 -1.5702505740909837861 -0.11141062829411615964 0.91661721078687230513 0.90792204010450749951 -1.9285208748172695259 0.74733050548567603322 -0.21264712475383684698 -0.54299666233354060285 0.68188777849373616302 0.87750443251459320226 1.7050282706297656965 -3.4107914643792396348 -0.22091264557993744999 0.59627696747807756861 -1.5178111903746607236 2.2527772028267691873 0.53249254924634337183];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1;
y1_step1.xoffset = -1;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
