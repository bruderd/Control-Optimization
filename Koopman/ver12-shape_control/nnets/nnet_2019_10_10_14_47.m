function [Y,Xf,Af] = nnet_2019_10_10_14_47(X,~,~)
%NNET_2019_10_10_14_47 neural network simulation function.
%
% Auto-generated by MATLAB, 10-Oct-2019 14:47:15.
% 
% [Y] = nnet_2019_10_10_14_47(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 17xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.752636520726607;-0.892308755703675;-0.655101987217461;-0.6137187904846;-0.680376693133235;-0.587315745947842;-0.472713991795846;-0.437191755445547;-0.676909445531604;-0.688140145686785;-0.466636853050735;-0.20187840907127;-0.382088025177491;-0.654291292375359;-4.44237979735362e-11;-1;-1];
x1_step1.gain = [1.22935883373232;1.18770830574125;1.60958992701312;1.50730213738187;1.4571972443164;1.57374202481429;1.98618080274745;1.95693167634464;1.3981094822997;1.55716127485182;2.20480347031891;4.90665083964956;2.29178931091766;1.35802959874086;15432892313.5222;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.30926437396789374645;-0.64705635949246798067;0.27949999865434360657;0.68559184402111950085;-0.94624458791642562794;0.35469512351122567395;-0.5150100085544812023;-2.0377780937340612688;2.1220925568657191818;-2.6776483191096045466];
IW1_1 = [6.9398657493009192621 -0.36733263518643777257 6.9544830439768237085 3.148730630850950174 3.7854108979388323419 -3.4575775401079433813 -3.0949413819935132075 -2.3647584411792621495 -2.2505865431661535858 -4.8357312649866894816 -5.0764281956119337025 -2.188935958070740817 -4.4504072533063103734 -2.3230175464470259605 -0.14972782746349355687 -0.28317267135376272824 -0.59176320704212637125;-3.9824824312331350562 2.3900405731868716863 4.1454500088001111635 2.011397483259833141 2.6608956287418634723 3.3142733749763908513 -3.9062966474467120115 2.6313201756946398291 -3.4372489972605775321 -2.9679448552512552872 -2.813084293141764558 0.086016010547767723926 -1.978251127339637927 0.33778665260164808526 0.016579411030028599894 0.72216487326987932605 0.99146012327412069709;4.539665647744028476 -1.2509132278607653088 0.37748606395175354766 -1.2742631975584923776 0.71047435868024244598 -1.7174533730927565855 1.3612065764375151922 -1.2024985100702010321 2.4235860354063176736 0.64569562634074517682 1.9844856298676234463 0.24355591363435644126 0.90123930697908405385 0.11567417334324074651 0.73645039748175833427 0.7256658714433364965 -1.2417645927840530451;-1.5548012403063289355 -0.1971750954928538635 -1.8705530290260026227 1.2656096999327079988 -1.3428692537246402772 1.8409448007990285578 -0.17871587795293220058 1.0692281906354108578 0.30659381804240948277 2.4144095474185061079 -1.5686264554643665203 0.76444799321336298625 -0.79241139070461219518 0.72396131352667769665 -1.7010368277068310672 -0.40240757346437266984 -1.4393007819252214841;3.4961630750747629826 1.9621829961025678557 5.2435142473696192411 -0.34851325860212700736 2.7545933449462305376 -1.5285299976225896756 -3.4374017742506364215 -0.83277587466861557886 -3.1861350824032652618 -3.1710200673729018739 -0.9575169709725789291 -0.089329468426966374128 -1.1774960226870299085 0.46040813272758807084 0.16904802823786937993 0.80859442090942224013 0.97765121319068226668;-9.1221446828064181034 -11.967147336323755269 3.6734146593708363326 -3.7003692465938740064 8.3130891638549293532 3.5267311643331686888 4.1881551137722601297 3.6735551520006173298 8.532486074809609633 0.3064310011727517935 1.286682584605138846 -0.23855587273535452941 3.0234130241115337867 -5.6234427115565379651 0.41209722960764832989 1.7892531326958303062 -5.1127871324022367006;0.6557388979094641579 0.23743632269662459655 0.79641300026851391536 -0.67557977077252828746 0.51346531057663358233 -0.064070209945877434898 -1.0387248109757243331 -1.1285168007897357079 0.20559067996858138017 1.4210601928310249153 0.4649179042188383848 1.0424270448006258682 0.91669848356830196945 0.6406089852563607856 -2.1491238532971359554 -0.19356886404952763914 -0.58119807828313629905;-5.5272486785723851099 -0.10618462166782217937 -4.1319931689675604147 -0.64854901089763039579 -3.6933313735303499037 3.1961592324230432283 1.9400780281221294832 1.6325574047758282248 1.8687607377189678903 0.63035397833323814076 1.6983688314647744644 -0.30018251636829179629 2.6756788592263132109 -1.2198828388568951908 -3.4735371259535394728 -0.82047838935997008392 -1.4347324831926784316;-6.4350959728298295914 -0.82367919562257685406 -2.3804197468466670173 -4.8758988801513396538 1.7672488447986882676 5.0402003129565207118 0.89267624480416818411 3.996868247734612023 1.4621966611836487715 4.895927300175141994 4.3405506501464783398 1.9551949717501022619 3.7056313562164979736 0.32463077259269934594 -0.67495885005445066529 0.86422705388732856679 2.1857510101934707336;-2.2890341229088146946 7.0261356335797264805 2.848183575990954175 1.2168852569750798764 3.6657777755845009082 4.7351400387490194532 -2.7876454023951566796 4.7952602277282689869 -5.2537541786631480889 -2.5202378827356080038 -0.47826569350208048004 -1.6028401920833432737 -1.447039296071039427 -1.6337867171630775509 -2.4282500135813269715 -0.39440914580175046034 -0.38978584990998405013];

% Layer 2
b2 = [-0.48451202239560825502;-0.061344553289255657202;0.35241864901856406744];
LW2_1 = [-0.25908206720660159617 0.047797477468365115461 0.44372189434927916674 1.1292279275175161057 1.0512449692274679069 -0.034315939872882367245 -0.95928417620995087844 0.64995624321562284198 0.7767229269621245269 -0.38115750084373783979;-0.34746576130407197391 -0.75203410236174983439 -0.43790201658910266058 0.40377359470389950769 0.80613629078585569143 0.20633050411928077761 -0.11495327891247036911 -0.060674456132330994995 0.11679027548994685981 0.22795739824468330692;-0.15312788455680315103 -0.51680976045939486241 -0.42702768961400466852 -0.12167764969832334243 0.3667423423813083172 0.26337061385871918251 0.14899718699452643711 -0.089069681043886572702 -0.15794161013338725574 0.3058942850386777712];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
