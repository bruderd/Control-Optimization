function [Y,Xf,Af] = nnet_2019_12_08_15_52(X,~,~)
%NNET_2019_12_08_15_52 neural network simulation function.
%
% Auto-generated by MATLAB, 08-Dec-2019 15:52:30.
% 
% [Y] = nnet_2019_12_08_15_52(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.81808204132207;-2.13420302251424;-1.42241350176714;-1.56272631163824;-1;-1;-1;-1];
x1_step1.gain = [0.454308417452074;0.46815783082904;0.743048295617597;0.815373063831932;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.7484836694116530076;-2.7293893456115143614;1.7936989129324978354;-2.0184228815843021643;-2.3104288454077841486;-0.93972848592354740749;0.70246237822280255259;-1.1084691179788348503;-1.6289964686764748514;0.77992205086552457427;0.20719633509425691709;-0.1093007388971312388;-0.33007942754981833833;-0.032910943964231102743;-0.69633382909696039942;-0.068277735077337767255;0.1012164425513178978;-0.61893329113568229527;0.66276120953502926092;0.47136457221984212618;-0.97589092469689631137;1.4814510943997583059;-1.1220192019152124274;-1.4861367797033671057;0.79200460700626218458;-2.3911820580648264212;-2.3079580701753878991;-1.9497777277882757385;1.8575269149657163137;-2.2172552421070319539];
IW1_1 = [1.1572761171518961554 -1.3050630051378293572 0.33978781922872980381 0.43103676419343123216 0.73075476256167759548 0.73486080942741893729 0.57349052283401324992 -1.1104655362813662389;0.62208284067568864195 -0.36080307345866530211 -0.49381062447680262872 -1.2508994394467860545 1.5084759847370916575 0.32005626886261673292 -0.24331773094530739776 0.57545289179463576801;-1.0389047081743445489 -1.2602797480520053774 -0.20979059948245104561 -1.3589339246235208059 -0.60834067500106225879 -0.39222991013241370606 1.2626208203689532894 -0.23724430606445645608;-0.52234476794060036298 0.66040546738825312012 0.53077298603377287556 0.98964133161026646146 -0.22653546141162439476 1.0091712313111378396 0.62198316250194651822 -0.88253681566792141489;-0.36354957574764656947 0.067039028888994489641 -0.34447554196912277824 -0.87731779411560317783 0.57066546183484445631 -1.4287225241293037836 1.0335889995510347816 -1.4490314156316186356;0.56818966379317148441 -1.2296889646366917503 -0.22645222961722227817 0.34742321673601672671 -0.32415786118343570266 1.3758667165889688633 -1.107246658211164192 1.4870691321109501537;-0.64598500045462825536 1.1762953182309499045 0.30878569511886566623 -0.71387389543992962881 -0.31136090460795695645 -0.0053647513166025402598 0.81327987177885352477 -0.49630543921833669696;0.945980690067146468 -1.5832216941251664455 1.4621766947593552999 -0.080579528971830696737 0.98080531715450069985 0.35803302568912759307 -0.97769221984747367582 -0.46680425212477638652;0.56530606359683011064 0.67724760535547845475 1.4178852508855430692 -0.50570805073594027323 1.5450441941373214139 0.32772730040924752393 2.0828121651641366974 -0.2854608733381925334;0.47445704042755176832 -1.1276136510507226429 -0.50392621107190793683 -1.5468421821049544995 -1.3427886750196509347 -0.56032698972822625461 0.21098769503184275353 0.0010346693053802302146;-0.82691171411927422152 0.39903870274352215564 1.2977453994258401071 0.11699827315047449383 -0.6976056314792019597 -0.5579733235232300359 -0.49566167456524584667 -0.93617619261006301823;-0.39425404073898034918 -0.77190514115547226304 -0.94946795750322965368 -0.83557667942872193567 -1.3198353655675096885 -1.2330456580790705168 0.2021084563861522132 0.064018724689794442861;-0.083942399455726041113 0.32241586929311361054 -0.96586529696763356867 1.0304611380172581381 -0.93605747341470468825 0.57382840773843557525 1.1764067659237107399 1.2507335356724162967;0.47306914968127472543 0.25407591283380953628 0.25169089686396250993 0.77098668762354216621 -0.017225551753493759111 -0.20258081264779001507 0.83716004511211727923 1.0423064881498365075;1.4389348746535450818 -0.26274288825848524098 0.13857003017793745325 1.1280129483320047168 -1.442935094980663191 1.3791533500458177386 -0.80848888733240720228 0.24590243749004647711;-0.29702299431632883664 -0.52362720607122625882 1.1243754925554927393 -0.029644575623199546921 0.90593902875491083559 -1.3515811661184733428 0.3657506675784590322 0.18639402571029944911;0.5624786336963145672 0.5209147717020784496 0.67627327989025043387 -0.76278611734415224799 -0.16081055254266618526 -0.74424326886763769728 0.49900380861429016743 -0.61464435604037015448;-1.0621302855573095947 -0.53474864583030778942 -0.50999373318049023851 -1.3394552857728247997 -0.8028325702752261428 -0.45639213193840794114 0.71640620897405815626 1.6131331019264019133;-1.562393520234823141 -0.15380826236202493895 -0.25840767008820986206 -1.4429324070970130922 0.78026095366965531053 -0.21870191496604043935 1.4606644564257500463 -1.1160302249836786537;1.5104338998734920807 -0.34323364637144115896 0.64478430887125881554 -1.9802426562951371825 -0.6700816252089082381 1.9007300799222568433 -1.5695280772058639585 1.5647712389750687567;-1.5172056501428727859 2.5024801128599341027 -0.83501277383442784608 2.5971394052728884461 0.28082261986433654233 -0.85198561178350096235 0.10610771206131650035 -0.93450090254480089325;1.2780538245182084811 -4.2458873469565219239 0.97753840615783105239 -1.4110044302930744298 -0.51167873616981152107 0.95187079296011112284 -1.5091603948666776347 1.0490603244065046518;-0.91671810030184608387 0.46037107066520355225 0.49863104036627120541 -0.23023401994781969582 1.0756149727418711226 -1.2131916775399116393 1.7528231256582460507 -1.1140667913006014889;-0.009720733914643793494 0.53729092099552311357 -0.28204014069445787483 -0.5552400302098506879 0.13657067030489036807 -0.97892605622402184551 1.3127679836973902283 -1.5650594405218183347;1.3972608651202753638 0.61459119193338151987 0.22289272583049846155 -0.6582814861234045356 -0.78215051727793394321 0.26235884568157069596 0.17966307761063704529 -0.19102392837547479965;-0.018185123353564137255 -1.7497484279339690083 0.079064614061361171427 -0.5237455469297227495 0.89895770568394006705 -0.95732898959856804755 -0.71268966749418793949 -0.894704146318905158;-1.5718508765645997638 -1.8982507990123691499 -1.0927276423382366044 0.12496117249062027588 0.70264324836799152418 0.073805775671397177984 0.80364859831478052676 1.062813021237163591;0.73202538793942073525 2.828456017850961679 -2.4473562052168142955 -1.4627642441812334084 1.7279778376874561641 0.75971130016575127986 1.6775483669931530173 0.65404188119525208389;0.55882027293366898224 0.43113879848448727339 -0.13970524526657437936 -2.1346391428028148596 -0.95547785156712106147 0.21610931303918878843 -0.54123027768094411627 0.78923989798475946422;0.36574377190242229885 -1.1273205350285966375 1.1458812399165252405 -1.8061542022680736608 0.31993393587114821175 -0.20431967871460876562 0.06834765957392426039 -1.9107387445169714546];

% Layer 2
b2 = -0.084714500697526853856;
LW2_1 = [0.97062755327927641158 0.67965935542385524926 -0.31793195964604059611 -0.74350588483794310957 1.3509233620172402812 0.47560467274903983625 0.4929828437220585835 -0.43357713353718208005 -0.34836038204305908028 0.36641494553447628846 0.25089736055957456706 0.93501700718357683151 -0.81124981333272194739 1.979881830181903668 -1.3261678185045562284 0.40081199570178677183 -0.85003886096225611535 -0.19331767822970519211 -1.0132053010371988577 -0.076245975873016361146 -0.14097203412109846066 -0.15940561452911578 0.22118056612293268692 -1.0997804075840167393 -0.3701175347776314295 -1.1674040127965301661 -0.13043663086029175235 -0.12087956579235839549 0.18522880137895544883 0.47338075743461133227];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1;
y1_step1.xoffset = -1;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
