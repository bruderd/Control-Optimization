function [Y,Xf,Af] = nnet_2019_10_22_19_42(X,~,~)
%NNET_2019_10_22_19_42 neural network simulation function.
%
% Auto-generated by MATLAB, 22-Oct-2019 19:42:21.
% 
% [Y] = nnet_2019_10_22_19_42(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 22xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.68923562185917;-2.55976352764815;-1.66744595493019;-1.41306720234763;-1.72853430470702;-1.68470124822749;-1.54419012603737;-1.19832180182087;-0.920880750180581;-1.33378768429983;-0.903705148758009;-0.769375356764508;-0.921590452260902;-0.517525552348087;-1;-1;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.444678794681692;0.407242452141652;0.618934520080224;0.719788700875025;0.575604345071666;0.566071618910878;0.7594132340494;0.84999063747477;0.721977894496726;0.767034792829403;0.984427608258322;1.50655381729089;1.08895222470763;2.05283111042465;1;1;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.99112891084609466841;1.4225755097712027286;-2.0322041982237206703;1.5028928823041514118;-2.7317845638231470495;5.5468320205549268564;0.97267748479527915695;1.1539250876168372084;-0.95109681849790073116;0.81388610289455931568;0.4905191590189753037;-0.016897187365441424661;-0.92329806867420127769;-0.70026913590327122261;1.9856543532614545633;0.75830613867547724816;-1.2129909121194251131;1.2813352050596900078;-1.4108394478622587886;-1.4121285703842305637;-0.72550191189388701929;-0.93481849102297964738;-0.81079056932911575117;0.79021290147031730822;0.74371808712701870103;0.13141041858103724715;-1.4698324734688335003;0.56288029430562491751;-2.1082325146273213079;0.89796032824266358574];
IW1_1 = [-0.37548390707200907102 0.14265425589414126861 -0.25576815059905655403 -0.28653039654278761317 -0.39872631510669270805 0.19472065302282454136 -0.29620035421370166651 -0.047408153244968616324 0.042832290704423875427 -0.11146906753660813794 -0.2958374697318705282 0.017359013769989287135 -0.0076066456678759311952 0.034238183414639994373 0.079506938673530883066 -0.10562968062213827503 0.21378026476334521799 0.46720842969280901302 -0.47812179220611739083 -0.31831727683117777561 -0.31645967556050780267 -0.38283952171966101341;-0.28486744291289955999 -0.071325501164736848647 0.416530993325811838 0.19381764963638858923 0.30256837203039649298 -0.12024114492381067498 -0.18278418376296065584 0.22536019621587172201 0.27128723196008758256 -0.60034087261716040373 -0.16259123281717535736 -0.06466459856743042578 -0.035272588656963740905 -0.11894897763321626849 1.1804940031083472896 -0.64318826880742274721 -0.19608899390928355433 0.038872872437366132181 -0.48271648464593558403 0.37968909139854573054 0.15408187261814601521 -0.13777840818959527502;0.26759363310754469278 0.44662677020401314598 -0.11439588352169217933 0.94631763112973787955 0.038735477842784554747 -0.015649420743366938141 -0.29646193360268563444 0.32499303546606833626 0.27754722509832402411 -0.19229747088942017452 0.12223832027142937651 -0.2192674187929028462 0.047330303814801855111 0.21363683101367661465 -1.1329965196556350815 -0.42173179622982126524 0.93762544443061890398 -0.74067108649731361325 0.85242134963132654146 -0.59609566105109446088 -0.3051830329664702024 0.19063620667506839257;0.1232432609367012516 0.47617432628232114755 0.2221656653368501988 0.047814971778769553568 -0.12672885828328683822 0.11930074617658838199 0.029871569422616071204 0.029230531145407988303 0.10569369398047162578 -0.061660505803262946611 0.15277379556469408706 -0.14454010831633556933 0.079004236493219873183 0.015889209011205530919 -0.47299243859261447254 0.25641983387942812733 0.71015394506019757781 -0.20514797430758824337 0.44931038054262273373 -0.49633406726465378878 0.97544228632413809699 -0.40265011337123773894;0.28057430695419172118 0.25296790942405406044 -0.0016789149435301972159 -0.4759912745899584352 0.085871550049539321914 0.30320578007266790754 -0.073839236569719760017 -0.67375722955944061798 0.46509205740275877394 0.046310213009558127972 -0.13199318905456949858 -0.084578205443171530775 0.054451150117765058367 -0.012072333860920369045 -0.073570754016133221853 0.98519872365566063532 0.25720329026847993381 0.85621222027116961062 0.64732033329011029466 0.31145281066464491904 -0.20738324845833580601 -0.12426464893614487528;-0.85900923075795221351 -0.90480587423458835872 1.9919226607461626433 -0.60414446154080114759 1.2815494615548446156 -0.65837121804907905442 0.20033582240112288164 -0.42241183874234766726 0.31958912432247260638 -1.3292924810538446767 -0.24814626150620966438 0.0082896140588719479519 -0.2271836952567970469 -0.062400615586731371376 1.5553596214760008198 4.5215561162582655896 -0.359202667450705726 0.04060772595342736907 0.4015183172568381198 -0.30525716585495488165 -0.11935805763457152384 -0.051538350881877088849;0.31495197204042213457 0.54899590673260512119 0.045121369865124300036 0.28199976069307075566 0.61185282993885325986 0.57107838699870061561 0.81319437582525810893 -0.25614340695400361625 0.022476519841058421184 -0.28333760293297516331 0.057632521788665305729 0.25425702582875225888 -0.051063902449855813614 0.25680502503001501058 -0.4777372419438135065 -1.2020831740247326369 0.60962165909047072443 1.6504096887359807067 0.66066775586569104206 1.4085996988809166286 0.30721473030878793109 0.9683767204908707571;0.63851533985457498144 0.66581534167713007921 0.37520965477998008408 0.66426625624207746856 0.94601269988982972237 0.44549773969120637362 1.7798031219614587339 -0.58437696969119412582 -0.12968644276449303732 -0.53358322040240879769 -0.037411307489143619254 0.39752846659176416244 -0.099832575958290245555 0.62422958717753684876 -1.2704721997035763881 -2.0831743370344701916 2.0978310916498439376 2.8680496189656263795 0.96438906803015134184 2.3576317745724599817 0.15375400091485408316 1.7880367933882301834;-0.38133100243533435414 0.24930349010279423405 -0.066195633429503145106 -0.21169953067038052574 -0.39267485393517764791 0.29418647671372871732 -0.43895797553416970871 0.32903326974926799808 -0.16096905002416050934 -0.056422193839231277179 0.020065852174313766887 -0.032847631239924381108 -0.22912887807157816811 -0.20296003181080105038 0.76930413810069508962 0.60484315399176735717 -1.3945778815511939985 -0.53694822712685419397 -0.11846543603545885148 -0.95371532892851829111 0.31528768320460220931 -1.0092356281023922016;-0.40660955865690717737 -0.88571973961077510307 -0.055368359649241360998 -0.35509003823474644124 -0.52730373058144930365 -0.71770389603213846641 -0.26790838717770132371 -0.041709308963803072567 -0.01162887241841258773 -0.19502229725838310381 -0.54821727328493063958 0.008774569283717403162 -0.21684368323453262484 0.0044099372149670598361 1.2571170319762035028 0.17678148129904183716 -1.4016890448172041328 -0.59867374950261176281 -1.656317507072454065 0.54151513484118918296 -0.92275613807201084526 -0.15718471205279788139;0.38708893834324648031 -0.098679485897283578111 -0.23760627833821248989 -0.70415538503412189453 -0.19485952859115554525 0.13356325912484295904 0.053129157629905998661 -0.47612056477794978404 0.0038377515585852374491 0.31821979049059373468 0.086893137811056730957 -0.010092329313829763102 -0.026279668598476607633 0.13114981511102333234 -0.49277121282894753573 -0.64301337486469767324 0.069520160859166832412 0.14790740139152813715 -0.16280719069158655632 -0.14473457146650781091 0.054718048935164222135 0.048786612878240834257;0.26006585986405900135 -0.0021815118498800713936 -0.050563874756451923642 -0.46790717884945925986 -0.0078666790040291430242 0.15342772678671506847 -0.091570877469386982583 -0.24514101546820610267 0.14075387285097526457 -0.0087914184110840440378 0.035273969043524200373 0.083131611346329695178 0.023704651302469337965 0.13673925270804485055 -0.52613165486833002316 -0.11031656704186466877 0.41556959353201106122 0.40171323908785894208 -0.44728720385285758443 0.026364448780747312684 0.14124949425710128792 -0.016559548601477756813;0.33259086222613171158 0.27619825309295226168 -0.51689014881590822359 1.0518627646258209563 -0.10618277681327048523 0.69438374952482273539 0.20669990211158550952 1.2540137399457815803 0.2162604809399831518 0.30022321668729756716 0.73054393636777603671 -0.035607209688683201521 0.23963082699714424728 0.85344052677464954382 0.74837499468562318494 -1.2228266657340414181 2.3405412114441586091 2.0934948096573635645 1.215327758707548611 1.1926349638362252481 -0.50300436946104920555 -0.47233595609372591717;0.2478733384622021918 0.096833450033133636192 0.049422706550261909231 -0.082649793502108853671 0.18123894313841437675 0.026696521366863765895 0.073518780309199990852 -0.16287800386370385186 0.137613827635860414 -0.066298362401438312719 -0.10160108679018915734 0.19475092527274998067 0.018551191587926826876 -0.08070407999060617843 0.36547066426610264056 -0.25263809440800866213 -0.68844242733131444378 0.26873518621576475418 0.017895806123024399908 0.47948165768208417248 0.0011458186947591658331 -0.19087554540354045862;-2.5579056487937195108 -0.68373616301996731348 0.92978546616733015462 -2.8573649910505753979 0.61651810366542247888 0.59923759296789336215 0.57042398022262341684 -3.0172410303637722251 0.46224735329096194869 0.48028390093484185641 -0.97383275889840548167 1.8003126455124813798 -0.33592133967501941472 -1.2421445497838654592 -1.2019879735052969583 0.53983858097212411575 0.054916817986423470399 3.6781079812160979436 -0.36778282597165784518 2.3999101154533435398 0.26748835926732422719 -0.72411556206490812482;-0.38420180900080957986 -0.81462138232805392235 -0.018290807976369800186 -0.39634051961343830239 -0.50781448712454679839 -0.77102507267326925167 -0.27479447672035167693 -0.062224067635852017832 -0.040783604082986417427 -0.21317928479615588788 -0.55281013465364614579 0.036703356673799744647 -0.25820785837216803094 0.011209373957726165641 1.2840425836615660948 0.098038873437846757453 -1.5358559912797293823 0.10543055103515378002 -1.5042937082862537501 -0.2611197551450690213 -1.0370345406321994641 0.011772157340691799532;0.42459377462261127523 0.07644765560895326606 -0.45392242638613233829 -0.1508684371979630845 -0.27206880170828384724 0.080154982028319540777 0.13416680238755424037 -0.18029836707508589688 -0.22633909169141225304 0.53575837004581294831 0.20940662273223498158 0.046976156360440654569 0.025031436654063501934 0.11475837937878838324 -1.0405750587161290976 0.33700094823375814634 0.43195169907137120902 -0.45829491139258538013 -0.11158697034031826723 0.50354258806829144124 0.040503645359381813817 -0.16942304184335896244;-0.7160403911495479834 -0.73267443164912948728 -0.58784215767260517005 -1.0287462552077113465 -0.46867241704838374927 0.082065467260154456586 0.95653685272504584969 -0.69970586358186315223 -1.332012410732310137 1.314834610560990491 0.079239255179626891246 0.98802911455081399161 -0.29415165902484480265 -0.75205471573884730141 0.10153175474994598215 0.17159454140120064536 -0.42518071804237228539 3.5020035984732467149 0.31340975516121227784 1.7097922257003506097 -0.044412591785282042045 -0.58076078273463982438;0.64157735101216584184 0.67713258808494491969 0.68684913920576751156 0.97492135594002082843 0.47488277802421491325 -0.13283076040433319798 -0.96873076657266521394 0.72820948365752224962 1.3051732227440029366 -1.4139574632217362105 -0.078690818697906395052 -0.9606330049453956077 0.29548997205959259826 0.7529158430547366887 0.16476170046499485911 -0.15677623728756351351 0.12522923096074708993 -3.4784635221444140107 -0.39924815359255722003 -2.0080562381841926545 0.075231335904515500568 0.67928368338089306633;0.94259578531868359885 0.024225541151840303961 -0.094260796414439171342 -1.0084522069217440876 0.37218306002555429091 0.28517400688501476358 -0.071126376019374201731 -0.52443997694218191796 0.39953394326497942979 -0.34484367391741427289 -0.25808634437073180168 0.68770284364270217736 -0.036977351539743720521 0.18648492998312796165 0.24092270193798928646 0.24979680033539802819 -1.7385531817230588381 0.6416860686814764847 -1.1840237723959601279 0.34997605594316305577 0.35192268352590072578 -0.088520163131530799072;-0.25254560124528235843 -0.85918497787958914014 -0.22129978049889498237 -0.24167958515557882992 0.68103403574393639452 -0.69610263293538854334 0.33261408731345820655 -0.37788857018753885253 -0.31473317903294728559 0.2681642113072923439 -0.14352369924243701949 0.40105803511393439686 -0.19459963925665743623 -0.16109143159916339272 1.1757343701726705731 -0.77786127755233769321 -1.5293224848209436839 1.3830627852105590314 -1.0962185153257983927 0.53111047209945239089 -0.87044511302147964393 1.0942578720246864954;0.33225235180635320775 0.21946157407365396441 -0.22821692251851813382 0.02048816948827971926 -0.043915102811923803494 0.047291852410673983209 -0.069030591027356633105 -0.14924262171262600574 0.086317054197189380105 0.11372670472455548296 0.047178699111057272042 -0.057693018999231487909 0.017038205063757291824 0.017291363164310593475 -0.67715223933722079597 -0.4023655981034190976 0.14939334797193831728 0.40371156201116675799 0.63080470970089819183 0.13664786253383343073 -0.21640881169326411926 -0.05704252575522265889;0.80420711541267830835 0.13527548893130519891 -0.0034259438884444871204 -1.3522559515364807048 0.32882418448939210176 0.12302873834195439395 -0.12606407282088555322 -1.1990448128375577053 0.3865914381076426265 0.17102384277522231226 0.0068129719599601843913 0.60171780089278692483 -0.022553723937876600514 0.045128974387343756547 -0.26454804003972409721 1.1233013031723537711 -2.1266803418284396798 -0.36896651817563569375 -1.6932984457930906341 -0.66220203255494425321 0.51068315410655384934 0.25044568487032004001;0.22834193942256819643 -0.26092643886314226265 0.012240735298916557289 -0.29861437733515189263 0.059140006490525247329 -0.022751749289565696005 -0.077790209257624018391 -0.16099708361044978711 0.15811482908193486008 -0.10383979324740572059 0.040487814950226103106 0.20815292276684896344 0.074696221908941873302 0.03280831116109372142 -0.32282906505642355866 0.13733077077173641567 -0.3103866233511828332 -0.19879613587800906704 -0.094628031949445384763 -0.20091217083987691905 0.024657131991379706293 0.071818253905943624238;0.27654837497961248793 0.9230890078176077207 0.21062558886087262566 0.2025559017636768544 -0.77267684234625566564 0.79846185695629712242 -0.31494706728596200129 0.4096354589716492689 0.3157581291578537841 -0.2740835060206515128 0.14655820337606792481 -0.43673278148494604212 0.16876259963736062186 0.17911807326296066978 -1.17068285604236344 0.85019355553215880672 1.2718331361384547229 -1.3759582924072661925 1.4586777935847083931 -0.8476351247028057756 0.83959178946034240809 -0.97208621069757839006;-0.013714634497991304296 -0.22169457472006884324 0.10567322088502632826 -0.51195127657960959322 -0.04434969006915982781 0.082102545727752482274 -0.10961779123441972583 -0.21227859108611549233 0.1211557149706920522 -0.053136444089804696356 0.045146176844214562507 -0.0061016645887248220637 0.014566384176211396098 0.18221296999377503689 -0.31160288647903361392 0.2014366116601938872 0.0076242015447236279047 -0.42436026070599980331 -0.07974764336180052704 0.096043931707609456194 0.013026014748507955959 -0.018222458593862282672;0.14779732873451337238 -0.045895294132729226588 -0.064519807516990490548 -0.22737022119543687237 -0.030979358938829304471 0.022834314839084140364 -0.050371327047621448914 -0.18937238247439347472 0.10781740877533471656 -0.0048556145299678702201 -0.011705328226487343724 -0.028612290794911048736 -0.019364536290389047779 0.030573844979149524675 0.19061328159142829075 -0.77341076048091050854 0.24815378367793552994 -0.37956500033870910205 -0.29223263105151403574 0.57788030286587899198 0.10094338863522125949 -0.19235006719743488746;0.32974498433885729431 0.17986556566706504712 -0.34963065704939794154 0.10071075325339982898 -0.084134036366584341593 0.076031516882334296281 -0.078495944594860020405 0.16378101043270984483 -0.13706457650295905681 0.112512783814642775 0.18074039305099137698 0.18989793731266801924 0.01754940286557972462 -0.054952471021086815584 -0.86783423476370369354 -0.30075453587189637794 0.538666763952080907 0.053444923397735745463 0.33650389368168931448 0.94033402353350048486 -0.11179313355255143803 -0.35583295424426147902;-0.040366926687291693199 -0.38377648617619108951 -0.15335298573123581911 -0.19684517696011211152 0.36625586293759604395 0.079521059044009065331 0.12827387029532236196 -0.064156798033682710392 -0.12736683247011162945 0.10107834279484985418 -0.17336774335212903897 0.19317819222885637687 -0.20292719752193996707 -0.0033382232794220696552 0.76304884311771625782 -0.42482434932689322471 -0.9141663263861389277 0.58730972756554944425 -1.0070930824912438517 0.49461660624674813613 -1.0320634298441548893 0.61703525293519723149;0.28751032480092814092 -0.2165459745390195534 0.052825149710232680023 0.23140273634657593238 0.33928674437136641107 -0.22220900708855223504 0.3280010997319267041 -0.24779429749182366183 0.15942019037505966716 0.032475527662252444416 0.0084888858647461616636 0.029094230325386525454 0.18237021201854716757 0.14121413514501704456 -0.58570832066798450555 -0.52804975061582426488 0.80941508690027030859 0.59925127703805713963 0.44575691390225774535 0.69229634210867951882 -0.31443910055139334681 0.89495192067927975543];

% Layer 2
b2 = [-1.8936547188311658729;9.847823761897602779;-20.024710568159754587];
LW2_1 = [0.037142020177181440943 3.4840142476839628394 -0.094810525661899000549 0.058309434525590099485 -0.64216125660446976564 9.5874544404833823563 0.002943921134811086724 0.0011482667971673635871 -0.01320728304311992625 -0.0011071636290068602535 -1.9968863526832887345 1.1865479359003716642 0.0022574654544351788893 -0.35821950309197392315 0.010541929300710005737 -0.0077936612743760777522 5.7660506122245926974 -0.078704126355189252262 -0.07516973090462326923 0.00026258171781716829361 0.027412955783992214165 -1.4955932080086258296 0.00039610460630428953079 -0.032646917512662763927 0.022671936265241224989 -0.56155751034294476565 8.3100208704514066937 -0.34205721428609264789 0.030153046089204705443 -0.01118208868010600078;-0.060929249044863270646 -6.4838827398956766501 -3.9244919511564368975 0.22141676432597065527 7.0103355834612894881 0.2088886485478911037 -0.012570181668024061131 0.013331048258233058057 0.11843024062672578844 -0.14682383429608122927 0.89670393539421977547 -12.97276745301375378 -0.50341376248440783403 7.6600644179795462918 -0.43716194901472793521 0.15036251414625353973 -7.3278395333280581525 3.3534493096797910461 3.40426968468752289 0.96076243527132276778 -0.029517116584001100443 11.095546518560531979 -0.90560217384286478826 -4.457182063405321415 -0.069553166875796851309 12.716214800575270871 -4.6382470042031513913 4.4886184669862796426 0.20709149400120308027 0.13820432069967064637;2.8300764136003491167 3.0951558703584147736 0.36622930268124054276 6.1552551947476743521 -4.7288720616082766668 -2.9664223854801856639 -1.6536348674588128294 0.68787113265481281132 6.2648938339958366583 -4.6798675699630019054 1.180452338753357866 7.5985350528849968654 -0.033697978860671155832 -7.2054236877403861072 -0.033721988128064220303 4.3585231478734964838 2.2390027459338077698 -0.042056538242965353647 -0.016959030949684462952 -0.37873175464874703211 6.149912054806583761 -8.1898825355511029045 0.013735488900919872249 5.2583639784705171749 5.5357015597153669262 -9.7860355670032390663 -3.6404802051168179133 -2.6333796811465188803 3.9486460481698699709 9.2044107806809591921];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
