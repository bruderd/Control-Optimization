function [Y,Xf,Af] = nnet_2020_03_05_15_23(X,~,~)
%NNET_2020_03_05_15_23 neural network simulation function.
%
% Auto-generated by MATLAB, 05-Mar-2020 15:23:46.
% 
% [Y] = nnet_2020_03_05_15_23(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-4.99970851354523;-4.27361217261165;-0.460376781990431;-1.616587977588;-2.41567308431356;-1.67006593266684;-0.839414411423474;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.282668846499354;0.21922226236697;0.793834648063492;0.475886354270741;0.489888999341351;0.558432297589356;1.12810521657885;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.8195171521297197614;-0.83514918376198998828;-0.40230126121538001271;1.5079433819169352216;2.2101336695192106419;1.1935461386538281925;2.285064669063682441;-0.7509631014751342315;-0.33047003590733364797;0.34520102166933230858;0.2899295857023706513;-0.091350287205392788348;1.1409772588737294718;0.35075529771946267754;-0.020144765479610918929;-0.17916867979304396119;0.50724305154892812553;1.3079745875626447305;-0.63119754502499503257;1.233197288691517457;0.22061862820631283899;0.06127704163410718774;-0.99121598623563678121;0.030500796203415281305;0.78083902702541208019;-1.5281415418799972894;0.92187402769017690041;2.8659532578156072802;2.2071605276859349587;-0.5244628093888966669];
IW1_1 = [-0.32421214449510299405 2.3016785758002451523 1.7233809069182806084 0.81504695000565852148 -0.9271113769345520339 -0.63736968764400225851 0.87923349221380719953 0.18515591978366099934 -1.9782226637511719503 1.5543747615999825573 2.146487302671927111 -1.6629210844719362061 -1.566252944392085622;-0.25255332388014789524 -0.039188747070330945399 0.32606003637460939659 0.018817641652675139163 0.54615831533479886062 -0.080399887425987678902 -0.24940919405538233833 -1.3790462879876645985 -1.340746391555571515 -0.24387005010860007825 -0.11832559995948987996 -0.24133852957525808725 -0.61817598260922634879;0.25394943737886532809 0.25913427501493846439 -0.1361057569304779391 -0.58755157996650231311 0.31834213312375908567 -0.047885471155476283522 0.27402985334964269359 0.50211154033068383651 0.21419412297886705754 -0.21545244560656079402 0.099057857655451123091 1.0016258426852535646 0.51829227895709129026;1.0228033182617923824 0.41231270045492285359 0.21952734626630643344 -0.61831263368789013413 0.49821752276733061171 0.24007874759384989494 0.022576163844572515876 -0.33019634692668520248 -1.2887892551317143841 -1.471269716726895771 -1.42153927784710854 0.81551344237116618618 1.9857982311224238181;-0.18610695499297896793 0.21759026954599586245 -0.81421462025596780254 -0.58399748121168171267 0.0030884400130162074916 -0.2240310996537383248 0.11264904599398446738 -3.710676175401303567 0.083462769055880847713 2.3887100809563484027 -0.88028315935985268492 1.4939050238967603867 2.6914275650816223973;-0.92474522247298507338 1.4200348286981356871 -0.096051769352586371942 -1.8948857630825837184 0.15205539320526756386 0.91250038621180862286 0.89447395810776009206 -0.90233255964109859715 -0.35714473366902205198 -0.22057765961319902859 -0.88486232616815818641 -1.5521819586426730542 0.2412196067310776737;-0.69445898892324309237 -0.38436928650929080842 -0.013662261351698701609 -0.41502985022146060556 0.26227414819144700964 0.31717220719698585585 0.15723044162541130464 0.09718169874779669648 0.64963993176134604557 -0.83358846203097780592 -0.52931652280074714678 1.9511458350257431249 2.6925165762162337479;1.8441298440631932465 1.6463155645534277571 0.53170679112425855983 -0.12610433014783084538 0.063054235860358395782 0.4224742245043450195 0.14732102671489655243 1.8022030792472036875 3.8350684483355035326 1.8477388332601671905 -0.13458945732343144397 -0.15779542532229201557 0.24524769089934744803;1.713840099779620374 1.2060888504226432438 0.50673336052322370815 -0.35730322470038422544 2.0147620967440795781 -0.16552975736893182912 -0.066334516429563700202 1.7460458162572991547 1.0443012893854899392 1.9433378805154857272 0.854643643650857876 0.29339167317748732211 0.70942254871679488737;0.89872739756365893626 -0.39309663295983415798 0.12743965743764917864 0.15791399149498364096 -0.17208802948494789087 0.21078195277945133146 -0.39595158642658895287 0.32779898171261451223 -1.7585360991058305302 -2.0102336988830518116 -0.4198827929295145811 -1.409880086566542623 -1.0507960977038661721;-0.48223713981520044403 0.25013335954178289589 0.2171070469396159941 0.12884556732134733181 -0.21494013054411836849 -0.1331764677508986694 -0.039012890255881990664 0.48275462344760611266 1.7146388355959565342 0.57061073298337572357 -0.19677923451568674063 -0.52279433088803706209 -0.048419864168249879266;1.2651920682545421126 1.4099474764971635654 0.13980380963272218131 -0.03205833689030838235 0.3158795729213721426 -0.41008314207071205892 0.12189678895193561958 1.3888273664757464498 2.3980668795454151976 1.0965631425296098467 -0.058789860223341913747 -0.79910993597558810375 0.090505267535145317304;-1.0572744911529543543 1.0174311941055387276 -0.13377815792880015655 -1.7857639879492597235 0.21950293800990774984 0.87321255036987266429 0.7912247131157500446 -0.5851024611289582511 -0.22917336479427044549 -0.066702535744999527645 -0.16843375336437907408 -0.53830237778234690804 0.80929819856361406849;0.36392973295952596446 0.72176464933654504996 0.23970840425428055487 -0.13873405765231386355 -0.41308361164795748266 0.050896316101630832696 0.17869588150736598342 -0.914859098950152827 1.0089839656777259691 -0.30710988399717553676 -0.83677806640551766204 -1.19511457884049066 -1.4479691290720855257;-0.56097127681628100593 -0.2982622169866258055 0.073408710505702606808 0.2538199891770868688 -0.010868875810485931904 -0.35537641605348219143 -0.48966006809557471868 -0.95523517828310688937 -0.56965847681209358377 -0.33698355001000224185 0.53554305406367153086 -1.4337267216673816872 -0.44300024840122059766;-0.71365789152115410854 0.28141049888678681956 -0.21241950578371510128 0.12208037694485709967 -0.0077673272407448425494 -0.2521572740296231796 0.19517844417227359077 -1.004229683969512843 1.1096142659118397589 2.0627027202123624505 0.49578165048801564607 0.6819392141541752439 0.3675999615867756587;-0.12923990250237282762 -2.0064593845140104023 0.91592858704507640333 0.13552594784282609441 0.44811230654429462517 0.4066450783462743912 -0.22760016876651736895 -0.47344697083136072502 -1.8723391973553273893 -0.11859890601369470209 -0.27924672816497242422 1.6062587844503877221 2.1135671308645278543;-2.6780367407424492399 -0.040358668372575332017 -0.3553848141909963787 -1.2080197873414317833 0.34357104158195606036 -0.62871212449999802629 0.38025078774769166534 0.2787951887925574912 1.3315546317132425092 -0.4056858757728564191 1.028400280095500996 2.0985933139433265993 1.9377101793401123597;-0.74200881626656034484 -0.23738458254496683231 -0.0068095593841963290155 0.16327414590507161041 -0.32906159123783479403 -0.427280146488808521 0.08289119912016920666 0.76998234357187977928 1.5003234557319333753 0.530061243541503746 0.6370336265183383917 3.4539961759309054656 2.1261700274592154614;0.68053028126901071726 -0.22871223113091684875 0.12500954038247069633 -0.11488208199896546291 -0.016647675239355501364 -0.085025826813929686332 -0.18035631624675360629 0.1163219307051413659 2.0373822738830460466 2.0188028168591745093 -1.3355400451207328771 -1.1810965894841647383 0.071051047962654101386;-0.85077374754068868512 1.0145670055008129129 -0.020038185638329618354 -0.69398485450278424302 0.89837683106036336778 -0.60403230041383826343 0.3296231156832465925 -1.126583207651933094 -1.5308887003124176385 0.66445480527588007824 -0.25415619809927642025 -0.39595117051982481327 -0.8245714539072693805;-0.31275268342236201002 0.33215866307651958911 0.11822846430257930028 0.10569860899277688793 -0.1538403267707802724 -0.42166311103170156516 -0.29953192979054038547 -0.30439097667596154428 -0.42839281848800842001 0.43729708180178966659 0.44442797711812143113 2.1762417418476949216 1.4707857345033283902;-0.14604721654974200939 1.4301498850326404 -0.26518578339827914014 0.29994584026185111547 -0.20645961540662693956 -1.0945419982697590644 0.086175526914924222011 0.3693548465104021794 0.93614437722591370417 0.60158054742675592941 -0.9990138210400051344 0.27681035362565964419 0.45728313650973118065;-0.57832417008593417496 -0.19547331631584330403 0.27215787926941759078 0.072965546200150652179 -0.12728697860547710796 -0.34234878949180613805 -0.33255461113371065363 1.6992576216349724039 1.2507615597291423803 0.23145228670516876379 0.15749375686581260081 0.44709880725878331509 0.61156288131430946997;-0.45714598940067774357 -0.11880590086641532044 -1.1392666250422596175 -1.2901121161078195065 0.73439273450410058608 -1.4473641551379292647 0.14312401957794318452 -0.27123291247340258758 1.603978039295047564 1.5745951211665059066 -0.79344262409407861902 -0.83471766577865280645 0.43427769227971851906;1.3009920921123678816 0.92222952297471660899 -0.40597183195835068181 1.2812199496720868552 0.49094069468030643311 -1.2461070916924965601 0.16512134027768196609 0.79037812183371447539 -1.3623784315767188957 0.4320771075875174394 -1.872888333766152158 -2.9301966080268115888 -1.5909578872802279115;-0.8769126310453828621 1.116606497391779973 -0.020431545499840778751 0.25404235179751072371 -0.40053136461012717184 -0.52612615197426071401 -0.056716921215752835739 -0.86880550273056389443 -0.44390279241141594735 0.74537268551360713609 -0.029772001303718230447 1.4520074083766212336 1.7941415586092106516;-1.9824751195097263246 0.76600005119500946815 -0.42919087282236323411 1.476968715125267062 -2.0191069052486612101 -0.15106704188314215576 0.68074439248582352402 1.2062210231320220633 -0.44537894366507724264 1.4691809895537735198 -0.85348248456182373989 -0.57514903569780551074 0.50664265415466003262;1.1625221780012584549 0.84423255982071820913 1.0926950525181868823 0.68461118730307135571 -2.730856867385814013 0.64599454072529038928 0.092870814887687128114 1.2075713066902906689 1.6152364309455344848 0.20393199281245888432 -0.34912468819511388585 0.25082567264664129558 -0.9368654082291062446;-0.10581491274341789377 1.1336904353025687442 0.21331559736699937102 -0.90405175925012071225 0.60462255578969026359 -0.21188509432128463383 0.38304656464670638893 0.31005905903724179096 1.8378088304131887654 0.54235895886472407224 -1.0880299604189151985 -1.0627688813782112387 -0.30112890510567991154];

% Layer 2
b2 = [0.98242989430402971607;-0.34803481794794965953;-0.53599014118020471553];
LW2_1 = [-0.023332071196959947718 -1.40289516266817893 -4.7411856359564437113 -0.53259550609593475645 0.055740439972439353999 2.1734018350870414338 -0.85600685820106925394 0.22660546512443541234 0.21052401943740078893 -0.44952790755266297529 -2.9921533584214681234 0.80366842370206059698 -2.5815513376244649812 -0.12712341753846537196 -1.6115693061601168434 -0.60830502158202282015 -0.35213435228723938275 0.94619228930073062678 1.0731905485499726449 -0.86595698129871823134 0.065576652585924113947 -0.15867164093075702969 -1.104022812240704754 1.1675686922838675041 0.1680721120070285679 -0.21731011750575227048 0.36471581928459029243 -0.47021751192966382282 -0.2059302916981663456 1.7284462366244963683;-0.18148586937964572563 -1.4636069130326767596 -3.8678039744478875939 0.28935989275203050086 -0.20500374882289590373 -1.0825317940874135125 -0.10380781054792079243 1.7209520596953780114 -0.18367621315870449883 -0.73201907325220294531 -2.7794572712372529466 -0.92242528869790341162 0.88611233678091350097 0.31346179915198513211 -0.019065775321232471262 -0.18460662815301928652 -0.15815398919681733503 1.1300836895619292832 0.65013579194349124801 0.41738945132458016296 -0.19041307360973774854 1.8242549037030626469 -1.4399619244369332716 -0.12989643720800089777 0.40452837659010593141 0.89526387298234666456 -1.6168203492178614411 0.31275172105835891134 -0.19301402743228188164 2.1123504554340386541;0.28115519491407325869 -0.67695832552075208 -1.1259557465475957816 -4.7932606875593952722 -1.7289759525088053138 1.2480095751090867218 2.5451843551248827247 -0.99786367070142856228 0.037436189522935821306 -4.7100062120613488403 2.4404950345488733987 0.65666652051220641972 -1.0097277736000260795 -0.72180059520598793821 -0.26376257254765378413 -5.050314032094283867 -0.54549707622688359265 -0.59953620270553298344 -1.3597027631539388981 3.9838971696014713331 0.49294667610442960415 2.6208855946121634162 0.14913718153832344893 -2.6276787797362932686 0.51752338929047270177 -0.28314774261502761998 -0.98038515032497752788 -0.14821414461038134869 -0.24433508321746921776 -0.7890627965114156428];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
