function [Y,Xf,Af] = nnet_2019_10_10_16_26(X,~,~)
%NNET_2019_10_10_16_26 neural network simulation function.
%
% Auto-generated by MATLAB, 10-Oct-2019 16:26:40.
% 
% [Y] = nnet_2019_10_10_16_26(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 5 6 7 8 9 10 11];
x1_step2.xoffset = [-0.579754433464736;-0.805543758446051;-0.203588990146155;-0.125523154590286;-0.223927909142362;-6.17935470084711e-13;-1;-1;1.99013064737702e-10;-0.546889646064646;3.55320079659861e-09];
x1_step2.gain = [2.14010824611054;2.03372170692418;6.20638380148667;8.55015998110298;7.84113097277866;981642116310.616;1;1;2.00000000039803;1.79918877457037;2.0000000071064];
x1_step2.ymin = -1;

% Layer 1
b1 = [0.6977730874692396057;9.616281339104348902;-22.961555007532677308;2.149287682162342783;-2.430507078429671175;1.953461743274444995;1.0925899900895856831;0.55006850350020064511;13.087449420392017529;-1.990810506416333725;0.72659391128224493084;-2.678432184954123052;-12.675172984826037492;2.2277710864772362065;-0.11950759734050603322;-4.3987381552083917313;-3.3334720145316136808;0.83124846400191787499;12.650951024033600945;3.0167136965240075597;1.7940186369819404177;-0.13628544370837625266;-3.8808560919669199407;9.0826291960296838823;6.3767783705581537745;-4.6052477852113486989;3.2606757604072384993;24.516123843701471685;1.2448882291602827443;9.3612067409953176877];
IW1_1 = [-2.2443999603363340434 -0.25701937020985210491 7.122435056158833433 6.6104696312081632215 1.4382396607310015124 8.7372289390460249336 0.52487649153383164613 1.7788945434913892019 -0.15334742816823618283 0.11939326599295246867 0.49251246627232914133;-25.058121531772130197 -2.6009338735030320677 -12.407781955091111925 23.802090178931713638 6.2664464189535662442 -3.2332310756845044075 6.6852491801467097687 -9.2056781233462405822 1.4927766856820485764 -2.5343809731917099626 1.8680830577517684166;-14.817248443431930482 15.856780514646045432 -4.496750111575100739 33.351259646108736945 -6.9769845168222888177 -5.2428968449931199203 -3.2999535667856974008 4.1514804836248382358 -6.1157580828197435352 -3.1889027026389213937 -12.114166954271377463;-3.495459819364518772 0.087308882908964491332 -8.5335413625260407855 5.329014193266273125 -0.20294021232239603525 -7.5283405839351260624 -2.9985586394568817248 -2.3497997008313000755 0.96205908155115449354 -0.2638164515458499837 0.40317236514098897526;1.6711409751384185274 0.34696790217643030951 1.625877197244564254 -2.8721596714262509487 -0.48957812232451086709 0.68460204871573870911 2.9166223648039824035 -0.0019788323929758972961 -0.61438498279375675093 0.93235338091924913062 -0.46116060308100720322;-0.3207186292504843883 2.4030570368784252011 0.73027749847615908152 -2.1013137857024069 -1.8723713158609738283 -0.99115794358202613523 2.2664128800727789681 1.7001926770355684226 0.58773372081338715045 1.648030687417909812 1.3323306336881479695;5.9688071094762573665 -5.0694518961732031315 -18.720035153898937352 -21.676135722209796342 2.2051334368939605746 -19.63738149276863254 2.4635356921157516297 6.9681630853182570107 3.6598436359091341963 1.4932880549628964051 -0.038908875563631824257;-5.3208382600839616572 -2.77307536508642416 0.69064954869906136636 4.969838582529343185 3.9186525869418997736 4.1371985773672346198 1.5075092156734752891 0.32070063071468402072 0.85980251851220457215 0.58835787447949527973 -0.72015852234272481613;-4.3445878892693299278 1.9561961519727673053 16.349895627011491683 9.4561312408550204367 -0.25584203875752042912 17.655181284809497555 0.23057294839423286836 -0.77909080530621610539 6.8972216340295657844 -2.8264625300192052215 4.0955643767058944604;0.08099015038031706637 0.40615116932548372963 -3.7146081715246013211 -1.5998356968912437193 -0.24966144752036870114 -4.1710746871600834496 0.39724680852578508894 -0.3098715798693067458 -0.61914699028899633504 -1.0461354683164478807 -0.26603701266497681299;-1.6899859705583566427 -1.5387743572171510564 -1.7112254063773091328 2.1414423984139099311 0.98163777991959999536 -0.53631028042942952005 -1.3545937529196090399 1.0172850617484585634 -0.1549774250456381619 -0.61515630364268258923 0.052435551966217915087;2.1616679646190171127 4.1076013329498932691 -3.2260864995074731709 -0.60287888566944147772 -4.0886412792460591348 -6.1989999998644362833 -1.1470553033227577355 -1.3604475553909343155 -0.63903091754574392613 -1.4189434482549625471 -0.36420651985058227762;-11.418255585160311583 16.585856500072274855 49.931859192586664165 48.07807562408849833 -1.5449930922904433483 53.890727856233468174 -8.6652511802752361092 2.4416928419518555415 -4.0705048870235138736 -8.11009870228182983 -5.7819627984230228535;10.645688721697837309 -3.8868261938984827175 9.4092886945176559266 -3.0621866092666456538 2.98858153236805002 10.675447789430283052 -1.9181176722265165235 1.8803796458866806063 1.0438078943507196339 0.18345753925871055579 2.3479539014680117504;-1.833450872747210747 2.4490797697134278899 -4.594556643756930292 -2.6914655442714714439 -2.0433268297640112543 -5.9642405995385274764 1.3734681007617168813 1.5074091673134721869 0.9343095403490642159 0.62555073758238677328 -0.23311022353040100619;-3.7103634683230737323 3.5201756545202376181 -8.0387571989173114417 -2.5184212582184435369 -3.3292925584213941548 -10.600517753111668995 1.6748223933417707432 1.1503159818519097524 -0.61154725638548201871 -0.90930682330636092292 -2.4626244574173363766;-4.2713796451846661739 3.6201295262238186723 -5.0262144178296273012 5.2125817539306744663 -2.970874780930187864 -6.4997448272099198618 0.31260074195454234935 1.5785709454464247337 -1.4749967616494961131 -0.14504535478088714795 -0.66435163301823929594;-5.8874810229014027385 -3.345972510263380606 -4.4305409526142263132 4.1267031905477313813 2.335110761255329237 -2.1979263343965560473 -1.3431193416870832458 1.0085306980980790481 -0.37589058720561235871 0.63224345281558003151 -0.12499909204269481211;11.381264726105984053 -16.510559410399892499 -51.255364266467609013 -48.61232349992184254 1.3349083880330405716 -55.316483794392084405 8.6486205689250237327 -2.3958940656770368882 4.0693757279903088886 8.2488653075603881604 5.7815864837350172678;-0.20120694028863284064 -2.5564602261416489171 4.6377036096277581834 6.5911152359717695148 3.6181522360206268552 8.4828251944318928679 -1.5669777167792280359 0.80322340387439961074 1.0213377171075979088 0.081685339427039607707 1.4020867111216959167;0.44438473133744454957 -0.032366803298154452062 3.6202051301098694402 1.4476637161151069133 0.045140059478152666506 3.9558539382652733174 -0.47651319339853243084 0.44786396305239717375 0.63302651020309030905 0.92936361914244225435 0.37223788345245573117;2.4185568870870208791 1.0034312685594988235 -3.078867893247996701 -1.8579292534001627946 -0.96392421800351246741 -3.4747352797945838532 0.32270941115849272052 1.3371248017310011225 0.61985365225867994354 0.19810975321745102895 0.072489009176179189375;0.54033464066703262851 1.1892508860631549883 2.1477648320026192508 1.337989643444342569 -1.6681862029980540907 1.0276443866092765944 -1.5475385654950932768 3.580208727984712791 -0.83254330780057916872 -0.12499321381840547418 -0.81621549512010072025;5.6885613745431076183 -0.61003661205540260504 5.7831084775711509849 -5.8254020248823703554 1.288882894673999413 6.8640776897403714685 -2.6453331041442513794 -1.164367762254997718 6.0301446989446478852 -1.4785424958761204106 3.013910366226824955;-1.6148298608520321729 -1.8505143087054398698 -20.857078770033375292 -8.7886593567731576826 -0.35305583998270084756 -21.244894916478799018 2.6182886708440791246 -4.6493359042237241141 1.9605734594730930276 1.7903152161792204033 2.575492558369248286;4.3703702214902984124 4.0097168795610551584 -1.3040480011268109628 -2.4989269598306629305 -5.0035135999199047419 -5.3720194713860456304 -0.55802627246675340356 0.40652085412150562593 -2.3906868122801330223 0.71142158791250964534 -0.31390065482082113446;4.330980070130112658 -3.4343318852427104915 5.1434316912677298106 -5.1741980295193332751 2.7584058106050015624 6.4695883825630762232 -0.48381770335264995264 -1.4837204390138138965 1.4282808945662326394 0.21812076481231135183 0.56648402123398278185;-9.0762125451533304243 -13.709277933564671059 -28.413912150093775466 -13.495593497066629141 10.033676809577828593 -21.883962683259603921 5.7034514138218250778 -1.414886120795648905 11.33268451539169952 -5.0808125809420729979 10.491166816739809775;-12.060535324588029127 -3.4676901792299261729 -4.181330800125614644 14.212207064236727305 6.8679132547244181595 2.2954219424189563625 0.82729790672185932188 4.8053511009712730484 2.4755599023511059009 -3.5668605376640769578 -0.68443304515819736178;5.2632297150585705126 -0.32391197827996220937 5.1320122251735478258 -5.3620399080830454253 1.3585818414920327601 6.3771448038031444128 -3.0517697881368173185 -1.1621490352321699469 6.5072710558645745493 -1.381329453089211734 3.0261537815711481159];

% Layer 2
b2 = [-0.41494398453344244482;-4.0132964535436901343;2.8272999377643008856];
LW2_1 = [0.069651602835430453942 0.20140975042289044339 -0.18936551474623222746 0.26448573430611643786 0.28392377642824057071 -0.46176994476213223395 -0.17231900708700600977 -1.0258597586409341496 -0.39457698895514209392 -2.2373500212350103666 -0.87262308116982889583 -0.65507626025216381116 1.6264436246950044751 0.1593468986740627924 -0.056283605238694106587 -0.1948171794919726918 1.0437595164280748516 -0.10824886075964441912 1.5741270521777488423 -0.24307264153195382028 -2.2218464454095681049 0.57668804412971019779 0.20123025430337321273 3.6594128389856073191 -0.16074511312661568518 -0.13236505550779101292 0.73639557034524394385 -0.16024721461913510323 0.31914063249529323052 -3.0986970750223039595;1.062238865876568239 -0.38337476578035822872 0.85697072475546542947 -0.56061312118930795023 -3.2491000547960497968 0.35322994462819917727 0.24668112963692656603 1.7156925771381590362 -0.70141133976622349611 -9.4813823239274626076 -1.2976530214363450888 1.3409350681355136636 2.4321442699161717194 0.035511116264532294196 -1.2113919292365431524 -0.58929413020885368368 10.318135658751504735 -0.078628485812931789289 2.431447753676216017 -1.0233377087786370563 -8.0615532436550694229 1.7058531870344373349 1.0602110994090394591 9.4847152211654748299 1.0944361200067058704 -1.0552325219565312775 11.223871671286172358 0.48961714370947539976 -0.29247981327920563599 -8.2028808018162386873;-2.3059369199860606514 0.12960253437268404175 1.3180475656644583538 1.3046183860852405001 6.4296205149798693057 1.7476617284584048395 0.17181183583429315842 -0.84311841919698160552 -0.70948063593585064535 20.16319835295491103 6.4429109806027700103 -2.0464016388081991416 -9.6553133228656840004 -0.71075101503882576193 1.8130008516614368741 -1.9143442653659596964 -25.104613458573840745 -1.6238556718064913742 -9.6576044700285841316 0.67953752403871359178 19.385982896044978929 -4.6264798603545571609 -4.1407494418730506069 11.448936638904502416 -1.6642472298272561471 2.0980492589439676543 -26.742672409468401185 0.33410742287818356866 -0.095763978029037424844 -10.463946212623941534];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
