function [Y,Xf,Af] = nnet_2019_11_05_12_16(X,~,~)
%NNET_2019_11_05_12_16 neural network simulation function.
%
% Auto-generated by MATLAB, 05-Nov-2019 12:16:00.
% 
% [Y] = nnet_2019_11_05_12_16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.979760528962744;-0.0967493271686649;-0.123235760701103;-0.232445808105878;-1;-1];
x1_step1.gain = [1.79921859849069;2.40876684978895;5.00906977894087;4.1712236562878;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.6078174311229074256;2.8649686421259481506;-1.9293031453742484072;-2.0307393570905882818;-1.2236337261369889529;3.051311183885128564;-2.6796770967634011562;-1.8223666530353670456;1.1334958057157276112;0.62140733495325095603;-0.19855725236101945397;-0.53314037730052477038;0.046924193071013663159;0.28835982887831906885;-0.0073075413456060583917;0.76510710762356359815;0.38730900849922872409;-1.6790172346540093162;-1.1127987093497329063;1.0375303282044678888;0.67044325385303360498;-0.79856311147646463766;-0.85375300673897047687;-2.4057212487251518063;-1.8993267007655767475;2.669613242356905225;-2.0155616822024708945;-3.0909224168526394649;2.3540082066703300612;-2.6195727825859815852];
IW1_1 = [-1.1164141699022720466 -0.82814592633606298744 -0.55939943492732446817 0.14388384357594391494 -1.6973490338957051282 -0.32376969500702140747;-0.51814963501462019124 -0.38753514887629508801 -0.53036468205657960606 1.2440511648092063002 1.560205814329918006 -0.84605183220975954672;1.5987893593644673107 1.0262793127589264763 -1.1993981064218894872 1.4881350395277541665 1.1933904414810305727 -0.08786848732318762456;0.60473342035393762295 1.2512645722360500322 -0.93965428169791442858 0.54343459705466656828 1.1617715899098310928 -0.60449376029248147457;1.2119118169519773609 -0.40283298764814889914 0.18406865025623178611 0.64230272899224538641 -0.61638084385087965611 -1.0152179240504350943;-1.0126979562576827743 -0.16639185264344985571 -0.75862777554204607888 0.85906609704266168048 -1.1348049957481411987 -2.4201223133837235224;-0.23931096336787546774 -0.67907400441682930214 -1.1428026705982321509 -1.1805300177455773092 0.96973884320803105386 -0.73107352623277888082;1.7515159293034792132 -0.10454412288492921645 -0.69472846794930653846 -0.18208271298864994736 -1.1690975160973420266 0.82283097164667740042;0.029270344949852429572 -0.15214454051365242093 -0.26272627337507287182 -0.027965367158452283936 2.0971823245014076242 -1.78127697036749022;-1.2432550098634846947 -0.44138962499203915346 2.0680084649789804985 0.84142095318046117303 0.23374746304089144555 0.83554527443073378645;-0.12418995981511234128 -1.1873999910449595241 -1.0639652474433904938 -1.9781845891818852223 -0.22622307862599447259 0.37660222180064040209;0.19960960291538509814 -0.67563736018261721927 -1.0253548731973083363 -0.8539405212270417822 -0.22129250497507488293 -0.38744112068892438971;0.98125751946306360995 1.0098268769123384114 -0.11373526214760967812 0.067115830514562602183 -1.785749342347141333 -0.93502322293738604486;0.037718816153969998706 1.2399551382529234722 -1.0031105274577409858 0.69524622301703786764 0.80634338384601489391 -1.3504391733270597609;1.4662312883620618464 1.7193781259237623793 1.2911385843449165733 -0.40100858682782053455 0.68450517407504740675 -0.52681585305744138559;0.67155948341810933755 0.36840070585891626642 1.0904145520688024451 0.62665777747582751545 0.82003623097758082672 -1.3445185577977292191;-1.4605541502662202635 -0.67053355118229085452 -0.43151148647839043804 -0.66970506089874426436 -1.1772584694932042293 -0.76839030048880940793;-0.21470565703389107859 1.121223985585497962 1.2168763274491591897 -0.93814396349404050035 -0.090341643013717345956 2.3929950437922888895;-0.85943245911299492867 -1.0833434250573625857 0.95947461434734826469 -1.2062673233549554563 -0.82336598381250281076 0.49119121494436146502;-0.56901222048398059083 -0.53589294111671947896 0.97780399566490705521 0.31453013625343728688 0.96755535872681963649 -1.7546332702148323968;0.76467660835507178518 -0.621155025200521127 0.15147548327714913108 -0.45935506387025343278 0.22406689942876648058 1.9844399616028469691;-0.79404220249728862946 0.50385393598503069867 1.094907566534325527 -1.2945073347308031497 0.24132592761804308457 2.9504432251057406411;-1.6903923249596788381 0.76330620685614636312 1.3559745493813912809 0.31131484618645471896 0.21191557084183793025 -1.027507228712882581;0.19700083612527174992 -0.31077710453080709119 0.87557074545428248413 -1.1291238778861094616 0.9575853149259857533 2.7350051958829135756;-1.484620865888006902 0.036383555446844094428 0.85364903517281809364 0.38777252080641155807 -1.1493685934536388427 -0.82394471741200525639;0.93375843495185484322 0.32864019228375207504 -1.5949437272691169287 1.1470419635335544761 0.79508590611213192378 0.33646746978070546374;-0.15909755509544784569 -1.6408017592925836503 -1.1952417797306595926 0.95502295666018655051 1.9327656553786047855 0.2681833918216893764;0.19293235134240738216 -0.51399883610413465984 0.85080034480303912137 -1.8409366590116904572 -1.5805398949872839776 0.72276806472802446191;-0.46844206131532611925 -0.35436543795949188018 0.022764973000551476379 0.36075323177855722623 2.1394956389195156632 -1.6153743558409392467;-0.85048682539444009354 -1.609478024760510273 -0.1588781193473686737 -0.48426807124613857614 -0.65115256478404337503 1.9314071351828934198];

% Layer 2
b2 = 0.64850112506394952394;
LW2_1 = [-0.038413026285616790056 -0.44110632821529222047 0.098443769745985842956 -0.084993173252754017355 0.83131057995437573904 2.0111543964954288199 0.48104522237500374482 0.30347272557213650357 -0.90296351623319537349 -0.040060597284575415189 0.13871089264210728631 -0.67700416308089728101 0.36185046727793662713 -0.10887004868875627128 0.017340139280027002527 -0.68746726779799471885 -0.95288366231935506256 1.8766767309678862308 -0.64052415981033661296 0.62257705135901109106 -0.038708151990300906919 -0.96175108334530035048 -0.35835545539114349589 1.885324002684811262 0.5397593575168668778 0.45779550118229617173 0.044269951774159030378 1.2051868359926090069 1.711254235370136545 -0.94331999753522943752];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1;
y1_step1.xoffset = -1;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
