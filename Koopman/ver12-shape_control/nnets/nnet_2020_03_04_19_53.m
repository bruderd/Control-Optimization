function [Y,Xf,Af] = nnet_2020_03_04_19_53(X,~,~)
%NNET_2020_03_04_19_53 neural network simulation function.
%
% Auto-generated by MATLAB, 04-Mar-2020 19:53:50.
% 
% [Y] = nnet_2020_03_04_19_53(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 4xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.05758025551517;-0.853514779485583;-1.01371205985026;-0.983324492774336;-0.783151031723855;-1;-1;-1;-1;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.966551507093721;1.11133990028768;1.16744207208674;1.03674873517396;1.09997232337601;1;1;1;1;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.1631544182238098273;-1.5442198645878220109;1.413096616980245912;1.114436141017531412;0.79833736008409073026;-0.67787004331327760376;-0.3247494012049514378;0.72556892108006254549;-0.4792749091125118599;0.77593787886955445376;-0.23019201289360874396;0.68815161734457674925;-0.77823276865197232866;-0.054721324858518473333;-0.34505526671412778406;0.45773643174472861128;0.49836860994077120113;0.17714942468074496018;0.083998480516413107089;-0.93258894838008399297;0.61673001255464332537;0.86862653190202143705;-0.6528380326655338628;1.1891607918419311307;1.2913710050873916657;0.88557181508406968007;0.79589726904613622427;1.9825054626370164357;0.95797498122076008009;1.2170839809744471438];
IW1_1 = [-0.20856048418061973182 -0.13893235218613045334 0.1021492462667153156 -0.16436521630879247224 -0.5351660116906062914 -0.32802554870119959851 -0.14796213453076662026 -0.66542602627155222894 -0.25588137069271832402 1.0794146123620524946 -0.22148498086997495116 0.62307952243692033001 -0.29417365379463600306 -0.34562333311359699772 0.99844051060939764675;0.065878500854431476519 0.18368876313788881638 -0.54556392904221795437 0.63690962705643172637 -0.10722378413631833416 -0.36789805567613065307 0.26990390110370510168 0.2527121839717000884 -0.8339323845401876989 -0.42865138556595688835 -0.3731773437064808685 -0.39206178588676082741 0.72805838495546515432 -0.21165215980116233729 -0.20275499601865082377;-0.83418622488443128216 -0.27416637983903080489 -0.75714030217077810114 0.33871063988247462895 -0.68287110811603091154 0.06864744368051702017 0.065904820517694695514 -0.51276217276281088608 -0.54781047457901388409 -0.17738274216119437332 0.735763133933972302 0.009162706981034364484 0.048848524414429148055 0.18673812917814575085 0.21191326606368410257;0.21520241512742560586 -0.094658689402080900543 -0.56738463578902098572 0.031499320820404415333 -0.024220860551240216973 0.18095710331230427381 0.17690174930181581936 0.44637423657637564922 -0.089553709374949427846 0.17377418833402744069 -0.47256370926665169918 -0.36477138132555048111 0.80305209079164874275 0.1219188946589518513 -0.43352107904603487398;-0.11834312364589290312 -0.013496256997136114875 -0.038672336674911447774 -0.076371395483974438556 0.27976113517550238452 -0.14424663884944965986 0.17541439479521644951 0.035905090294290550879 -0.66529256168519890213 0.77661090486394612764 0.32925363093745063647 0.68423545144975861376 0.0018486896134845159402 0.19403840134861100042 -0.14580546597596424907;-0.00060784537810120060908 -0.33286108666671510026 0.43339843094200242168 0.42813069340671350282 -0.011405503609526537745 0.12688506039752114885 0.005678240974958408474 -0.045493067991728905475 -0.13257972514096419414 -0.2407474476248043227 -0.33369552530134860557 0.87755516605735917057 -0.051838601249380250602 -0.31725055659048262413 -0.22685474594027585371;-0.14738046377504990248 -0.79781762982373982673 -0.20640659450089718363 0.96058728462000275705 -0.090117358998480945331 -0.12733028381952712915 0.11405797777267012716 0.13322918126823363183 0.10505960709799745667 -0.023785126034842722642 -0.73559866682325503184 0.29926038663367565684 -0.070767118167442133458 0.20240344986525843352 -0.71726529000726246821;-0.27355812463866591155 -0.72789951707362565703 0.5020653289055975188 0.18957884340068004159 0.29427967562197582252 0.30723003048048452834 -0.10400971744803716446 -0.13396035038245859838 -0.12197969221852020261 0.33890687087084475637 0.46184678560408282122 -0.68867194672149578683 0.79935205651483531852 -0.72789582641198613544 -0.21579404276521629846;0.0029462927855403997501 -0.14885780900241973868 -0.075150579475159684506 -0.28355761586867628266 0.17853960357062850783 0.19284226022171260806 -0.032939027848837856838 -1.1647885975744920461 -0.33217470035531604378 0.83777875661619327641 0.60163531279507131977 0.71639980896853427961 0.8011264034224726549 -0.26879205367040026609 0.18147610186890841821;0.088099107771543838652 0.1632587872352845304 0.19682455571587101351 -0.064892499897375874318 0.46655196144641275513 -0.34337748265760420496 -0.062654107049242083183 0.71442133433548826726 1.1345792204954103788 0.62981734541065836908 -1.1694453473697381529 0.31528857551564554162 -0.74031116751372938456 0.20491687819052753494 0.11756327436183838797;0.043554573650908069704 0.17707129076864092099 -0.25203845778337907735 -0.17250919943011841506 0.22253947193139475558 -0.58949681341558313186 0.0060472336769185914412 0.84239623901487437063 -0.84201417429520319935 0.51449374908597733658 0.9109192615763386236 0.12214563289142887914 0.46431119108313523292 0.25805184912007189668 -0.25956224240814723681;0.21895811433366269005 0.43108065319782701286 -0.49421012097320710099 0.30812264095564406707 -0.24238766220130272822 0.33730256617192566626 0.029539058815380686562 0.052576758889767129246 0.39518454570825056749 -0.22990938659507054176 0.24538861433248973509 0.67080804361983725759 0.48501980246417220055 0.20904265941370439585 0.9388545144123293662;-0.007277236681355285855 -0.22866064850748021864 0.39873233621541842586 0.018031910670302318811 -0.2231309510220290393 0.53164351885848037949 -0.16237212128606742789 -0.82391476469039659492 -0.39723820160917089339 -0.36674357279570207746 -0.23157847887525220831 0.46888338094566611725 0.27215792181488873691 -0.22277373377933692988 -0.093524292872261008402;-0.39277046571603951852 -0.31529293221069970565 -0.092467535997401373304 -0.55260082133808186011 0.31037656230522298051 0.50614741338822843986 -0.17546552496935463594 0.26907303185436798332 -0.13835749721613971319 0.040085396319998536918 0.41674411624521762176 0.079194619961939549668 -0.094909028590025173999 -0.20402668715486882434 0.27540181818535680591;-0.20937461435785284514 0.078010344332743564166 0.058087580962675827712 -0.40257209824552103727 0.0058389094815239264008 0.084406952116829372934 -0.18678394149130575497 0.10809172218844272095 -0.5601561356321714813 0.57058730626949616394 1.0887514950581458351 -0.37205750106760726581 0.98504286980717914446 -0.75824800776933454216 0.36209563863246463367;-0.67275736278588460504 -0.64860725884407077757 -0.4110516202834239019 0.068931452564941778083 -0.072456173182999322746 0.12234764460027854061 -0.15569514138327167352 -0.16676067697579471938 0.14244333297433253716 -0.37265478645203337082 -0.21019297681293722113 -0.14518438980336662025 0.63583984930522252643 0.1044055138503149488 -0.18452977095085223991;0.73877958427280787657 0.3600012394609445332 0.13850058827026745512 0.24918814665020377896 0.095532074750385428952 0.13162574563155521323 0.31637315905203122757 -0.17542043752909131094 -0.59638854118897055567 0.050086875262081637095 -0.67474396083746890351 0.51469734114313603346 0.18230666719485572047 -0.28504137831783582513 -0.12087383960420081119;0.18190066145357389193 -1.2320282613801001315 0.32183217438323963311 -0.0057275372648374293233 0.2410331714828657379 -0.070013206154572488193 -0.078963120686730531306 0.19476122604613282929 0.19646719907143561645 -0.064063830005346877883 0.14650962637451400705 -0.79416127002826464309 0.17893551726463338691 -0.13512868499011948531 0.17393402015320122422;0.19902574424261407215 -0.33079931149676217172 0.08633787761510849923 -0.23682084496621258474 0.088701573888444656957 -0.43198611013504945033 -0.1661342434636657317 0.65768253727489989213 -0.32251266837927600184 0.6481371575806059715 0.48562016679836378374 0.047829342137228933463 0.53959743302616691718 0.17433765422125971356 -0.14634399892104762997;0.11963500478896968438 0.30603631358607430446 0.13159833535259499171 0.24044756973462133587 -0.3699179832311833005 0.39602699534003810156 -0.15266303027221916899 0.22616998099951116097 0.26113965599765831538 0.063248179131926068886 0.65810032550367336679 -0.25222648247240120334 -0.61094241056485310004 0.16367986964249378601 0.1760649131792637323;-0.44272098198325282592 0.23078036850330482799 -0.61346091466521623925 -0.0056274010796210673091 -0.7383115567549426439 0.24644437494635670904 -0.22462891354957706391 0.008422295537736445431 -0.37249596395846690244 0.0067393001756722477336 0.15180565944657814503 -0.37334167112779914621 -0.5498943523896036023 -0.52676005525900293502 0.22251091492799035532;-0.016940645403052206897 -0.33725968869855854626 -0.13797909691630774742 -0.24703241773112646906 -0.10986136780633712351 0.84666454649546329936 0.13392567159758295148 -0.057508129030747277832 0.48318491603624125208 0.2627888247721204551 0.025538439392010434115 -0.3417771161875570729 0.19850601518912280863 0.62494796307465283469 0.57644365632246974407;-0.63593891702508287267 0.046726231299221029913 0.62971234802597708669 -0.68149363945775154328 0.44352022775177601943 0.12700287298885401532 0.071869906704745897819 0.95580881115472782206 -0.22095530116437586687 -0.014067614551187308455 0.50205482834615333676 -0.33292255250142865908 0.49689673940640050054 0.34239545622275313619 0.1129060036518824417;0.26509582060381364776 -0.49460418305743858447 -0.24368898927506565943 0.11868025145464429493 0.18511827962370430711 -0.27049633151592350488 -0.057387966896309088038 0.63099931898001948571 0.069900439779130241202 -0.51133068659234803821 0.035319075283025871959 -0.67736609119135815504 0.5222945464212040978 -0.023316523010707676522 0.86015401453476603155;0.59422666792880207698 -0.30980332341131139318 -0.27086596160356274376 0.36572286496582884219 0.19260174846609950938 -0.060577117718611857289 -0.045466828502672834711 -0.92572255428028871194 -0.6854353922032788704 -0.26883223487545515606 0.93630209105839246053 0.78583802258484014569 0.62754526757643047663 -0.55188021961412714322 -0.036906914288395265;0.032842693950131375547 -0.26007953985475895653 0.045395249992783645587 0.49031428741997667986 -0.36322471651041449148 0.034448587755462958815 0.24208725620492232977 0.059658537714256859585 -0.79813493776544364167 -0.9999193933689053404 0.13082167540734868094 -0.5992408141886955697 -0.21168725550779871059 -0.036605933865195616761 0.055150357575245424757;-0.46348302440763838872 0.31670115985214186693 0.33552134284825030353 -0.23057186584906688709 -0.014226079729175555855 0.16327628896304602346 -0.053769851119903989967 -0.022917061041023523843 0.219718053184501938 -0.56830299010102602875 -0.67203719789451921152 0.43763398410243359304 -0.45473772206504237126 -0.53367127916785983555 -0.223552000781502197;0.50345836962280687832 -0.33510271393024021469 0.36265933315083614952 0.11821793756390652774 0.64124242731053493483 -0.29639754235599757859 -0.05720155766478387388 0.063368602751031344322 -0.34643722340993277076 0.52444457762745932961 0.32344334225931931082 0.57833054821688523184 0.61771973766208476686 0.02187950287430735774 0.89744879462305005013;0.30855296712373853074 0.68605075638884960298 0.077670514176248525717 -0.37913806335768146516 0.040727092964626988858 0.13519897707170630552 -0.098382189779333370505 0.39382926623004393951 -0.72560319704818887487 0.43654446649575362471 1.3390675589174210192 0.47373023204590680724 0.23467581618278576805 -0.42017583157845439512 0.087344108695851394031;0.43649632185180237132 0.68025598483496352298 0.4684732777409822968 0.053396063610342485439 0.3389133783848251591 0.23261435630665008856 -0.31407169969183817981 0.476697581551999372 -0.39052246362684567282 -1.3705353625544365315 0.8376413098624276854 0.11299831589387469843 0.58445362837065473194 0.247403306847399862 0.21075772149898133745];

% Layer 2
b2 = [0.18111612248520930768;-0.23369546483853542718;-0.6187043828726510597;-0.31754048642837751082];
LW2_1 = [-0.060734143070719739943 -0.15340562572850377498 0.086512733522935245101 0.46678642916945645158 -0.10566252998056957502 0.76474203663369777484 -0.40401200221711858207 0.10217704069746470774 -0.084048540135757576763 0.027668985845518401928 0.026283571778469613789 -0.10578224325879694023 0.034631748118147592796 0.36031562485117624162 -0.14516644400749803556 0.080349178855266309429 0.26613421627451122609 0.054036280745276950299 0.086524890848490756956 0.47896841936729284139 -0.081139919974347995968 0.3271650368958955446 -0.33255822444544891336 -0.11351715289322447666 -0.17273784594883051513 -0.059042903439904148577 -0.31928522203921333444 -0.17780314962920221178 0.10176929915090780765 0.024628628799820782153;0.21580323520591054853 0.0097505401391490588436 0.61534814779958713071 -0.69901826488008977911 -0.31712295057663580922 0.40251575198411143619 -0.142866898365428735 0.19592123285728166304 -0.166386008669527935 0.28939289334835682777 0.43914129440290416984 -0.041688099518899443541 -0.71830674925598125835 0.16230622205518063783 -0.11157187267003111641 -1.5154175185748175458 -0.83986264626266315947 0.0011946854312784062346 0.41880331611731586028 -0.9341863978084622433 -0.084632197193619945752 -0.056658675836842121998 -0.016394249578894726921 0.056054873359312189229 -0.47717505618565053682 0.46035702891276153448 0.099530755524898775755 -0.16413061824113120424 0.20231565221455538595 -0.040963026424237908296;1.1349626877679519499 0.83541844590652092339 0.064924483922741235697 -0.46164501816357811359 1.4433586247414782466 -0.57988721050612812569 0.34445742229550846414 0.66841985846717488773 0.59123142585706123242 -0.75611635478441419078 -0.93125266037997622703 -0.32104943133630159391 0.19442819989856774399 0.093509399525042405377 -0.27692580427097179818 -0.28784066697770194221 -0.27379889400662033028 -0.38935173452724186616 -0.3108205810035474248 0.0072539280702620494157 -0.30098973658481570359 0.46979660017996649479 -0.79671505718872348556 0.43513684517599782176 -1.1336726880815644058 -0.97670398721077389403 0.44276180884054777698 -0.26939076112484294789 0.63174900118194576848 0.59619382828860512102;1.1383543383462859655 0.41431027671234216259 -0.29075818515807871911 -0.39850215277083417265 -0.81879990759972021142 -0.60810270262325549773 -0.36260743791374527856 1.1633938060487487576 -0.93395141328464759134 0.36372500671304019981 0.8334699423067711832 0.29334925739240885756 0.24494641091402014066 0.36369723804435999392 -0.72644806373857484516 0.3084385521318327994 -0.19510753856305565468 -0.91171470167568902099 -0.54309101958817196376 0.23579479587803936491 0.20658716658751960504 0.17937724588868514397 0.37407133876157949715 -1.0315669191187724074 0.54577759918381674176 0.57626191629948964046 -1.2944674633457975421 0.96107347441844193092 0.038771926854905117144 -0.99906927238925558044];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1;1];
y1_step1.xoffset = [-1;-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
