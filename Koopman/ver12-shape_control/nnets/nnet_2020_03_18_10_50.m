function [Y,Xf,Af] = nnet_2020_03_18_10_50(X,~,~)
%NNET_2020_03_18_10_50 neural network simulation function.
%
% Auto-generated by MATLAB, 18-Mar-2020 10:50:10.
% 
% [Y] = nnet_2020_03_18_10_50(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 17xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.41856259110545;-2.2718938606832;-2.17366372244838;-0.979617340221943;-0.787524165424541;-0.853633237898443;-0.807045669002493;-0.706026138360652;-0.688627472522448;-1;-1;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.396771245323629;0.625254411744235;0.541508321094839;0.83190037050372;0.709601266233466;1.00898942511287;0.846491787176442;1.0242788286693;1.36460007509066;1;1;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.1798431758969130101;-1.2791836213320240123;-1.5921206725878473964;2.1396915157965370469;-0.29978351608089426339;1.5916810491761461677;2.0623693314200854942;-1.2282625088355914045;-1.8907453250828711866;-0.91581949051821653907;0.20283633258674635402;0.14994737708555766487;-0.56440982481278223482;1.4634415956834232464;-0.22281685403829482039;0.27257820187540976464;0.39255057391139180911;-0.13385303604127612997;1.0829838999655836407;-0.17866562199469829264;0.0012794161778911109298;1.7364679176989570308;-1.1251382894379915456;1.4040567048537215822;1.4892053881887108435;-1.4564450251631972932;1.2185666222957740601;1.2883219240041414722;-0.94906329965325531006;0.54851258357041077218];
IW1_1 = [0.079758425200927435261 0.095908298988403986596 0.0014381841722894436828 -0.0035700339947391393838 -0.15198166540816440695 0.22091143278723429644 0.011850229342307089242 0.033071031533977661432 0.063671414463093711777 -2.0723735189751164576 -0.11929256708238475393 0.16759012951534041358 -0.22908394218465977232 -0.19701161957860213736 0.49567385265590568899 -0.055414169174779870364 -0.22552924094957912948;0.03578305251938692505 -0.23223462912895903587 -0.96813340049406659826 -0.1306445593082828649 0.34553169187694127151 -0.21054388207949956136 0.62881849799195921324 -0.29799019533656251335 0.014803894746036896923 0.6146491908198613574 0.40113298412690989725 -0.98739210689924927777 0.1130415252563892331 -0.92617685735647914402 0.28817277792930406921 0.17558307121150565355 -0.61468497083032525019;1.2152820398218557862 -0.55369787463684538853 0.22926063431421964123 0.38106554114564977764 0.053899833700259920655 0.10670725549133391885 -0.098617215908269009739 -0.28621684812234521322 -0.48174777874502067165 0.043728097578311003746 0.80001891247950451813 -0.020359923614849458062 1.0157059645041099927 0.18030293675761907557 -0.48885469983087603829 -0.16126541287550197334 0.16151860144357893523;0.68702815497202662787 -0.57424957515665397967 -0.41075974907967771621 -0.4190545330154412107 0.29692831285985205048 0.38851410181352130646 -0.082532564078942757813 0.073441753914385357604 0.42473518366816054304 0.3994355052430641484 0.21391239129142994302 0.84777906971984806628 -0.31283403146242866333 0.31178188871336393051 -0.84968145504047865035 0.19105618453478140362 0.29001497285858357511;0.071305173952836475859 -0.093261136628558463646 0.42797107294112096687 0.057079160070703634233 1.6049626558611089777 -0.18179378054206177251 -0.75766380201827576713 0.6239333440164656075 -0.50095762431151480421 -0.49957887522264532443 -0.55466461290517710125 0.78460139459679634211 0.65432417790098995614 -0.34124673433899349595 0.54598006963639966749 -1.501280146811878824 -0.54190505820213497046;0.9579477858339811025 0.23090960707435434496 0.69659525343031669653 -0.37155530042020112891 0.56321494276216865771 0.012595638798207218351 -0.023681425856775080441 0.25906334552646670399 -0.21928191585114853446 0.052001191333508105241 -0.51481036667207424884 -0.36955858579290967736 0.60146264959052131438 0.32349020253718768769 -0.21770395386418261996 -0.6331580858158590841 -0.15983374711654366185;-0.44389651811496799727 0.93181655039047495137 -0.3385233741096076443 -0.24190879225004061071 -0.13203589121562608888 -0.59412141998795664488 0.31416158369599722633 0.47914264715898946534 0.24623861860082196795 0.90195304290120592583 -1.4324444705565753111 0.61278349356500605438 -0.087530353416945552714 -0.34978791361511674118 -0.41950176059877086754 0.41827967988390990506 0.29420542625025675187;0.006994490913320399253 0.17326112449816152838 -0.87228180383696263256 0.14344645104622485987 0.46220021936831168219 -0.31951837846839042934 0.21640935746987560728 -0.21207288633857329652 -0.08299741146632538813 -0.13274879437565612061 0.32250246558305606381 -0.29560256011099877993 0.12433234544996828175 0.16399282652724059273 -0.042747653384879083505 -0.99415715463594478418 -0.56219859575740260826;-1.8120040380996249585 1.4509296192979892481 -0.18792832674920634251 0.13044070462307980063 -0.83089449804048365333 0.893726285871589754 1.2985435770806112998 -0.25501613412513363111 -0.60260341071980827454 2.0472235430649603494 0.42272237099100989921 -0.83506678666212019735 -0.89412867587088573629 0.009550605885889627486 -0.84159610017860242426 0.82471816303481437771 0.51331253703334833727;-0.03579711562557281318 -0.71651596248402205092 -1.3505266910532367497 -0.30281278934805755387 0.16381552646327313116 -0.4920944391134621787 0.95111239511710654604 -0.23273273617535933377 0.035529838551916180511 0.049337411883390844269 0.57500944279369015089 -0.22343564495759254962 0.80011513506866605017 -0.56163851571280853925 0.15376030465729340069 0.29791584439561730191 -0.61351280962300658306;-0.43428945026078608072 0.0052917274549528362307 -0.081487500123727754642 0.90423599011552191484 -1.1924027681533282408 -0.81305656968619355318 -0.92633043498241807168 -0.75757274402687857506 0.61155509961088116988 -1.9431282765522093214 -0.0043764795421569312878 0.297351763285416959 -0.7056180863297136785 0.26769693027615298897 -0.31939423491812179989 0.32545949431963600018 0.49368532737715242753;-0.42798091662336129604 0.58023219034081885415 -0.87244421570637231689 -0.44207878281205131854 -0.53212664113654262188 -0.087151294023567055236 1.098817145047666255 0.06278063210806024419 -0.24885856588551688584 -0.40232331313315983223 -0.36459312868195697943 0.56526992535381803684 -0.36518338405011985248 -0.38135194676690320481 0.75812245728660687671 -0.59945132127383304876 0.61140875177875275703;-0.29072124348340439015 0.61875205697394386473 -0.065223353855695290204 -0.33779596574773235185 -0.064473322945351324575 0.41797342263824904807 0.19642617433854223097 0.20280844505095563246 0.19013800949653278383 -0.8057405214442112662 -0.29153353182292390811 1.055926933640251475 -0.17990438714114642682 1.0857300238912557244 -0.40334729267282476428 0.039922159209100860355 0.19690270210176910592;-0.77753654484271250702 0.10525690164018368378 -0.99248586868668509098 -0.37925701910170722675 0.46783136985950718456 -0.42807011147932494399 1.1101929489166435516 0.93008986847677244114 0.982703732409637154 -2.8811194134731268335 -0.075401288772371524716 1.0464817047825971663 -0.30494647289445975247 0.42854231199129327878 -0.39249404248732078226 -0.2862836085569367417 0.352080073094881707;-0.10487606213483610662 0.3892278825589136626 0.02461285601229990308 0.24531223278916614028 -0.080699561051681453772 0.015882571579081572466 -0.026378901067425519766 -0.046329624755268146441 -0.49498736060352027666 0.48847094804155005709 0.27395342758870699917 -0.49763075043201204783 0.21850388140410412219 -0.46831720421366096474 -0.22946254099104132496 0.26227538882036799395 0.16038899962977007374;-0.32901650523044084773 -0.111537681644107739 -0.60788587342484268206 0.86902945327791536467 -0.58302658150603925424 -1.141387360164130893 -0.32927086156352819435 -0.47851526437065189379 0.7488333163904378198 -2.465842285779904941 0.14497597894082123182 0.21746703110822973581 -0.74148106858293494348 0.82626690802591140628 -0.42964710788883064829 0.12467491877814591839 0.44890403292432412563;-0.50336226964558894448 0.3422828970696826234 -0.70378691574717400226 0.32065638928693468435 -0.1842732250752996126 0.064564505667962179825 0.31930061305493018242 -0.40596794304124611541 0.24412585166852446283 -0.4667322769899413526 -0.48369285281761043027 -0.27339722068408428557 -0.42095167030642860473 -0.21455497348661478618 0.12633946940585202845 0.031376168071879144417 0.051742307645574636688;0.2560809025083914392 -1.1137261906635760322 0.059006927376657421214 -0.17569260601010444622 0.42594871125547917323 0.19201722516290398168 0.5071233944158296536 -0.14748863894785038675 0.10986519062863504825 1.0402085987822371482 0.90563255652827512332 -1.1700271412017089201 0.18988515855212578787 -0.066860273091346178465 -0.24042322967637499986 0.068606612622206047947 -0.0034082799484098681708;-0.47206642144683591544 0.18683592554635142235 0.099129693912282518253 0.24922094315597742575 0.07784977262836112466 -0.1637159565160646868 0.10620343025134322545 0.17985088964343237672 -0.39530468988001471464 -1.5109239092616957301 -0.11825663915524120551 0.3366009413085842561 -0.75024260405468279345 0.30354925153870421228 -0.52721426423360606695 0.3210393235411159174 0.28491784147261323135;0.090843512745214835546 0.13008630244290378397 -0.093513808823610614085 0.16866338328279145697 0.046794193723865083745 0.031308317959790554763 0.16718386459408415834 -0.12005548390061580866 0.2940189794236799381 0.64757318305635835909 0.12124974253935061341 0.013425553011353664329 -0.63483447378704027653 -0.078927410414550799866 0.4330214463273295844 0.149403730332749618 0.53421569354515396899;-0.004482478683610236804 0.0044250743168939218886 -0.48062482111198012724 0.29140655874470872133 0.54283117362723987132 0.71877036862989451826 -0.25497016851882275956 -0.85330889758928074595 -0.085730858946843152557 -0.25643358683483974403 0.50020370219508525356 -0.26425145309431646856 -0.78456233962670141047 0.65013147173137453283 -0.088270030261569779051 -0.64761433326674100464 0.966171407276770422;-0.56800449672049080352 0.92987141205494638907 0.018458842460411951231 0.43580956215605898274 0.18187268959147731562 -0.9975870148844665497 1.1135497336430431048 0.10417227306268174447 -0.6050169742071836998 -1.9233373097946289132 0.17998835855845773946 0.775518190412384123 -1.6154230660532480357 0.66163256749692711534 -0.63089007881523828658 1.0296270328962644491 0.5268336961107035199;0.077480362255275922467 0.046627703601553840973 -0.015035064477442745823 -0.047254149850031013091 0.21990086932438585032 -0.59716928689582315926 0.24381207720001829564 0.016322523294335315042 0.044398926365832418195 0.06069936612155864275 0.051130551212453377585 -0.29893731567730397192 0.31463008144641996244 -0.13726767213429996728 0.16919933834088621283 -0.12665400712318009013 -0.10441318184583617268;0.42556266845935086796 -0.71267894998867920009 0.15650452944188150695 0.30078659898853821186 0.31750181592504078676 -0.2419098522953606889 -0.041783208223812644266 -0.30358765023825867724 -0.52952224954662874268 0.49253727856306322996 0.44214480791809535054 -1.2305419730350641849 -0.1920345008074020865 -1.1331986257698660747 0.37671076535475311875 0.030346584865651074492 -0.32652746198292875723;-0.23452272278005514838 0.005245383157275284973 -0.37496123583980700555 0.53648843085547393006 -0.34554209401145458136 0.52553933277131459345 0.051630743364386111338 -0.081356912837127537408 0.067317455683208723971 -0.21832375248685800817 0.4465267519173714561 1.0254709018157313061 -0.1008146084181975044 -0.072136539084982131964 -0.21123378439474280177 -0.92099239748314931653 0.38714670508443282948;-0.38930636197023066325 -0.24113133325042127031 -0.38666903031046157002 0.17750650069689902222 0.1585664797550222771 -0.13178936250449196921 -0.13300996740340201296 -0.24068465061130253635 0.25324842193686514236 -0.51508728616701271452 -0.4443157981025288028 -0.085562140194846245111 0.25663777235279794375 0.092848926000719200768 -0.75314713204818561909 -0.41502522672155262029 0.527476792135909478;0.51745951230543618671 0.12910274044826178241 0.29812889687857246912 -0.023641901240990276234 0.75391111271535193872 -0.33697798461676725656 0.11865706152901779602 0.071180541717792936152 0.071733134135889636829 0.24397809990366220445 -0.075689760476545783763 -0.26990940963641013584 -0.3380212254792117621 -0.38145908539651701696 0.64158795430271653437 -0.47836701197519049256 0.24936536742240897335;-0.14591680231477058283 -0.16622867836865598545 -1.2059569371403557891 0.14694907211212140941 -0.26016787509994032668 0.40965882846938894701 0.18184271576459543063 -0.22167217613456208225 -0.19882043590483949869 -0.14539146452867340864 -0.091669034748078151442 0.43771366603309003196 -0.071505490816693967338 -0.070406119571040329252 -0.32959552378364209702 -0.24669117313131971869 -0.27430476084002136661;0.23958496953495586612 0.11763612886649288392 1.3479441341755933337 0.24944636531106387234 0.40650912047773452018 -0.16519591934021943258 -0.48302699494341316822 0.12108304384672703702 0.1413817257127900906 0.32708460733291644384 0.047013956497904962895 -0.70952315859023229461 -0.13569206590081767105 0.10651358270661714922 0.21206529967329762476 0.50081917999921554685 -0.33306009480802140077;-0.2709017850449593201 0.38337158978960234057 0.067611141024680923572 -0.22471285822030631629 0.025439354978142775937 0.43799917946063432472 0.025227089739783659095 0.10081765412932511272 0.11921731983197304816 0.39087058033823729453 -0.616022056773142479 0.7520189824577855342 0.014905485476517524659 -0.782564486102825696 -0.38451798107603385457 0.28783013650952138374 0.2842791772746482426];

% Layer 2
b2 = [-0.26216343392525631728;1.4634314680517062079;0.52300307953108116088];
LW2_1 = [-1.5891120691867794967 -0.16793871299473306369 0.72381929003095013542 -0.38170879975004412543 -0.058853650867768045329 -0.23112529951652724391 0.66713909064849807873 0.17820243370328270327 -0.15395032734983429834 0.084104981381800600349 0.28592522540797221664 -0.011810005865207549858 -0.026073241131133701592 -0.10174291281819326793 -0.11727546396988916544 -0.18369482190547631317 0.017627051780929253039 0.36424472418605258195 0.39983178344558428785 -0.37489535381292143912 -0.068868921789205159167 -0.076996519064217797124 -0.14050613586513971409 0.10423670971924541007 -0.085647421022972403115 1.4432655762650699049 0.18720159736782140958 -0.10871972745654724657 -0.1559838396336067079 1.3980402459053884456;0.8924950849363200156 1.519081712595113931 -0.12048328724673448842 -0.91864850722307034303 0.15373242535749195858 -0.78547213657281400589 -0.42185532109053364147 -0.078214983823201550406 0.33770162320398366962 -0.26915218133227586383 -0.53931964719210834236 0.29939772094136940517 1.7660925696794806949 0.35316181645801320022 -1.5069822863813555625 0.56616454503545265986 -0.87325489777823839255 -1.0650852801919694635 -1.3638114589660250697 0.73539821334476607184 0.093569968087007612811 0.33817371692568065633 -2.213040018786393226 2.136531850816530298 -0.047661858506383478207 -1.2841378621272478977 -0.26093982666797554959 0.14007719731437626165 0.52204924631648630395 -1.370632723007722209;1.0857806469508763936 -1.7562960104897098468 -0.59471889917478759635 0.91334757840973912479 0.36237694376996176793 2.1297809196028474332 0.0080962879425992267252 1.7357616564239728429 -0.27268329243699601649 0.82156749209886292817 0.077368979354609720978 -0.79515885198264713019 -1.1769940205427253943 -0.26378370758476238356 1.791997532024784956 -0.28088038490731404018 1.3319184824546008716 0.6592466184106637872 1.1005486198223681793 1.6671299167039475009 -0.32275711915716903677 -0.28847478161750350623 -1.8448889975402202879 -1.6325824052608750581 -1.3253714231561801729 0.45009314038086983834 -1.8781628378591841422 -2.4856323075591713057 -2.3884983965647896831 -0.8503321311570056773];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
