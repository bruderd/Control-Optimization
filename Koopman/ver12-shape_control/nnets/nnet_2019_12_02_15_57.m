function [Y,Xf,Af] = nnet_2019_12_02_15_57(X,~,~)
%NNET_2019_12_02_15_57 neural network simulation function.
%
% Auto-generated by MATLAB, 02-Dec-2019 15:57:28.
% 
% [Y] = nnet_2019_12_02_15_57(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.00085578558563;-0.13997476845163;-0.159031872239594;-0.24153557393661;-1;-1];
x1_step1.gain = [1.70372648671063;2.328882734126;4.26579695183874;3.82225345057471;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [8.5002729330744362102;0.57264041812928612174;4.3264521328814522505;-0.87795761360928836758;-2.2995366918408648438;-1.4524390042818404734;-7.9305068197787216278;0.70779715869719417309;-3.9499884463208796426;2.2092851401400790401;5.3279171675090761795;-3.5602983140299904186;3.9762735534182001018;2.6189507910045706218;-6.2791008056850170505;0.41625206309565276896;2.7232981135329517031;-1.3249499864143030603;-0.87159653622663424422;2.67158493776958883;4.7922181208378153983;-4.6760069777350672382;-2.4408819170626157025;12.734345998873735084;-1.1646860078085004009;1.3478087078153810907;-1.2095149179660265037;2.7221690210215339079;5.2128991045440029595;4.0054653357214524689];
IW1_1 = [-2.3674814930893366416 -0.52609499033576301308 3.1339474537646179186 0.55759910399044765317 1.416003799378932726 -8.838455628223693239;-0.4659873611374118485 -2.168812637109899466 0.30772232263429710741 -1.2399319904315047047 0.40319104117203002913 -0.46732314926671364441;-0.73364211815841218201 0.24399015862200776339 0.65134677632656046153 0.31576704185017123727 1.1840675901569295281 -5.4130727395128879209;2.8365224270851752131 2.1653817465720539559 0.65440203094420656971 0.019380327027312876931 -3.8825190366728752345 -4.1049976458067138907;0.8952530382171451917 1.0826260382123520376 2.6262878399940650098 -7.3982648351828617095 6.2631596155198066 1.0971590179570949175;-0.45363762886330022406 -0.25468671870455611428 0.33670763353613303304 -0.13657870297292809547 4.6887125320496156888 0.3986264222430926929;2.6161952617715775737 0.52276648227119326684 -3.4104358155115130913 -0.4977974821212770018 -2.9899743531102020988 8.1160967520144442489;0.74044439128849681708 -0.045807850348669840179 -0.41694440773461050043 0.060027474615049231099 -3.9597898255498162889 -0.62582696026888329222;8.2631162803235991277 1.6330965962805454872 0.7734456406916372373 0.013292491239516986135 -5.4637914837261885026 0.23289227710980775488;-0.78219662303949377691 -1.179714943434736929 -2.7476968603468483465 7.5636419041051334844 -6.3545560596494130579 -1.0387070985231290354;-12.708697237227735144 -1.1866331767915332396 -0.70051300567985519407 0.0024393956276983234585 3.6385893642320965569 1.5991609264124311274;-2.4879411651094507363 -2.6044198145779202669 -1.7783670244110767467 -0.51746588297581253002 4.3342168005294015032 1.6551010743702045946;-0.91194645131919926939 0.38114216055191785237 0.99461759481609779421 0.4322906073138891303 2.4123211670127688855 -5.366656358168665264;0.090830675847299369163 0.62217083362232883381 0.64953790870047778405 -0.065565373154994999183 -1.3210533160558426413 -1.7485394387535411198;1.6292690820460857815 -0.61894717083835826266 -2.2416927261779755476 -0.94553891330065897858 -5.9526803857602352821 8.1427062004343593316;0.72180147903255098552 0.48251703539354423578 0.33680323677678208893 0.13859699072549322429 0.46865329940025551858 -0.75629406855886738281;0.29046998607044804963 0.74605322973691579058 -0.31628971594619437191 -0.035858642506783326709 -6.6262231715897268458 0.23590208505431267683;-1.7445577999976142891 1.1090424430425456226 1.971428783628665693 -1.1388570782833922213 1.2936377122841924425 1.9419337451692391117;2.650230210923644858 2.0921819052515870929 0.62792964268810691486 0.047633739708295673443 -3.692473666374764818 -4.2041037565576573343;2.5249057010598949802 3.7069985412243608991 2.0992312641212791391 6.1655455596391073314 -0.081695619208202646666 1.806085821821301618;-10.755076776720828846 -1.7900375449863323851 -0.48109371554445351515 0.1374344296467355786 7.258459999249796013 -0.41023690562100578738;1.2236311830929151867 -0.59666031502708249956 -1.4452925469366701972 -0.57260706629667734724 -2.2430921717171763419 5.896543312664648262;-0.80646465773534403709 -1.5784330955846943567 -1.3839798244147705208 -0.65438851749621551601 -2.20542113887101765 -0.063214335584845487981;-0.46019586288953157061 -0.8566522565092382635 0.66051466219383692113 0.010811334040538456841 3.8113399937026990472 -11.996199921580172898;-0.12421270838708738105 -0.18780949837137597691 -1.0249190600266140372 -0.89320998764392400826 -0.069597942909223345365 -1.1711349975114355715;1.8367299357499635715 -1.3455743985188526324 -2.2632522085990043337 1.1392414978287606075 -1.3472698069683093358 -2.0298342954614545519;0.066752362018993566251 0.025010633258187843497 -0.79416607475414646711 -0.44600480537168590844 -0.23275058510797597133 -1.3970718333732203842;0.79958755819272375742 1.6796039848876871403 1.6121135492163360947 0.82785750785690592757 2.372732264598889973 0.24122909349245086341;-0.76197715908626539871 0.15349160702528868994 0.51788848737559955993 0.28944805288513603125 -0.31185972217404267504 -5.9576097302619253071;-0.59191285536507509679 0.43603944898527080554 1.1122934635579577733 -0.13960098949604507479 -2.323170424009686208 -2.8965414080182205758];

% Layer 2
b2 = 4.91708432266954798;
LW2_1 = [2.4264357093856889769 -0.26821127262693400528 -14.995533510500351326 2.1534519149348252398 1.1594963595199319073 -2.9666625907194266176 2.2481271310238799543 -2.2509541887674480165 0.17867499304007380956 1.1268046222149374902 -0.055348974385563763645 -0.80126669021918761615 12.288727542962604389 -7.0563474214538848273 -0.74951593711657238384 2.170543444610179673 -0.6901603023884924637 3.0688226415162085381 -2.1409886144650673856 0.047883002102865432348 0.13965664953192472031 5.0488563180649439488 4.0548876954265651307 -1.9463937584147517068 1.3943009235412928692 2.3596112728504881062 -1.4209722096209511655 3.192314164362496598 7.2756158551206757679 2.8625113137292972354];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1;
y1_step1.xoffset = -1;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
