function [Y,Xf,Af] = nnet_2020_03_15_16_48(X,~,~)
%NNET_2020_03_15_16_48 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Mar-2020 16:48:50.
% 
% [Y] = nnet_2020_03_15_16_48(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.87228643675403;-0.476741338298357;-0.570583158874601;-0.735295815959669;-0.680791079945982;-0.573699086004553;-0.598552715969923;-1;-1;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [1.32385043240331;1.48678477020836;1.76218855851985;1.5437138237119;1.39395289366101;1.57021217314717;1.9593253730506;1;1;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.7169984842571048844;1.3801155098992410331;-1.6607957950841332195;0.88878678872198468852;-0.98750471210867052374;-1.2645413745552080975;1.3869246937869812442;-0.78089918386982237752;0.94595099824521022835;-1.07828144469802778;0.54353439592900776312;0.49900853592683336313;-0.096601282089406437237;0.35614913309948487141;-0.075298193254001694052;-0.38376982566152340048;-0.57646143876517319526;0.2339832169062702194;-0.0646695197601141053;0.87190403315051734356;1.4124045476034565727;0.80180979189161116771;1.2475745967896223476;-1.6484208078714510659;-1.2195775844297962465;-1.3922103638118963342;-1.9349806012024022284;-1.2139919537494450186;-2.0255300326068046424;-1.3835510437332600997];
IW1_1 = [0.22747049287169879284 0.30308462908938293978 -0.63429495088681853154 -0.6173989568218269941 0.17800977536545695146 -0.10332622815652606207 -0.28581140736785742851 0.7885474647615754451 -0.57880087124884493921 0.43708950798623225076 0.31053825060182227435 0.38734385697089457334 0.7725400792525540794 -0.50610265417597266602 -0.63574783608461760132;0.060205407663382587424 -0.16829255198976170171 0.0087944028619671259228 0.18956629711367431468 0.01045180950366184254 -0.17057458131425190517 -0.16108851301176468906 0.3696458778411879087 -0.13106540457163062818 0.17127740737932697912 0.27592146758615065938 0.13149668334051606289 -0.32819884382428221592 -0.21962015286483782539 0.22825619031169031015;0.0055012290329774279213 -0.43843125278342226503 0.19064867060961943057 -0.12889166940913493464 -0.18202792235519785202 -0.58160023925311876702 -0.072327330292794742017 -0.28185883343879980512 -0.2781508177819062011 0.05715565301350148536 0.93416853836619462292 0.83413284256416619922 -0.64867797206794575171 0.36099830322370751734 -0.41721691623626250278;0.023387873750114425431 -0.36643299332129863899 -0.28219591497539586733 0.28315880197364656778 -0.63333097801371074365 0.0903488371377374061 -0.49796319788247400684 0.19965237582601194632 -0.26299249288871395791 -0.40705044886767427492 0.25435055184476923484 0.44828566935071201272 -0.054944103162500639026 -0.18890216229338016585 0.73139774814569680217;0.52224418911883718764 0.38898381709576218546 0.39959397660628209747 -0.061537046481719537283 0.1503014620526412215 -0.08055539422225169166 0.25458437600337580076 -0.14638881213113960622 0.07716155163561347341 -0.15268511344083546266 -0.14520574266395269714 0.51261491013091053937 0.29091036424923760739 -0.35990226936545666181 0.64609585836178828888;0.31822896961993241138 0.13027882669627188772 0.12168774237003832095 0.23816190784550045345 -0.55729690155042943545 -0.14573748835025049364 0.17481325569845518331 -0.0027824064316382900695 0.5572611275230013872 -0.28823214272500269351 -0.1937718636304389952 -0.57156879016557382567 -0.9540600432752697202 -0.1786744127034528562 -0.45275615053654799658;-0.2003402120557270516 -0.26050453286996683167 -0.38956651644751250085 -0.11942229020375315363 -0.29797763957624384679 0.45773229774087803579 -0.18750558571807501851 -0.03712269616842247405 0.22703899100457611282 0.079434748969080759551 -0.25245636995232700883 -0.10630046139266093042 -0.21608478495081528958 -0.84972717163950983732 -0.028318579621421320625;0.16980871789027190966 -0.17960261408308619835 0.51061394332343856828 -0.61188357211975386019 -0.088259748022314093996 -0.11227017845226403003 -0.040837197427036425745 0.77479312591917559594 -0.039583791515741664768 -0.21373869458507196994 0.51568126944549053103 -0.38117087214981004717 0.20631104952174245115 0.23194053451067536686 -0.3056740306529507345;-0.10516396837330321823 -0.02777531954471163661 -0.0021197985433774671482 0.093290846228757523528 0.30708034502107889319 0.42042336319253637011 -0.065856859396149977637 -0.85258143508588535298 -0.54327163627067798224 0.76859449423327519391 0.7876511172581635023 0.92914624536067724758 0.72483726977216822451 -0.64694879085330425639 -0.32903767328632810285;0.11218426478187849826 -0.11999766123637946313 0.46994552314240883861 -0.18718366044479789467 -0.11958469666798353381 -0.65539145579314006529 -0.016764463814450937529 0.39364639778999116482 0.036587700941266905474 -0.73296748882373408129 -0.02769549190795710103 -0.55112169882152983735 -0.029566347637156903394 -0.34174068308451827081 0.44253750601780522667;0.031481044696780376146 -0.25014767856494379838 -0.038468507255779174625 -0.16361443835932612534 -0.025585234322676703167 0.45539855016412966737 0.1830040720890941941 -0.19188986153370299337 0.17511402686584207067 0.79497798301602229376 -0.54764552598715554588 0.30800279326299051519 0.49441872230391958887 0.09415123499367082649 -0.73468617114748013819;-0.19778419717974099479 -0.19769684420967298388 0.1356346720736595346 0.38384300025224915576 -0.079901588996985212221 0.0090022945371605982146 -0.11578698359242198257 0.084693723449824037663 0.11952157738597099512 0.29547609229742416437 -0.8756785163319923404 0.561527301962834402 0.20150280180882576553 0.4467157504575897109 0.79578137316912211929;-0.32622112514249285153 -0.19517797761089483721 -0.10158001400381852508 -0.12425341401244677231 -0.096130551745752690351 -0.088726178522041926344 -0.3243148051701316148 0.22692215087128456141 0.2837167674682610774 0.55136399562572635524 -0.31575212924059081754 0.34427959557341675234 -0.25095183482741101333 0.053548625952044834331 0.47746666144861465986;-0.38335405485452578311 -0.58141928456617986143 -0.28926008292666272048 0.71323577439133001299 -0.57187949376247426692 0.24359822721691154479 -0.46741409234878450452 0.52474703678027478926 0.62775584028574582529 0.19179368587215556152 -0.52296709439802746555 -0.08781757077837874792 0.53195739166780253715 -0.097669069934646871034 0.47703792001762979069;0.099306466463243703302 0.52041184693417008589 -0.16361865269697944969 0.057700536505560458267 -0.33478474988272610702 0.31655429047219418859 -0.12045242739948817945 0.45572242804984086639 -0.12361671541986733736 0.52177224963534263313 0.72233966030608298681 -0.44251132927943437334 0.70394314563038817845 -0.29657916548626078734 -0.86423856716248370624;-0.1742926503439944097 -0.32996994272162516459 0.27381448252431461743 -0.16925597851664492266 0.018293677465715647845 0.48899587093059537768 -0.16254616615350486741 0.26638182244026126222 -0.30059825281901947358 0.47428168079187249528 0.90353680649461243224 0.53322135007855397948 -0.25023827701668072132 0.47038203159227104377 -0.070031479766840668;-0.4587585216268284527 0.03324757570604629231 -0.32252962854645916835 -0.0055713388374490843691 0.73560336508800994171 0.16061533152380186307 0.19022295678363987381 0.0097365724673590236388 -0.27348955933025909104 -0.28875213737925048418 0.59850886632491584471 0.40645762659981105047 0.5639546091506675296 -0.81006134598200518759 -0.16586987167496305973;0.18593260039826192687 -0.048856991007887679013 -0.025242582285078682403 -0.30459831966555911409 -0.33261859735439364139 0.12669619828625386382 0.035337322601715383252 -0.21144655121334351988 0.011239297983277135584 0.25944651387035788659 0.22866679376831688941 0.49240643801545797009 -0.23382918514417266875 0.24654917696096587121 0.47598792635250614103;-0.067244275886637866479 0.024403768802446872133 0.058489023268338144468 -0.40284243991052631761 -0.1763840064552432696 -0.42292496718426164648 -0.43805575480098024599 0.48345210816843975365 -0.05204024981927096033 0.30614335683434090729 -0.26711357533132806807 -0.40765748322827194405 -0.0041147760801779542303 0.070645428923654302045 -0.39871928118309135636;0.076461931629513910091 0.15916524405841181444 -0.49859234897218945859 -0.10549985902173575347 0.10429296233302001728 0.54777502387457932542 0.38977546526705192376 -0.11151785372609410163 0.22009458366272896535 -0.25153160996286838547 -0.47844811163162703771 0.555502471343189419 -0.24810298524444462931 0.55573457672835935295 0.11502701637294326931;0.11521373751156661902 0.23144370554500084958 -0.0099472559693381847057 -0.11750704722243301981 -0.10343865798888066121 0.51108608907091290785 0.31372546581181670611 0.16664928285831678845 -0.41306260560949326077 -0.62576187198913013621 0.79648462569429201441 -0.2707826824561931911 0.67765333495541657527 -0.15048379349730239829 -0.29918919178196445863;0.50286956191217502266 0.1509132928470930668 0.43726960487439209269 0.018409054052759166176 -0.62470737416545074616 0.0088355827347317734966 0.11016437818556183703 -0.55369348517393934817 0.41403740951629419698 0.90610678919826570521 -0.54044267230185383255 0.44235088164219821261 -0.15950872391915305037 -0.43132648009559260149 0.80584205833332633873;-0.0085965225130988434654 -0.38134429297919070212 -0.48122945118801396802 0.40008982707178547544 0.035438424694908071677 0.15037111351840215523 -0.40783373715003173876 1.1636198614432369247 0.019411734285567503605 0.31229958057198803356 -0.31726391586838864622 0.36125455257620697758 -0.30448326313658796716 -0.14412052851467591075 0.13532341400795191988;-0.0075574518391703354031 -0.3233767948633194389 -0.34346164826196712294 0.14936214949631024251 0.11597800558819479355 -0.041264497003051361923 -0.09356294083344603163 -0.37741973734288347675 0.19623443155523903614 0.34238322608033844308 -0.42579013511885371868 0.089994683107597561733 -0.9696564606750395221 -0.56564651654884379184 -0.87981192051622403305;-0.50806912798892911454 0.40039289542428951885 -0.040935922212807895892 -0.32530331651997629328 -0.29286230219122433294 -0.10913382456623074712 -0.59486084119838111839 -0.24043913484815834791 0.97598617326512371317 -0.37075267974439174434 0.10518822581883824352 0.6851355546306133748 -0.18020343283026593606 -0.34421768863125179472 0.01828843892666642823;-0.56013388018657550571 -0.13635821925692070966 -0.16778690988908090409 -0.60517017180119070385 0.17441910311613173512 0.46087408832515014412 0.040747410226996932936 0.37545400946432588851 -0.41476247250225062313 -0.33426142069107528387 -0.80451791261811778089 -0.096555313059176889334 0.47948745274620274692 -0.065368591916452709056 -0.17102681562028940188;-0.10872594617996436672 -0.15148883416230601862 -0.30958359435030374796 -0.16192360511488387842 0.14372043264713627031 0.030499864827655327748 0.1397851855672673782 0.70635041245776486463 0.15544595775233435719 -0.94553855786230933678 -0.52873719654030770787 -0.69215036061697143843 0.21692877090494366854 0.75044628043310313004 -1.5801012002355980801;0.24235575380176282989 0.017337146669378841746 -0.16573116062081746924 0.061957888919427953067 -0.09791871254372633282 -0.39284587374463358911 0.16588182303494267145 -1.2925048577331370581 -0.24124862576799943614 0.58392920779257184716 -0.45044324897035886712 -0.47485163288398385406 0.65133750883590246783 0.060053823024127213348 -0.18400227927942158779;0.13060203480533194575 0.21229964952689517332 -0.24091242422909361909 0.26413143554891255205 -0.25938622070678390985 0.47373891194408046523 0.020358141687159346522 -0.44553617127292821642 -0.12372814119729630411 0.63494616302046880119 0.63753151582124711894 0.064871395018827021639 0.22746790921400811269 0.60502347836467718079 -0.26874492417201822914;0.31300672688810221578 0.057414816080891273309 -0.32651950788770917056 -0.011101479615034548498 -0.16601380019258460408 -0.38159660843205145397 -0.0059751891920114454798 -0.25280751410098245557 -0.29227423065695584681 -0.46708680771969846024 0.79809159597558354537 -0.16408093691142966453 0.20005083067800630281 -0.93297477403109774219 -0.73092365037646434001];

% Layer 2
b2 = [-0.83455871243263790582;1.1578227282972402001;-0.77946598107549436296];
LW2_1 = [0.094070813808747877349 0.89975497413219784892 -0.3020874642948096489 -0.33609650352677772345 0.23277788936223703375 -0.11425455504470084789 -0.28882295230336579861 -0.071720281666669827292 0.064848041083771193471 0.10212724590450578122 0.053120277720736679139 -0.069388587062599663136 -0.15852252213736842124 0.10953679032493396361 0.077834349711120270898 -0.033121356712182928317 -0.082364162132950030637 0.2289824634657904312 0.35432927224151494761 0.035500467243148127461 -0.23025314826080348074 -0.060920979752483624126 0.2720360365052501006 -0.15137058891951896133 -0.46086698571733064611 0.2750726567060329808 -0.034502199189651930333 -0.43690997468508285806 0.23119981493435182163 -0.021183026928751277906;-0.035668989783183953357 0.76171058439412553387 0.38787722075592917514 -0.48656109886873222248 0.048932448911655331003 -0.2516442447284428785 0.13057778649385728964 -0.31328879754789701328 0.60923922670754049324 -0.45066556223611259346 0.37529762692684287551 -0.17221784062089887102 0.41417225095597381967 0.029009185712511292854 -0.13038683142328963416 -0.26108777023416696039 -0.12070794057847748781 0.50912733881976712791 -0.24334654125275287373 -0.44772962068338401087 -0.87299584825416187694 0.10429016901023677177 -0.3682243368999861266 0.14270539869590945226 0.35965018130744980107 0.35252154015966669087 0.0069205554884088664111 0.61703774524580323746 0.20435222027427363267 0.075045093904536383511;0.25478862929775841772 -0.088649340887072991535 0.72286802155431117978 -0.26192330178782669003 -0.72780612900153918154 -0.36992870147726997221 -0.25128049781602868062 -0.11760849318087851501 -0.82228573421339334892 0.79192675329839368192 -0.92532159057503260424 -0.65193925988817169603 -0.041593273142391931629 0.058276072387378648199 0.57301169961961861965 0.61273877308375335193 -0.32385096456153106281 0.23233021811976833915 -0.7649971749619079997 0.67214019601570273998 0.23011567285076361955 -0.42412541239987111563 0.27578655068027729813 1.0455638620453853171 -0.056402728777938580806 -0.2429003946971106942 -1.4869003632440664919 0.22715690112975908677 -0.91933601116991514601 -1.0194786905054114001];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
