function [Y,Xf,Af] = nnet_2020_03_04_18_11(X,~,~)
%NNET_2020_03_04_18_11 neural network simulation function.
%
% Auto-generated by MATLAB, 04-Mar-2020 18:11:25.
% 
% [Y] = nnet_2020_03_04_18_11(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 14xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-6.61476244115123;-4.78168790729211;-3.43018685406942;-2.82412655332444;-2.64483191635232;-1.5136077076615;-1.30425721015019;-1.44025699623069;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.16519490916944;0.220479430888531;0.410449045483787;0.353752268927105;0.440113893617127;0.447327029842908;0.735398683580084;0.798942235357947;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.2625537850511792115;1.3965680318065045729;-1.3155722261491860081;-1.2462898032938718451;1.3745645749709300976;-1.0695357840988968245;-0.89206482912366302784;-2.019192808825109875;-1.1229157518911909719;-0.32259156681496647945;1.2925871839537779184;-0.59504779621919889898;0.5311802792618764979;0.81748910184166945214;0.018162842456475074976;0.0024243606720266330963;0.71902070813823637518;0.075067819530132862127;1.7610331128005742851;-0.015664615585379557117;0.62450560605822935667;-0.19559382508900585718;1.1586526016007587803;0.56952100751563083936;1.882034041922561407;-1.1955656759992061566;-1.1942791144013424898;-1.4469600697505888842;1.9819021584330396291;-1.7586406740638416135];
IW1_1 = [0.17872585942202237619 -0.4503119326122022037 -0.088476339827490924073 -0.48234573130224739357 -1.045107634312172129 -0.27510744565276507023 -0.36763531105362740048 -0.4336908165070291199 -0.96197356963720925815 0.24728836124677427977 -1.0328195177457710763 0.66625118553130735499 0.89191481456930832294 0.072789365265699998431;-2.2469130220999069536 1.0280829708083929486 0.52463011245050683584 -0.92247786864381653427 -0.10046328647268235046 -1.0731628662724390644 -0.11124143305057242193 -0.44704779156976603982 -2.1719878440406210629 -1.2156408924737496235 -1.1197149294405093212 0.16110364008761968169 0.66334228398833450235 0.5456094144482631636;-0.14044955803565556396 0.61655704063728566933 -0.17759769989499735177 0.38038655400507498383 0.69628913603737963012 -0.040834387292603753494 0.32916121351138927231 0.51287011482291700037 -0.33795437331323724406 0.11129528210045985803 0.48816275959869043222 0.020636483759392944964 -0.23171567005477383683 0.010725310027695451887;1.1474626994141015057 -0.7309345977699914787 -0.30616012657997937474 0.1851822878192587174 -0.43929941765727847924 0.36065783181829486059 0.044784128147632412675 0.10728703938634831516 1.4917880957116498308 0.59580153676345248837 0.89453661493957270512 0.032970616066458159621 -0.029864509780115396781 -0.33617474036421346462;0.82812755205169807926 -0.011987436378508487325 0.39233912265930681595 0.24744081509128670882 0.61642869720561821456 0.94144529721159453395 0.12558777881241581231 0.29049196220197182061 0.66364662645056637924 -0.86297732608799981868 0.22803822611333768311 -0.53152963855257162606 -0.22023200539451140423 0.27551253815345588816;0.63502851499641244093 -0.10596083453369212202 0.50277081247271959707 0.019885488935667907512 -0.42706997265264173835 -0.69091613075229907359 -0.62142892282184392094 -0.38787106937284276942 0.6139975928820233797 -0.6454730197395269764 0.038641437499113681642 0.20225101702472092491 -0.21098402477403152555 0.082131688001711208869;-0.43551088050638703253 -0.81230700881353101739 -0.047136289893925417682 -0.67182894366764178695 -0.78273521223797737356 0.24794963762976410249 0.60870489325758803112 0.71831999999683138203 1.1621568968780968678 -0.12517619519770156744 -0.45074743010632445372 -0.058919556072264067659 0.63514568893066369881 0.0019881028260013036517;-1.0358858954229583915 -0.59324721055456086649 2.2044129572934862971 -1.6407122172657129244 0.2922844890295053788 -0.027728054306733779244 -0.98863558726049216574 -1.0368984210762790532 -2.1840065095557283925 -0.036089412087396903484 -0.048022017534690951412 -0.60763848281326537926 0.82763417608614553433 -0.10250505128563888735;-0.7308729896827016459 -0.84337317808975398314 0.22947314974896432238 -0.75576324566487285139 -0.48222540666002056131 -0.6804922541477831377 -0.28174757585511500668 0.3840906340414593223 -0.091376351695682950238 -0.58268630037145741074 0.35901514097158582217 0.92629230921105520924 0.26579820415994209748 0.46083644081489216759;0.3032508243122453151 0.89535085095526256715 0.095501306737794472435 -0.4841983211997529235 -0.24682863055127118868 0.064472530097717362096 0.12757997961810862986 0.33720699403146048301 -1.2875036095082164067 -0.44939819998085245301 -0.56695524267333141655 0.49710433857456176598 -0.20509915095601649604 0.38581893109943776743;-0.16566363017577406813 0.10214749399072890756 -0.45998270886189429607 -0.91875556304704497634 -0.0027025417149695554926 -0.14011750165462846796 0.071877115671705862909 0.17200556174637066098 -0.522442895679537056 0.14555202964249913666 -0.58506971517105610392 -0.27191759152971117786 -1.094819362676003438 -0.22119399868396175113;0.7335436420925921519 -0.46879719080442272539 0.043451812530352698638 0.26688304566880605151 0.16782763365727756955 0.28294818944454375176 0.074320697348422726236 1.4174738544684133412 0.91933661438072977745 0.5860188992866487423 0.24660264051416783126 -0.38433143851085910248 -0.27382169507335268888 0.23715969049584556538;0.11223234936659165495 -0.12612057663329973023 -0.076650608776972384284 0.35626414075793200187 0.77005480680783611191 0.021289551536446352925 0.15016488123442323088 0.75874996602963140635 0.65083806121716747395 0.75214412597456770104 0.70054995952378629198 -0.5620009846697299194 -0.27221311853919200052 -0.86808562522069276923;-0.8803021108515529658 -0.5907326033635615925 0.13097808619117692897 0.39813576228760694242 0.12508665269330229708 0.24448584077019303029 0.0079423175807525267511 0.21185997552426993895 0.090412427049645083255 0.22181021561105263018 0.8187948855845499363 -0.21961574471419362253 0.58232329890847900344 -0.86813036691265776934;0.39064316930690456964 -0.042452741480445817246 -0.83248054470281029893 0.9656015954024943504 0.11673258978292712362 0.58398714515916283485 -0.14324007887879461332 -0.24717992670976290936 0.27470555246031164165 0.15993594698178903446 0.66471450624788852579 0.65507653248422104131 -0.94610077017368499064 0.26254682542326962524;-0.028900450174933960817 0.6948544344858775812 0.61325511185990200236 -0.34486911692395200157 -0.055647569797248851164 -0.19523140952236606172 -0.11097613881707105166 -0.45879950720365086925 -0.063597345014463027568 -0.76038228512074446108 0.16765342708975486397 0.07482744729729355615 -0.17990564575303558126 0.4785257917115199322;0.31365888119938167833 0.41533487820356329578 0.0087700927545997803964 0.71750956557185074924 0.73173922179720951586 -0.38892524578434339855 0.40610240939209413247 0.50293489527726553678 0.77827163937577981123 -0.67508835030210423422 0.40460978852694623464 0.25182367110334658022 -0.45980523891714536466 -0.49776040245379726823;-0.28405410914333356631 0.77027243000326151012 -0.32492625820725901109 0.86604043248834605695 0.25480230436355660872 0.18399778569594799071 -0.04483283592270297796 -0.31800227769475203354 -0.31788880693720478199 0.48392296220371683324 -0.60765535458085206955 0.40625105368580272103 0.47631264326361755224 -0.72092254030669455922;-0.69677492245746341926 0.0057605542448931693067 -0.0032216713731567023227 -0.4351309329732887532 -0.81432155516009940843 -0.81881737222594508374 -0.76021872882781071912 -0.25951103310935991209 0.57452563730955352739 0.3431375067866100359 -0.37974120389967930267 -0.96412845117208489931 -1.0323284054784733765 0.045928671567700141143;-0.83707110233320247694 0.33931667209400756535 0.35504203757016478127 1.3616653403685148316 0.44025747464909703588 0.026493402261979010631 -0.19121137814022148849 -0.51994866563632446965 0.39419025742677915591 -0.38818479664045552058 -0.0071240050875649094109 0.61484232933000082522 1.0390606509455526663 -0.38591000643462924913;-0.48660496506647360482 -0.863546424086440223 -0.050041422312854633159 -0.12514073908987555228 -0.25621304565501823447 -0.014065906754805266449 0.35858034638437052966 0.1767795673643368648 0.21114461419319027757 0.13284091182868612568 -0.17159841869844030815 -0.089001921103869383045 0.88307130981718151563 -1.1749973403935787264;-0.43374550629011093816 0.65095608511687574893 0.62231753072862405762 -0.6781159882824351337 -1.1249163521648390951 0.37957727293726395423 -0.44984569394145096366 -0.68733253454716802811 -0.51870528898578793786 0.56427616164590077563 -0.45438101841528122371 -0.035781654883976998782 0.96340977003921035582 -0.36538104143259275691;0.76609247369547739392 0.082136388283707506552 -0.03289845213919911221 -0.38726494084127643935 0.90694823867693497021 -0.094129440109017081806 0.87685728226361325799 0.61612698520582920292 0.69713051052888064252 -0.10681416110594371682 0.63339910380636443854 -0.59529457803885665879 -0.43532957214470208163 -0.55992743600067229615;-0.30648254374687011747 0.78864694190077044844 -0.067038309055830108685 0.18101284661372182838 0.45200256373513225672 0.089740476618401385234 -0.18681232800907573988 -0.24522245897939237702 0.32175548488527117019 0.08445533535091558075 1.0253002942712254875 0.27735692322440402835 1.0207777711748089455 -0.54540430680020901555;-0.30228266755806454391 -0.60038385142363948077 0.88111300216660271012 -0.59384294414557503572 -0.83711626445561715393 -0.98358396430208760997 0.11374413549132146584 -0.032138913584758059538 -0.89543045222017458862 -0.081146586321747440906 0.4386546902720933061 -0.78354640099362504735 0.79576754516013548102 -0.34102423779456464414;-0.2287274988863143288 -0.66914551612152373128 -0.79408756731093799175 0.4304315792091544246 0.52874304307775121803 0.13250318921003059747 0.086288176920770162659 0.7166220008701746913 0.39808881269376511503 0.049206399401855574482 0.30314414210093831858 0.67106490251778050382 -0.67896096017514950827 -0.39794721546995731609;-0.27358157054488141391 -0.61069153279518262334 -0.41888420120233393895 0.36226443426270538151 0.18454145080032438586 -0.10285448842529398839 -0.15320280375561798336 -0.089828235215621582421 0.034799909056138417229 0.9109195934714292564 0.50323150211657463604 -0.28304514016567500212 0.60953631595104584839 0.4174001313799258206;-0.36349580109530377214 1.0625209774907717897 -0.36197446520741322074 0.74146760545775336482 -0.13333628893905866142 -0.64534561286882263786 -0.17613196349895121617 0.17111113947515427247 -0.028956251473887924253 1.2057745614210706453 -0.60207341210365161732 0.029298038365822350049 -0.44642406169475767896 -0.034914757788457033427;1.0888264133494169883 0.081772741060858411544 -0.81716878476885035365 -1.2672948554387337694 0.30115033395565499186 -0.45986523538119977728 0.023686045283498078501 -0.14013512390219215464 0.67456237551553588361 -0.74012960651365522491 -0.45020676162059986014 -0.19985477830481671035 -0.32606771951188961989 0.56886602159485855079;-0.36814140124857752667 0.045817258197428531452 0.27992312141737135667 -0.032083041914259369243 0.19951915256039481905 -0.93152901707329183179 -0.36605514483630519074 -1.0926389744817739391 0.17168152677544132323 -0.89575359846892455007 0.31136949338776453988 0.58983235651154453105 0.83032359484232409752 -0.17490261775976506664];

% Layer 2
b2 = [1.1448961932109049666;1.0870596721749881119];
LW2_1 = [1.7440983438569099828 1.3102887117854220556 1.1349334477273704813 1.9744943904222707065 0.74876848897319747689 -0.6285723016750264236 -0.30646832464654699679 0.4331314887602369379 -0.065349205529516035673 -0.38424507363928794845 0.52688189758166337207 0.35614665528748057355 -0.19647774798111680705 0.37197390107361588685 0.74881851676763044878 -0.97580563117125285189 1.7429931432489762511 -0.78955363717007920332 -0.22655481597072488209 0.026028262425089754989 -0.302826693830538618 0.62431756554279860261 0.22416029390945871325 -0.084335442022323528488 -0.47826805398627458832 -1.3403703599744589692 -0.40256379981309736715 0.54855246064197493716 -0.4045522752271170086 0.57356500211872440964;-0.67376140833403341812 -1.0788565480267591212 0.60523105447392089307 -0.47858524611775754565 -0.77453474159855939529 1.0408941344663564799 0.80824301469127912689 -0.64439811194307150544 -0.85499663443507978311 1.2481928368378425453 1.1994390664237895017 -0.73425332114052088706 0.98761384498732229797 1.4143159354554706297 -0.62772935137426211227 2.0093582004623331549 -2.2067069203011304701 -0.092698682743758475944 1.0859274707768329371 1.5965594491594106152 -1.0134285985936870578 -0.70470129460069597105 0.71761557644174878146 -1.1068138781030636419 0.41195644717898094456 0.90871179806955071356 2.4334337724578469775 -0.64074809310928182438 -0.77122903972303069597 -0.75164304596684172743];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
