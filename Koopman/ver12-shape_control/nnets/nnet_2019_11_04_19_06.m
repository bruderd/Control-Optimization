function [Y,Xf,Af] = nnet_2019_11_04_19_06(X,~,~)
%NNET_2019_11_04_19_06 neural network simulation function.
%
% Auto-generated by MATLAB, 04-Nov-2019 19:06:20.
% 
% [Y] = nnet_2019_11_04_19_06(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.979760528962744;-0.0967493271686649;-0.123235760701103;-0.232445808105878;-1;-1];
x1_step1.gain = [1.79921859849069;2.40876684978895;5.00906977894087;4.1712236562878;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.9084793016762562345;2.4276246976256512511;1.9188696492191725795;4.5597084726602252758;0.11912555301136720787;1.984888934034280128;1.6093795366385037493;-1.5547619910779388874;1.0187937664737372057;2.7574981699320733064;1.6898204099734195349;-0.13940248492560733395;0.41705505572773221568;2.0551761979975959882;-0.52584711930408378766;-1.4335446779527591943;-0.76627551862325071763;-1.2622974156722328587;-0.43727731605170844231;0.76022971518934689961;0.70689933449095843088;-3.4621531051057785611;1.5788743184419096188;0.80576899952075076161;-2.5315900192934117641;1.6161648675138116094;-1.594624023417591907;2.3975855889335782045;2.034314082420046077;-2.7545698229806743207];
IW1_1 = [0.21768466214730050612 3.1986039109446022799 -0.79008865278456241743 -0.024921426252386674055 3.307972152136888333 -0.56544040017613894644;-0.79607865471716465766 0.80660981042789958728 -1.4402403597071185004 -0.0015426154466477723717 -2.4161682585136818879 0.52655254972760401344;-0.43084824544402622326 0.62493613543233250684 -1.8676742078957726534 0.081585164724310127449 -2.1224528331914633839 0.76387669538725211371;-5.1881904294812999368 -3.2593366843316333714 0.40028700856602561498 -0.0054982616890203762916 5.2806893750455676795 -0.77243952861629627815;1.1640085114823104373 0.022095414398841287107 0.06799277053342475674 0.71175446564978273045 0.2191985522384522489 1.4017085333125298696;0.21228629217815139785 -1.5876703553915580969 -1.5638533223931998517 1.4304979946994778039 0.72271457294893015622 -2.5722252280472108765;-1.2789231713211155483 -1.4001563030717629754 -0.69765076554163185651 -0.17269400643233795423 1.8460631704950727361 -0.57144534516580092198;0.019856234804131331351 0.70671562034381085748 0.82448888821510790681 -2.7426408604889789267 0.19480294069657877465 1.7538489641353256498;0.1059574111271214536 -0.55499471620474849498 0.26348603095044426103 1.4977027979403978453 0.40584416639653597692 -1.2087846096765224591;-1.0838492823661833864 -0.13108575998674656948 -0.31647398732890325013 2.6620804177076360375 -0.13297420752916744302 -1.9456257248597936815;-3.2171384945065226724 -1.2197320108391767057 -0.032141445892562167663 -0.42090588064816031322 0.69107054570811810024 -1.3658694703051390551;0.67851873500375603498 -0.30903147198177916 -0.39822546247425139043 -0.3614648716993781874 -1.0597967665794154613 -0.31137364224452485084;0.31148081702372737434 0.2457157860103580671 -1.1005655554824740339 -0.88173897707541004642 -2.1329608374161259654 0.10404647565932506614;-3.1873606276131010162 -1.7367909734713831149 2.7346998746527377833 1.2126834932055159388 3.9667913058822041883 -0.15130203226136232364;1.8979503884893527133 0.43869249744983701556 0.088996382780068716833 0.63080074676333641737 0.42716117327542840743 1.2018739761029206825;-1.0163992690186007817 2.10907998254743001 0.94876242363487550691 -1.3927422122292261175 0.26227143468427532857 0.43443339768901478859;0.50665124065063338321 -0.71954610270488961188 -0.81914988633869412205 -1.0464241006695673697 0.69955299774447010641 1.294426300142936137;0.72860112869874793518 0.61265724931671805553 0.6856207209872585695 -1.6912281634142805054 1.4484100393091237091 2.1142428955751482178;-1.8826646466174419281 0.67060262148124694104 -0.24293457382928271282 1.4647954499733515377 0.31505302479710955987 0.84250466952922564712;0.81785137665099028048 -1.5794844145681870007 -0.48435730617115718699 2.7953046151110187978 0.40290561369464178432 -1.1129104178045314821;1.7611039935094641162 1.209461149553581194 -1.2361840552482918909 0.73588777647918945934 0.77968554253864619241 0.91889400963191536498;-0.97306312671562655847 0.9771466372392152433 1.6231570610903747198 0.26609842734283611909 -2.402700138887195358 3.4241448419376894208;1.310202650526973045 -1.7246697494746721091 2.7919416350535466442 -0.99554933276546253573 -1.552923425306741434 -2.7299672938625505481;1.0796024100457055628 -1.5862404582952542853 0.36183341226224119414 -1.0402505297001800599 -0.50713841375449331128 0.49132062142331989207;-1.4892503822689566739 0.50567008037613359051 2.2503965977974242918 -0.76175161374511868306 -2.588834786762412854 1.3595575904487573471;1.1278653147496568998 -1.0739117068410124478 -1.9021571083341979325 1.7328327530760603281 1.187995950341414142 -0.75535808386343361587;-1.3227046620486868633 1.0608198254397418481 0.68720257675148344045 -2.7529561311617491981 0.67039074360980432932 1.4341104575439331814;1.4890385589611903061 -0.52204672856482892129 0.43187992396707813869 0.44411299462682524153 -0.59964876008438505739 1.0264098928474048034;1.1296134298341817814 -0.79947126056167661101 -1.3311882457745893849 0.064711160593798555674 -1.1193205876498908413 -0.75608962629323184235;-1.5996902429706603144 0.20209075012732941046 0.45739944505376500805 -1.3022027163490907942 0.49133679979016942063 0.826617273313109302];

% Layer 2
b2 = 0.33772600651758177825;
LW2_1 = [-3.1805760640195126498 -0.79307467234610828921 0.47577645153751829676 2.7041040997387137956 -0.48986061605832392774 -2.2081651120360974438 -2.4663009887073452653 -2.5854172511004951396 3.0017072590844828817 -2.4597360471898750411 -0.30453088176939158149 1.7432886502477522583 -0.34026490506095941058 0.081162584789398792284 1.3147783348151780292 -0.38596940539812646387 -0.55120167053685420466 0.30907010174247029344 0.39015026609352776443 -1.1800498839594875111 0.26183243582049847697 -3.3037191997367405527 -0.13144220775379444888 0.18043266893646769944 2.0350412120551508721 2.8459411306226907179 1.5311301665700676189 -0.26769719789837381763 0.31864247389900551832 0.076910268905813913842];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1;
y1_step1.xoffset = -1;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
