function [Y,Xf,Af] = nnet_2019_10_19_17_54(X,~,~)
%NNET_2019_10_19_17_54 neural network simulation function.
%
% Auto-generated by MATLAB, 19-Oct-2019 17:54:04.
% 
% [Y] = nnet_2019_10_19_17_54(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 22xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.68923562185917;-2.55976352764815;-1.66744595493019;-1.41306720234763;-1.72853430470702;-1.68470124822749;-1.54419012603737;-1.19832180182087;-0.920880750180581;-1.33378768429983;-0.903705148758009;-0.769375356764508;-0.921590452260902;-0.517525552348087;-1;-1;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.444678794681692;0.407242452141652;0.618934520080224;0.719788700875025;0.575604345071666;0.566071618910878;0.7594132340494;0.84999063747477;0.721977894496726;0.767034792829403;0.984427608258322;1.50655381729089;1.08895222470763;2.05283111042465;1;1;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.8445262270182820608;-2.6469468939893610049;1.4551278417324782222;0.7738037023694341876;-1.133239830544362281;-0.36210405544564772118;-0.80930848630256246867;-0.62085080332796638292;0.34508504834574027509;-2.29452007207100106;-0.41842349340093676346;-0.14462959034285174931;-0.42812986558484794619;-0.18378049990407949177;0.49983836110277329867;0.34405638166831081781;0.32178631894518411327;-0.32955076735414373656;0.3250383463328155309;0.85984288446427403763;-0.73407819813856323155;0.55671538600597314517;-0.78289535322048109389;0.63890802940785795805;-1.3570741876598007014;1.3865120499046337255;2.5604859831613429044;0.56549657622139071211;3.0050117967017317966;1.7402166729576791226];
IW1_1 = [1.0790681579680911906 0.048692574990526628353 -0.66298736493347754095 1.3200191460067471905 -0.077348353309881198725 0.16431098422343767829 -0.3371320832408354895 1.5433321818680363346 -0.51870319919705754064 -0.38046631978947914599 0.34503151932703768345 -0.023085856589812200901 -0.26354645615054128616 0.32419850539984518267 0.67308389031778181888 -1.0787787557890744505 -0.51213262135747961157 1.9057910011711911569 -0.046202970402738859079 0.96394229440209266979 -0.039632839911663692023 -0.35197388503962590001;0.64748336664263195228 -0.045277856964797309758 -1.2010881507356165887 0.68309153139176947978 -0.5120636393949907772 0.13227272898171843485 0.10677423891242752985 0.51123216008271654687 -0.43087424487411463137 0.76775077486320075781 0.23324587718627426414 0.22502802536897284491 0.022799865780106190472 -0.15048135696222508795 -0.76792463584936343501 -2.2451043920965014777 -0.12456494702698292509 0.41389348907809386802 0.13406491724201999305 -0.13305971295277493893 0.0039692828971289442416 0.032870649762020802409;-0.26307480458643012211 0.10415637938191396605 0.14661898267164744092 0.55659621600783926176 0.093469644605058049835 -0.11211479880381079732 -0.11005262468528281827 0.45207766793450748777 -0.012737657705204829747 -0.26978823565889858971 -0.00663610983696306337 -0.012845903467945996718 0.055008587580766689362 0.043003585541763783562 -0.53298989190191448095 -1.1555457470760377436 -0.3227295152303501502 -0.0057368461273795239019 0.41372886045696738444 -0.26938878154904893902 -0.14647028375579917991 0.096777308757312247023;-0.04378457639363511622 -0.054382788275881339957 -0.12667790501345060905 0.75987809333758471464 -0.079386685497097042585 -0.28744150460306711059 0.29054545040657797639 0.62111247891234255825 -0.59475572886497130032 0.0091006763047146652101 0.043983065191769900315 0.087529552374306207607 -0.16826921712812289988 -0.44547327432428912575 -0.043776975097579315377 -0.62049754511988064465 0.55491991870947843246 0.50551515996008433707 0.41893118997461836761 0.30399759939959142274 -0.16559393960426416204 -0.13982362290429459217;0.01160661104522243102 0.57881500981092326441 0.61594594298865945614 0.77932092510967432286 0.92654357793872843541 0.12086297780653013079 0.08106823521443289049 -0.0057322993985333033085 0.93797057223863489206 -0.90786518050378195444 -0.64351251109451046428 0.52655461737192588156 0.10369479693125946418 -0.35911484956033479232 -0.78897303583568523244 0.29318861907846305304 1.062286762971307974 0.30278507579981672748 1.0732094070113975537 0.66355071228866180366 -0.26391525866110143728 -0.35752940420357831597;1.3411078024580416201 1.0079086377910446704 0.8703487044082593993 -0.42006114449837056446 1.4477756625828606118 1.315664778242978894 0.87623624528783461418 -0.077339265312187460699 0.78839398624219259037 0.059315765347417830078 0.37062916979177679133 0.66501282152902407852 0.24319567089432761464 -0.1096612819235308206 -0.84116683674949599414 -0.92907731294339412909 1.2863205222699940489 1.2514592370226609308 1.3878577366816027272 0.92292581626836134312 0.74614624190420852923 0.40939501259097565988;0.023196704852505953265 -0.2710928982884406313 0.62412021251776028663 -0.010040303780798563379 0.54285731817275673095 -0.063767224024215890532 0.08668759853166195517 -0.14119671782623435807 0.055362140030289302972 -0.14099079219097102045 0.51490069373496405447 0.08266349273415443677 -0.14414661740008005708 -0.13233412616553974495 0.68489241524805755112 -0.48017388971309943324 -1.0040084562345970021 0.64920622441211461862 -0.71461632651680317974 0.99899591487728134354 -0.3993314861650029135 0.28635840671584944506;-0.81592053178588541673 -0.74784564373211326327 -0.46795476680632508426 -0.04873134544733119522 -1.15175138006813782 -0.97428234329209550957 -0.25562991468661794281 -0.22349798894603919996 -1.0066885762880821709 0.076541334177240571979 -0.43001779214541913099 -0.25078275350629419815 -0.23096088370584860749 0.47073599246468583734 1.3189955447300345526 0.56286226095772995404 -2.1094339219891495851 -1.0983524196891805147 -0.90150298133550388346 -0.30344419595753646668 -0.83060052422383323645 -0.12736510814303622641;-0.15743293729227680888 0.017597823938139287026 0.528844230300656859 1.408236336412103773 0.083865353382425997242 0.01461399799755090656 -0.32973378628747335162 1.6327554374424677608 0.014975448698457197172 -1.1586567392867530568 -0.59109991108683379579 -0.81133456346391019665 0.32560803178908348521 -0.15676364357857197618 -0.13483808586919773798 0.13725453106559221128 2.273102120791009817 0.2527566626150075102 1.6598924965818451227 0.064288746801766938344 -0.55645790740513612072 -0.1348446934925017493;1.0336620359817554338 2.7142403020032501715 0.28065036224906236839 4.864886250660128475 0.88774677766519383137 0.96506407855294240594 -1.8049563609931238428 3.4616808324545260689 2.1968446201251619065 -1.3937421622186327852 0.88364927658581182701 -2.1540915156219937465 1.0231849670240571459 1.9841436401414638269 0.79550341074737107583 -0.20976240775122217963 0.079844495638627221989 -4.1199739025865618203 -0.35470377236659889064 -2.5144106896231175341 -0.23396094574783213305 0.73898381300807047811;0.46512559571292833027 0.13338292673335067073 0.11997245263242420354 -1.254723319368809209 0.27844799660165425736 0.41000056564056613917 -0.36865936893307821309 -0.97009409635616161705 0.86958038611285681796 -0.09339201784053301203 0.014863357347317444554 0.19702051362479880425 0.16437576059486219693 0.55227908791674173994 -0.031420951972951881304 0.67974532904095030794 -0.95931914827129571854 -0.29631040550388898502 0.046245885480283938085 -0.89864291346361724333 -0.013033252088264567908 0.33213409700264351354;-0.33973188388870051435 0.29509057986064668455 0.030919558853333743709 -0.373393167896031275 -0.16946168727542307297 -0.54621196160530671726 -0.17022662042837657936 -0.14188803769873686855 -0.26486105115680497191 0.15739126080960519349 0.10736126206014351414 0.015497750700278081423 -0.31416508970914897025 -0.017037500041177450899 0.34256704319538483494 -0.10694556163947208094 -0.65648890329600417815 0.54937137703275229494 -0.5079806507395556725 0.08794266713022119708 0.33002762111038375092 -0.23514688496772054305;-1.2905931581651564066 0.34357288342242187085 0.8231263412954639147 0.33712190661386265411 0.15841821370931985502 0.17068714960684741588 -0.26949142964886313445 -0.16781936905239450142 0.49215927192211988972 -0.74700668732561725793 -0.42553119396345256975 -0.54412332424307874312 -0.12827181215141852944 -0.082796442377324072637 -1.2778476753145691092 0.72609378902018373303 0.077005343612089952043 -0.26185640787975655863 0.37801354286371757762 -0.69591986728667887263 -0.12777848005315359248 0.26384537700942289895;1.118197365920608144 0.80795769990464438859 0.79670628274043164829 -0.16254902842864066281 1.3219447996901554365 1.0223392361928771432 0.73621452667974895956 0.023317383135024797453 0.74884813429442609323 0.0434237642501763485 0.35432073737284053294 0.4563107995225931246 0.18148633652817891537 -0.15912302210990869611 -0.93158101561862916018 -0.60508231112796129203 1.1569014383133209289 1.1162979798421905908 1.5795714405317415885 0.26340720120293065198 0.42551276476947574867 0.57799095401096323155;-0.088031714219755405337 0.50550305900912750889 -0.30888474501979890086 -0.30607342987355323771 -0.0088807623046399629396 0.62375856710098898095 -0.12041964134747064341 -0.18683842047095733374 -0.21899290148434283343 -0.4098057405836648126 -0.13074614499449760396 0.2430388063253541564 -0.15003958697194755278 0.026885141309815153987 -0.05315792001715034798 0.52080903911053222366 -0.11436585357312248346 -1.0307656795172916997 0.54003692971600625317 -0.22897691741257328313 0.57035924903697177157 -0.041734892584773634894;-0.011754267730979834489 0.36082300497412284068 -0.36363988587630280414 -0.094553125879471691673 -0.21226516673769230126 0.18030283987847400828 -0.040465541031212998169 0.066789999770938926482 -0.12667534334222535497 0.05269340733268173399 -0.28597031278199280813 0.009143776303244329981 0.025819890966782440417 0.07236976267750250269 -0.30822060525130001718 0.34772228922554571096 0.24769395584175887826 -0.74598855101640837439 0.76019716346832666432 -0.28372327424619769864 0.25351831283582426657 -0.25366753178191442375;0.29910257932702594141 -0.55083939155850980551 -0.19402380634216098709 0.99691786327383857813 0.091561679357697503545 0.092705511685397756771 0.20676120717973178742 0.70588275651494847285 0.18450301523740575416 0.14721486298338054555 -0.32425097438583666554 0.13273046759555165441 0.59518171092769456276 -0.17339918463664702464 0.29348984395165994554 -0.57795460692015376836 0.4540310921738711647 0.027732296261679431626 0.31436951368562682241 0.52260780686792718264 0.028990052037133395846 -0.15472419038933843405;-0.75000734727031015403 -0.61860037138148027402 -0.59969942239284645957 -0.13805481890013829305 -1.071279484167199314 -0.65809885760480479888 -0.33907049845218650841 -0.14628178215305764898 -0.78765060380082851932 -0.023084488476229354792 -0.41750362725584505563 -0.181229423763232117 -0.061141889461703013975 0.35121240264428527089 1.0839238389648306882 0.39222681934246728108 -1.4762475997982291709 -0.40042206527773849256 -1.2031184183394993958 -0.84810752659090582473 -0.42558007119942808938 -0.10397679483999734684;-0.23784150708958554099 -0.027973454360538951152 0.56945838587451902413 1.5691113955393105606 0.086350419773473172103 0.011031861918083332025 -0.34768046072610958586 1.8171964393463806431 0.042948234057963614874 -1.2660900664486784972 -0.61665795898345576731 -0.94650521577267865414 0.33183239704376549239 -0.13989630180150539052 -0.19642107248297818733 0.42069612228194475101 2.70095848423286089 0.044834997236689808076 1.3473342914513657398 0.10185485745567468552 -0.45514274224384293488 -0.1477855021215593867;0.26090154240099133753 -0.6023496697997587912 -0.045310873217532215973 -1.3160422434351191079 -0.22943504440553583179 0.099072136295484447555 -0.0641130864732022826 -0.29644899599808699486 -0.43938042798485021923 0.27931390131173305935 0.1895258930332886782 0.26751541633863684666 -0.077893769036660009952 0.03286915539018228638 0.55173083304887593492 -0.055661832857082267634 -1.0911545478432034262 -0.84155820264665925912 -0.6580847665389160106 -0.40537940273999334417 0.18171654958769886679 0.21970049364364202527;-0.11065514781909475961 -0.15327985515410658124 0.41217691405087292233 -0.27312030065999742812 0.30267345795039407585 0.010752340218894224783 -0.069143464132342680184 -0.082548432114104286494 0.23254397747655225492 -0.46958195160799548473 -0.38698646304847672539 0.02104701028884056746 0.015099432965181663197 -0.1745445065123274464 -1.1239672488977696663 -0.15317539948918690307 -0.0021153149719558249353 -0.161365674576325141 0.048470088141950307126 0.43906422998197597307 -0.020779851793704555429 -0.15566822900063123636;0.21489994105074386455 0.47246282067385769743 0.60151271556503183024 0.13062086061918345981 1.2025966761078590306 0.57982747873331819122 0.42485053714671783265 0.00013535086469659840525 0.31079771974491454678 -0.58365533574743277967 0.75376591143667104333 0.29231589950739289563 0.0020668142564029198804 -0.10895480875870221238 0.02668434977952157533 -1.2987632722410107355 0.32558287324839546573 1.9135660946460122389 -0.23659401047000649942 1.6811978672060199358 0.1961768265425713198 0.83463079434063791595;0.18941971720380906818 -0.052213230744900994418 -0.046107662230152106353 0.56877802700343571551 0.079444170511420580949 -0.316793279632452629 -0.13636484692259301377 0.14155042713042648161 0.22856986313130395194 0.16257744644173482973 -0.1780401992389566701 -0.12073765831971589035 0.33281910522645624662 -0.0019279371814666414198 -0.62281075889381876109 -0.46412740956805365045 0.67499846572126287469 0.74177495399530823939 1.0764826584289670652 0.34794156878757120932 -0.7096803738741325196 -0.0079468627039644169907;0.23084437206972352463 0.7762790438492376266 0.719906196814426802 -0.048067690427713409551 1.3783947891545984543 0.84374233186834268761 0.50149107226044642438 -0.001410501133496326609 0.25984922830861434395 -0.61461950468157411365 0.83418476389127593773 0.3318222906567671604 0.006231192977577910963 -0.12657183806139049587 0.11809105278670871397 -1.3949075315442587275 0.013683353383652022139 2.217551487317501735 0.074378176355805625253 1.6282358836974184513 0.15775318372769020492 1.0105291330812626871;0.044490755638024993834 0.31012461698881882421 0.40204296471905032195 0.088120901112881400152 0.48343605727238386782 0.45254226177348622073 0.18486135249734628183 0.017162865894058465521 0.097087475595047961763 -0.41986425669948274075 0.16780249772633631933 -0.25386633550867210296 -0.27058351475344860626 0.073900763603644531452 -0.72727289192326016742 0.87276073913971974338 0.7501287533789720019 -1.0244004628414189462 0.80814593403514811687 -1.0662802912158397817 0.35077310004657746845 0.30367827089191190559;-0.52358035720811124669 -0.11058897192986590075 0.46120653561662933173 -0.39735356467609317388 0.12308467077956630753 0.075334210219806518882 -0.025693990606378280805 -0.37279580005860840641 0.20858615465588759008 -0.31705233386133430118 -0.36101090347084074939 -0.18345448971585875952 -0.11283537512694391536 -0.2367687781003386116 -1.3835743395378083953 0.55004901348763046709 0.20106608681480669931 0.02811510839486564689 -0.19704873670396200191 0.015860140827836530231 0.0858047628980248972 -0.0027461241791379362165;0.36110613085127546418 -0.80949620125477128596 -0.54559520174454145813 -0.75507230824336457609 -0.77858076378329976741 -0.049706584114119059525 -0.39364840328515737777 0.5527694563849356868 0.078389766400585356165 0.83877212541162771142 1.3579568164158015708 -0.5715127102189613284 0.94634087690927215508 1.1183735709202873299 -1.1739416256492098967 1.2271342577624242409 1.2122062315089872087 -1.6019704862473822526 0.583159911324098168 -1.1969188207623886466 -0.0066380922782845394603 0.48844764060606604694;-0.18037001704352675913 -0.94605251152425862138 0.38543059608911284242 0.49443873168237423288 0.60441594824750544124 -0.75747594046696620218 -0.38604364341703828467 -0.18504539542616038617 0.35795426006593938917 -0.54198928014389546881 0.53520578055656831129 0.32480845139257474852 0.0090105463071811289777 -0.20465203139717894065 0.80114951553547097962 -0.90883776245711134223 -0.97460985209129458173 1.4933268570152342658 -1.2993088167486885887 1.20902168008083577 -0.69188344841165005938 0.3657701051392059366;1.4213824467071400903 -2.0617027312051505739 -1.7531532387074133528 -1.0279020658387583165 -1.1367694763793576573 -1.1871535566911453063 1.9346883811976089973 -0.69403917978046680837 -3.3540565650436549028 1.7841773566209429003 -0.61832909251149992258 2.1135066933101658293 -0.90759490430335743039 -2.0605699490846416388 -2.0673871676722654911 0.26020176966209412894 1.3645423705907857581 2.7154904553120946531 0.59488149115121191635 1.2509416353037370317 0.16537455956810545588 -0.23273756168463688443;-1.0943969641952970839 -2.0862390726916775208 0.17223106310151242715 -1.7072903567543233905 -0.48288594250942457053 -0.93107328700028912927 1.1865478301346192858 -0.49778472392558242854 -1.9103106260386935045 0.50952649060100840828 -0.61865114159862644172 1.1983351578242924518 -0.62689704792815081902 -1.2768133091493265585 1.0171634789007539812 0.82830773601387330807 -0.65314669311884909764 1.4562229176476506609 -0.0026194966151380605184 0.64397864143582361773 0.16791705187142025313 -0.20425005033894350071];

% Layer 2
b2 = [-5.6685301294359256019;1.8903857552078686677;0.26882933364694178158];
LW2_1 = [0.25498128991318652625 -3.2794495261676037678 1.8872872110691583103 -0.023642503180896039944 0.10413423980136121694 -0.045270871628520975571 0.04717741230695590704 -0.056442119542568662538 0.19831774866861118234 -0.024686269724454021346 -0.074125994135420592013 -0.053431233304444034071 -0.57209835590909441372 0.073511275632047665129 -0.040965661724799151688 0.12747763147077248447 0.012915587365629345451 0.071973829705864508788 -0.17164503167726904986 0.11481528237261709458 -1.2408551025455458738 0.043706808957847044506 0.0066707347938891360661 -0.025509390883687324547 0.0080753873148333311233 1.3012061317953982353 -0.042724182479639452592 0.012157362949623972889 -0.03022318573098612543 -0.0045944937686907064145;-2.118555223715853586 2.5502486972344051708 -1.9734859392809298573 2.9614805509062271938 -1.3739295929480750402 0.024253465279129554633 0.088084934177744364514 0.05739441677583859841 3.874947703352678019 0.54343199303570166592 2.7374994663088942914 -0.0052278339286715705056 0.64448196000839474973 -0.075373080216977569878 -0.037013597485462138015 0.16237220595598211847 0.35439724911588083023 -0.13342022982050627533 -3.4669217188424847897 -1.6094281297645542939 1.3959464795902591927 0.16784761003651477163 -0.12498121693371586072 -0.15742682915839914526 0.028159952225823018518 -0.89490839963370671928 -0.44073275098551140116 0.0014925473994623580411 -0.44255875879316636246 1.5564830966151215197;1.0375615749947999511 0.56769737779637785557 -0.010907294840865373528 -2.1408628307503962951 0.88872733519633650978 2.5547002447567290773 4.0653613096544791716 2.2871687750221765256 0.45997706173984942435 -0.021372830558691408021 -1.7141965208955001199 -1.4393872915640577581 -0.18849576688214533804 -4.4479092091787943986 -2.6418425163986487547 8.9719582915351772101 -1.137801417342632071 -4.7277822752527676187 -0.38343099828029647558 0.39205819961967386389 0.19287808339890660791 3.1929096601160962265 -1.9795758421288953688 -2.855271135626125556 -1.4071660719393601635 -0.11112584117763711633 0.47417041608411419906 1.1674568297033274256 0.016321658852658755406 -0.018767436989671100467];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
