function [Y,Xf,Af] = nnet_2020_03_04_17_59(X,~,~)
%NNET_2020_03_04_17_59 neural network simulation function.
%
% Auto-generated by MATLAB, 04-Mar-2020 17:59:27.
% 
% [Y] = nnet_2020_03_04_17_59(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.64461055725381;-0.871688009843114;-2.03050364084259;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.595625433730374;1.16438797570426;0.667085656765604;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.4006977273734544376;1.808817526956747912;-1.9431286290527960414;1.9072553818147683913;-1.8074764574742159251;1.5292356798581379085;0.83113745396896310247;-0.57247488048258443616;0.95717036618627615585;-0.44508739389292745203;0.7486337520862131889;-0.51938933262729192197;-0.68839764759962474017;-0.55186480670379678415;-0.10550764547987753761;0.27485369670736453651;1.2465957947286288032;-1.3348068573660722969;-0.016679158410922961808;-0.36091944145782800524;1.1099683010452965348;1.1318046901430944828;-1.2605536913530046572;-0.032427855827852104798;-1.8077264748080796863;-2.032762182755253999;1.9211400387455421779;0.77727247626278772596;2.520350046718730308;3.0527435107574469875];
IW1_1 = [-0.69980557176273117115 0.24234070365318605145 -0.47513046086140658941 -0.01544061728164644598 -0.7604814158078806452 -0.12698792123743696258 -0.47949165672348242895 -0.74021387514563552479 0.66882840334306192798;0.07598750410676846645 -0.051041553542937947996 0.47582039422185956612 -0.91288392299993204038 -0.79886745821230242814 -1.5772864806858357678 0.53936336233256987338 0.06487113561257500105 -0.098565645608329574556;0.28190246733554202851 0.24776086089087001607 -1.2968358884195765324 -0.94346849272471633441 0.37132638033680026579 -0.15147427115331027481 0.79242318569831970976 0.0018917456893573492138 -0.76630478161191573072;-1.2370737574766950129 0.25219936503589462928 0.12553082226577774727 -0.2741911602129279979 0.581260642196380517 -0.23781821144285872349 0.50808765998417393384 0.080755643169324736741 -0.78928550853001688825;1.7943272739912936586 -0.45705507624454400073 -0.038543072647842152589 -0.65797230515121929439 0.86542064548706998384 -0.53574110562769472477 0.16632751795426647945 0.82782709711354784954 -0.46246732264855172634;0.19442776787437984765 -0.82458619586614834152 -1.2788310254464563265 0.12542239566639129533 0.63450686378126897047 0.0097661878751926570197 -0.16325815472203358825 -0.031731390296419859087 0.59894940354648695813;0.021199482953623432352 0.71389065597698175836 1.2840995421790044606 -0.64600346687757903563 -0.031320406530364670872 -0.26184108466003652715 -0.053368616439945573693 1.3039561873442868656 2.115495456837302779;0.10341968466834167151 0.74963446027287061746 -1.0679168648963657251 -0.57448206312158456299 0.41660544878893640552 -0.92134577209492074523 -1.0528615550640640919 0.71412461798986470729 -0.62229611150163699484;-1.2550592790112191643 -0.052922905332947980939 0.55969762479206908168 -0.013755206712942055075 -0.17100511374338689397 0.91902793929807469198 0.21822190079032774412 -0.59668127284001903909 0.17929328735011890172;-0.077866735744240633821 -0.48346791981801506832 0.22859885153042369677 -0.44350430354907188768 -0.2959401135948871997 0.019784285161556433574 0.7649494453950910211 0.6246322969838931094 -0.15394175248517449894;-1.1850409119856102347 -0.94631906438999724429 -0.25426714231025487889 -0.10565995677389292129 -0.20765787198698626437 0.98660858887226010605 -0.28490495332807974638 -0.51654418688294412298 -0.92948008060397535601;1.8116543459752723066 -0.11950585875053515439 0.95151983635280601437 1.0350896132628200075 0.099239348401172516878 0.59264100676655384614 -0.080569253337237592416 -0.3914816017662451908 0.19779189336060601367;0.081646770972113424936 0.16382307798584100356 0.63463444518860345767 -0.7216807645461902343 0.10509993403352432817 -0.7335211164915895754 -0.46819755796789175317 -0.45731387722069516411 1.0884953618150663424;0.20921401337368691897 0.14807770859916510875 0.51530115107919405304 1.6240980727818488116 0.14732144066450947317 0.85680403261343907051 -0.22523462240590588768 -0.32499013746575466932 -0.026170904017359202659;-0.67439084796811132883 -0.039341401237580633787 0.013506063354344793534 0.37457309147256684367 0.030009507920887815158 -1.1014962105816539228 -0.32334334914045748111 -0.86535163202081455402 -0.12293398313635441055;-0.24571003674101329906 -0.98781025853702497663 -0.92088175760964674499 -0.17754487781867106522 1.0025896540276892921 -1.174056972957314926 -1.1499075245712242488 0.42232974472241513464 -0.19270740263782487611;1.0665474396230882892 0.75736794431531884175 -0.58410708727430116216 0.95052989183381497718 -0.29361422095698735957 0.13689579437976578946 -0.65016936530506264091 0.21611729978116195339 -0.17954295536046124826;-0.58659700067338527152 1.2770692332397177715 0.46364114696051467179 -0.43698574798167100219 0.58202438218167684703 0.59499694546747783352 0.96704805650778835613 -0.0054373485156076206692 0.32561680814676147167;-1.1580364576800117327 1.2632334707353818359 0.035688569797395403027 0.16370825947318864979 0.37983946825852310525 -0.89586465424616423814 -0.60251999059385363822 -0.25270572766062993075 0.4357894576800550035;-0.1911544407241850263 0.71123270268448712805 0.62056241115686971987 -0.44330845123847478773 -0.62355765394914208777 0.36895324808364160507 0.070394217355714522322 -0.53968466633080114381 -1.4459460760969917725;0.11604059719729926947 -0.4244182364674873309 -0.068148859743221879004 0.034487650171878672656 0.33869864554155315606 0.76159747618092610288 0.069328654614524268252 0.79332025095609881582 0.77851541764229459375;0.54229727613684874932 0.090762723685063356749 -0.23393323037858559932 1.3101043353550911874 0.058184630408799557777 0.54625899929945620492 -0.95537237936989949372 -0.24963923365791795828 0.14888299063207446893;-0.067188182793064418763 -0.68325818730260590161 1.0583171576577694584 -0.61695321996898522254 0.34205080367070528347 -0.55237587718781466783 0.79865322143214334538 -0.45069940807763536617 -0.27694171257534905273;-2.2942548115621854699 0.1804684373105813755 0.57418976182589731572 -0.40799655767512771343 0.35336048113870771603 0.93897311775748959484 0.7186891035362910074 0.59156305618258464563 -0.083657298167125193622;-0.99892448471181038983 -0.73165745691445993604 0.44508563914664744932 0.33424871431495822849 -0.44704355337161116868 -0.23050878459685891775 0.95653323137328627457 0.34826200034300847097 0.63734824070587703382;-0.2344533370760603086 -0.099816979774487626931 -0.85748148602321239142 -0.12793156887223050555 -0.78464431611205709416 0.98451760634924601057 0.36393233827663828972 0.20398150865403483212 -1.2139153768306047976;0.49471357485068478965 0.95574941394052970178 0.93075144647700447376 0.46670786715864337468 0.84476022872217582105 -0.27190007325108450642 -0.67358176177812545404 0.28067610723614183632 0.23597774099551946381;0.63841052475225301688 -1.3589802307464267095 1.5117829308838324209 1.4924485478066464861 -0.22588340338871748525 0.54118235638377898411 0.21485472015671361334 -0.92959175984780084701 1.0538025484218767058;0.5580246864851871047 0.00323989233580585477 -0.662477829339145452 0.027374009120215845453 0.12414696470492682379 1.1089915532329674974 -1.1226217120498549473 0.96528299820266394438 -0.49435766926307517233;1.6583788329815971618 -0.42106910606267122787 0.35836365804563974358 -0.12611533613450448543 0.49623353139819265101 -1.309176390050414085 -0.21703160235705395986 -1.9620719545009119855 1.5277292882331627855];

% Layer 2
b2 = [-0.77222657661784566141;-1.8243112475351468404];
LW2_1 = [0.56027789938631611388 -1.0299298723608805162 0.38800474960639108613 -0.48680955862922647981 0.76954882874639940482 0.26451983261455430663 0.38231688838008748288 0.41092371285691525751 1.265656494579488589 -0.60017324460053955715 0.17447618391472030641 0.32422872584393902518 -0.20136922096010190231 -0.49908976854842057591 0.056484274813396039006 -0.22378575194877084464 0.57551694840224976168 0.26129285913301586453 -0.026376406395163660284 0.40471979824010062554 0.48122544069982564618 -0.4050921105955860857 0.32264862888164147492 -0.30824214784657905097 0.30026877074338248486 0.64654776759754783999 0.46023277605618045927 0.42067922192713413931 0.31220314354817924052 1.1302561370335668656;0.77125094990755382884 0.44334650337811787324 0.11341755474919483493 0.64553970171710317594 -0.044334631438332550157 -0.001450211639844845371 0.4167317757665010558 1.9693621640180460908 -0.24174110099550016884 1.2994472882952254889 0.54510718433608540412 -0.21575378733527966757 1.1289176595843082307 0.55138841894290069323 -0.91139902438062181389 0.19998801320745868138 -0.88910850239302419151 0.11097059520764998575 -0.50483212360190954371 0.6282225583758128673 0.94511760900034413879 1.0027686663094674824 -0.91060243043364730298 -0.16545798375191811402 -0.87639709978301438831 -0.12070853407303719362 -0.12034242291704583261 0.89705669284201416946 -1.3577623714992481663 0.96678497877552771467];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
