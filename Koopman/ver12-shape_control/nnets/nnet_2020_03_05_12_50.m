function [Y,Xf,Af] = nnet_2020_03_05_12_50(X,~,~)
%NNET_2020_03_05_12_50 neural network simulation function.
%
% Auto-generated by MATLAB, 05-Mar-2020 12:50:43.
% 
% [Y] = nnet_2020_03_05_12_50(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 11xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 4xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-5.8084067642857;-1;-1;-1;-1;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.156451017283982;1;1;1;1;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.6837616544999947088;-0.98374577953685349296;1.0009889007039460829;-1.5014868710907540716;0.83155350755652013284;-1.3431955044205290406;-0.60482197252803138188;0.15530076028189548909;0.37848048690028346375;-0.40844430035984008454;0.46985309468010799661;-0.35026565892575628469;-0.55377842361250095848;0.11372883927606912413;0.41690280858146760989;-0.033411795993000953375;0.62322169117491621471;-0.08753545813545286769;-0.28108315609418682568;-0.58794391053703476402;0.72989794147985243011;0.77451905960283695673;0.52634772985785982513;-1.268387117579492962;0.7341847806076680083;-0.81759626266502594127;-0.93791512723629533177;-1.6276525888459476565;-0.82804145415091601201;-1.849660247155789472];
IW1_1 = [0.3797986501398537551 -0.043320053834477262322 -0.111873494297699827 -0.36075670136692367107 0.98220001792600153401 0.54310411869214036962 -1.5001024348846816459 0.20286561175877979024 -0.38418270538931553748 0.67389161315086065773 0.40467419156582978834;0.15205867474595360922 0.43822946048584032752 0.32317773450683912051 -0.65179097869346391825 -0.78598372405356975445 0.34123412375294059906 0.600860985739050113 0.86931525321033609188 0.24659688451214567539 0.64400945456053659832 -0.21303933809917566244;0.22990175614005520233 0.25819201551532855454 -0.099937935241769165762 -0.48889203995967184246 0.48250584775488686295 1.6016230221565657121 0.10517148245315191546 0.50255343087073445218 -0.97426501625132888584 -0.24323034990380676401 0.23119750347883441521;0.016017732108103185928 -0.0033695324149225040766 0.14525067173823974498 1.0992883261299593034 -0.45906627741211070148 -1.15502776181562683 0.23335127592728166501 -0.82308579035178797145 -0.010844451054244200888 -0.21330742276468792062 -0.91139572054769824039;-0.041283101508184351369 0.27052651179131470549 0.168306867997522841 -1.0113213911753606844 -0.51391926965099565816 0.48738108102385169218 -0.65157050023730744837 1.1417826715623680123 0.34768662414619133649 -0.34545649011305817888 -0.26388647042771795626;0.52031511898894122758 0.1080210667104150174 0.30668276573719877032 0.58579412001115149788 0.15897054922491210549 -0.70253292313396320523 -0.70425547721618797503 0.021253099138116047367 0.39156665302424337183 -0.079754281061916260098 -0.11099166897519280317;-0.31575215413226420669 -0.11741477040425095379 -0.11082151933663958454 -0.96727990970171962015 -0.27838441910657840683 0.75310355245473625807 0.64257692226402984836 0.32774393646305183259 0.62589415556402872021 -0.54522893334595279313 0.51749434523537785058;0.0040381366881165961513 0.075359599226526935434 0.20971816109405883033 -0.74911496804548871609 -0.58431474915125480862 0.8497867350352759086 -0.60785670884895659505 -0.2349814257161761677 -0.19859947487364704166 0.42068540981176466564 -0.42223475704197460656;0.15237771403517291757 -0.40520296667615313124 0.22410132501969340368 0.84639776764158758393 0.25723233827894737002 1.024859230627515716 -0.39256585636761481828 -0.47896836899891087613 -0.64794484053538836665 -0.056494210766273762758 0.31833575697686516959;-0.072157625612622677824 -0.034118095104918665095 -0.055226562488123132066 0.94486221396026148778 -0.72315590745930136141 0.057519080899288421715 0.91941091386084905501 -0.76902235132377405602 0.2205478743607343084 -0.43734909281382117197 -0.86200428955729035962;-0.43864990567358613793 0.57456843609862862099 0.10603117820614242628 -0.75706909308830427907 0.16096508543056228802 -0.10754290487048681624 0.11593426641149646994 -0.13025197200727989255 -0.71280180888986655052 0.021403860424568519477 0.23499734291423923782;0.13029535141336234805 0.022386158699043545023 0.029516144551650476402 0.11738651782664184797 -0.14189380734083226199 -1.575060865888729289 0.45123779675841352299 0.026574176890732777168 -0.9574846628471560539 0.023238184948347860581 0.16563270196594109818;0.20855126189088585287 0.11427347943857738 -0.14983380230445861314 -0.50096902651478925073 -0.29772659804499745917 0.41778323431678909827 0.25174696201742247093 -0.28001011624515903531 -0.59935946795617567329 0.14320617775548991069 0.25629981941650842314;-0.3258451901043336596 -0.26099938914129344747 0.0018137831952886856318 -0.15345415334045986455 -0.43270222321794682419 0.45774896529861103245 0.71339198582872920262 -0.52865989971593962959 -0.15380380391789563732 0.68931349092550719959 -0.72339471468171567814;0.4310434944164046045 -0.69773556995601071495 0.23721671678197386868 0.59607654389725561739 -0.13722514804830077129 0.25637357094856078055 0.45464399683085515713 -0.53504942877412120517 0.43289637212826426182 0.10588207778616554045 -0.19212042977537110988;0.71695729001424923776 0.29889215829170456828 -0.12607888632736916068 -0.99507368823099340283 0.2827719888810551474 0.77019910646348388461 -0.63785499288806823959 -0.057868154785201228463 0.24242735169448204058 -0.14678214400123104633 -0.59569753889831955629;0.081785667734890668545 0.38981496663120557278 0.090414294150756815971 0.22616275872552701887 -0.076439716221082656955 0.90294563886109191486 -0.08858835356990611698 -0.56574503666035746985 0.25736009528066600138 0.47004306349169977519 0.24282287270594959949;-0.84503035027991557637 -0.45890858484719809773 -0.055822406321151402109 -0.17414798267658038178 0.64147627514340976873 -0.02763319526021688205 -0.45105059541125569478 -0.79461027454735566611 -0.1298770622763929794 0.54283208429318563493 -0.33086903216099694536;-0.89965303868151491606 -0.39153481492817238108 -0.0015596024674281606243 -1.0605365408233273783 0.099258402519707453204 -0.47117614114463868269 0.14276363774697750642 -0.17387814197536707872 -0.61135892047914808245 0.10676183885318878131 0.18272217913972024772;-0.31658289023175451016 0.0056311479110418075078 0.16713824262482881999 -0.90209998898441035031 0.43551781197987521344 0.11651677904843163458 -1.3867108929612093071 -0.095743052742073411765 0.11355213559794583023 -0.81385863136527081263 -0.024806328438221957738;0.4670194217334207587 0.32487115268094945986 0.12035145969740443372 -1.0158911540867110457 -0.37618031665090367888 1.1135049252592492675 0.10748043696965262073 0.67169466199904948045 -0.42702392785221587879 -0.17085648783397919259 -0.13177544871024843287;0.021953732814250372096 -0.17035936697017575736 0.31244078771177208331 -0.043195593657573722046 -0.87069638976318919354 -4.7464572043479091867e-05 -0.60739747760294826584 -0.86888383141813851918 0.35101134357807678432 0.31479875893445025126 -0.16994638904124134693;-0.067893929477800651906 0.13421295148454023827 0.21820243975372516365 -0.82063674389466478853 0.21913053311348196228 0.067543112888725484466 -0.63501114681309844823 0.44707040415874732542 -0.51023485260937495589 -0.44438239001488266666 -0.1798732948438088175;0.18522241795952296139 0.74506550255839443242 0.081965421857473061418 -1.449870481143973322 0.064615611483351015343 -0.16917033001189910046 -1.0979393169096893779 -0.091176523783952065361 -0.15543311975204660014 0.022252444225200257444 -0.39473005006275357909;0.33684088422710112276 0.48910193892117087566 -0.15529493256774776211 0.037752649572552851587 0.93697009544304743489 -1.2862713445041116245 -0.24240003361942288884 0.57802252264017006667 -0.6119010196278157343 -0.083271876112044312945 0.24424203308588571248;0.039298660809672848748 0.20309634755233277326 0.29292359466309131344 0.38005590742321887499 -0.046162269653950899206 -0.56864273443954593823 -0.38598788065613093279 0.20371209550030752733 -0.082418839596379397938 1.3312602204572641096 -0.10363557748064025632;0.04577184227762695623 0.13306222803576661651 -0.088571676254903600189 0.13157247082915912717 0.11829362213755445499 -1.0924375347183246099 -0.019739872237622864415 0.88138947056926408852 1.1564646864170669005 -0.038629819203961981988 0.23944877993524596449;-1.2506070038195646887 -0.98524769205783591097 0.31102314207868220208 0.52602411668103876696 -0.11515021207972106487 0.015557715276887200406 -0.3837552269576008368 -0.10304335620981062982 -0.55091699102295377255 -0.021346072730434591941 0.31053755884324357739;-0.38872601818812146934 -0.27348149892488660129 -0.31153131022747237999 -0.50749982039470176165 0.98343551211285462621 -1.3112416600852754289 -0.62214404386817356851 0.49018284101131553987 0.23364106382856447697 -0.047264608773488890614 -0.093571450854652002405;-0.073696579790876348692 0.45936335802239403048 -0.043243177939000655707 -0.86810369360476513645 -0.69861434786326159774 0.57016304472295387118 0.87983649405139974231 -0.039509028413313856953 0.032732200154279557369 -0.41828896118902114676 -0.035765071888656053967];

% Layer 2
b2 = [-0.71246800221577144541;-0.31539192621974371233;-0.30008324626491794662;-0.30308348001031470975];
LW2_1 = [-0.08109348735974719613 -0.071397096882137592311 0.021784989189828411066 0.029093693544712993793 0.60275841103898630813 -0.20081331473182303937 0.056107661349293326547 -0.0749833103579312793 0.1393129270718542756 0.043037858831150764549 0.63241781267522256815 0.0010942652255268650596 -0.59145269767151109619 0.1969257537413513226 -0.41164701921067309298 0.021997471015021162477 0.10542258568249394945 -0.05447371256436236292 -0.063139526081817567982 0.019649355307840246643 -0.5875532958851420462 -0.14670984142323517663 -0.32073866356304547853 -0.050407746898097766097 -0.28001734700181329929 0.034694904935417769654 -0.18965566372117165228 0.19369108595541995044 -0.047364096591786891688 -0.26605888137285799155;-0.10018409111219238328 -0.13208708741076125026 -0.12788854206762098609 0.0093245417737578585593 -0.29964874287426335187 -0.79797723094523387299 0.17919125246363182269 0.014217882444525134847 0.53853813468915567864 -0.025954968487290529244 -0.54373032610405303 -0.69236450091394596829 0.077923842146286670385 0.03137623267974962854 0.35599101306771496755 -0.037440529855267870585 -0.4106563407781302355 0.292926731564771059 -0.98589169718290414757 -0.0027449431675062143168 0.36757064134088590635 0.80045002146530797038 -0.27668402619521098584 -0.24778098811149826264 -0.089553490088703904815 0.058245519768554507301 -0.19043427692146649988 1.1418229536394004509 0.99208233700205927796 -0.55520913821555628598;0.24866794503563072194 -0.20105229794508350238 -1.3901762729681275133 0.54904409452284874682 0.98712117053111103626 -0.068817082318702621491 0.41887994879841988771 0.75660746041243087667 -0.46764508577832120118 0.044546151483414939132 -0.3985819303217902343 -0.81357724131649822308 0.07953628856747069209 -0.51738158202340123193 0.11672059823247053767 0.26034064452564942282 -0.051556066173094064475 0.54585238638848787573 0.37889332523062868585 0.33556254993460266078 1.4703183878692296371 -0.62411992572827501569 0.044249769080154030543 -1.5172491780692136665 1.7317643729428748856 0.27624921698978233131 0.67237469347972800282 0.72329596043166433095 -0.53590540449681300927 0.019553433030100823148;-1.2613442342953220532 1.0106907025119749033 -0.63402228719748576768 -2.1076130703499096342 0.557189833194614903 0.6953165955900544315 -1.6311198564058395633 0.16834972190830127525 -0.03828643786557153067 0.3799505748002565686 -0.39545913879949490255 -0.23526716463036603799 0.4667237563713408921 -0.39924633541147480642 0.011173964005170121047 0.88741819806504962376 0.77618982675793068982 0.84179255704320810061 0.26829795268932443708 0.70459004265551006263 -0.80899718961377875548 -0.015289966870212959305 -0.86544944729960271435 -0.084271571611004125746 -0.26294125409228807921 -0.93075880832671753495 1.1056525193448150102 0.36720069143361117048 -0.38364689120606543238 -0.17024654384966961262];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1;1];
y1_step1.xoffset = [-1;-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
