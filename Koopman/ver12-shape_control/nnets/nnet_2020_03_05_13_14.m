function [Y,Xf,Af] = nnet_2020_03_05_13_14(X,~,~)
%NNET_2020_03_05_13_14 neural network simulation function.
%
% Auto-generated by MATLAB, 05-Mar-2020 13:14:55.
% 
% [Y] = nnet_2020_03_05_13_14(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 9xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.13597274236491;-0.564490261118094;-0.603992927227137;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.877367887961462;2.03673252276017;1.90099745146735;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.5634980986357258637;2.2751421390106836284;1.9466151897834436113;0.81021446390321694153;-2.2821678995195924244;1.6682842275255105324;-0.31200430882376017916;-1.639572817973375507;0.35932120499020547832;0.31702683220837679645;-0.13686444710871809027;-0.28344514459665642869;0.34897960722231669006;-0.17838020803834370165;-0.21395869121862517992;0.61580906251748113167;-0.2819629804826970787;-0.68540015264724829525;0.042084195324678386196;-0.32201806626474493989;0.49734080801673796746;0.96529226358111985817;0.17555172245244171636;-1.4352635945009297735;0.59341446035677924975;1.5353296332066672658;-1.6121064289418778337;1.6435551869380238266;-1.3072314248136729375;-2.6695305092755137188];
IW1_1 = [-0.38321117124451592462 0.095852260878901723862 0.28147618374236399452 0.5776607397608755079 2.5131068621744825364 2.1577394179348168279 -0.6058603258057200236 -1.68752709894551578 0.11966689777171675424;0.30221466657906631559 -0.27559352079775623068 -0.40180750263729858585 -0.95882455862047566431 -0.75031200006243514711 -0.2210323279022901044 0.35773043748502808548 -1.1371387495231162212 0.48224947720682215246;-0.19725404019941561451 -0.033274002071436520334 0.15016505333800711508 0.015935848725189948744 -2.5089861480322754872 -2.9646840482304259723 -1.1410318097874232457 -2.195059714835297715 -0.17752127394572767005;-1.148328874979362535 0.87487263396038295049 -0.33452853269055804475 0.28265968020664988813 0.041547830990348436075 -0.29900342597461171401 -0.14925463560997753731 -1.0756999444350272555 0.71976172761372714248;1.2400504523217874553 -0.092242497335863024577 -0.43855282254459670988 1.0867293357398140063 0.33430408279787071635 -0.42383573117360462401 0.48586861362106631423 0.73631552549831147392 -0.8635707526042015747;-0.62577829750225855143 -0.36434370642263191886 -0.01708892070193724147 0.83406003549001983544 -0.45680413755307908152 -0.50367175952582654563 0.60813350924910503092 -0.27569602906418588795 0.72948470628440786889;0.29125260812410830313 -0.20942164636323554183 0.018055133979897837471 0.47225211572301761809 1.5270343566894422072 -0.34403814211775329834 0.098869435186922011161 0.54113240428938913507 -0.60386134861461870926;0.24407045648839234553 0.62628197515214389934 0.12034003192370154589 -0.84215304518593003813 0.4245502643753492622 -1.2979390681769575888 0.47528321754082891726 -0.78988708448654398886 -0.57409226497762910757;-0.79347182466983201543 -1.2436150356990338661 0.23753759438601093623 -0.32621425358121047822 0.096749731999791629966 -0.64311567964120042173 -0.0044745013545253314868 -0.62010898021550009407 -0.11906879737745376668;-0.99722701812816594291 -0.52927520882417078418 -0.050958860502984773544 -0.049707740328349604708 -0.76783722990805414188 0.081623124493689261372 0.23577713108149350729 -0.67916911761446396856 -0.89156561305697912267;-0.31770480633288145089 -0.15627555310527432852 0.1651159666795487535 0.75055161356486899127 0.082528722885109553897 0.71607306021295391574 -0.31832042955230577252 -1.6405972612944019762 -0.43217379486832047109;0.33971317594881406121 -0.096612773716294730875 -0.014966129133121522377 -0.44009662112678932244 -0.53172772701145887275 0.69342315852504488038 -0.10823205935906410335 -1.3958875026186241541 -0.26239428391967745124;-0.093954955029443384951 -0.33091095105255358133 0.84415209413553848883 -0.36865873461982751058 -0.41127541230210490353 -0.85982307669718527343 0.37324532909588209462 1.2399048980460858349 1.0129229359956590795;0.78704046476403022314 -0.5060696657125168807 0.25084431031327214523 0.18748060004899272379 -0.50455778381643245911 -0.096844285183558004304 -0.034565448644671446787 -0.46960586177028140753 0.32712147079496500801;1.2555645336566398917 1.2233517337664223668 0.31761357811005758167 -0.43451628832450095441 -0.66859501362232409694 -0.34304847586605979881 -0.46879554155223929213 -0.20219642995826400678 0.29489417566300224482;0.29424337758818142063 0.37485459776729385117 0.40078779411317766446 0.9187503828577563425 0.97155922156222396247 0.97058050544436258456 0.14674627329129114051 -0.63643090628360632355 -0.18241185267219933719;0.69969678269143398275 0.80719387822544941269 -0.29975655972006409744 -0.2929582729823649867 -1.218083143980799754 -0.81779478025116558726 0.21120705336578113331 -0.46782827309429919627 -1.0462603893350173045;-0.11293720776899923708 0.24649629015238852525 0.43950320877551068977 1.7193137692876820921 1.9577180160882952098 0.46636514490349700868 -0.022644425177770727969 -1.4242935746693394794 -1.21796128208266774;0.83009566925859956665 0.46132491519795826296 -0.8473730065408997536 -1.2734536000656055954 -1.7407636357713551778 -0.55277673070163202418 0.13696050224901959447 0.54613953906788503811 0.82235940389483286328;-0.73484137336615684699 -1.2487631882008902728 -0.0053347274493359651826 0.02888116153213847806 1.1817777279826136017 1.0904504884991113034 -0.56019815216992041584 0.41160589890868282126 0.62108977693913047791;0.17688206312101356632 -0.27109804690342087508 1.0137763324067952109 0.590317629792512788 0.58281540535926790181 -0.71820826046655894537 0.19649961105818480878 1.0300684430843178863 0.61771460025452107345;-0.36156282259662969603 -0.46251318747300251832 -0.18218891782728796613 0.20689753280694034299 -0.58990929151307225364 -1.2737268892468625037 0.088439235755261247363 1.1951998000757031448 1.6381315968077432288;0.89776281900740795283 -0.43666732485855286328 -0.010625901701457007159 1.0475640652836182287 0.85201038860848288259 -0.20313188206554955162 -0.15527532271621427573 -0.82754183713433149272 0.16252897448674280545;0.24130677894495658475 -0.54067787290843816184 0.59276760394687888489 -0.050576208422387317065 1.2076305718447857274 -0.040740377761033397253 -0.21782038310818166438 0.64232306061508348538 -1.3072614774759805378;0.66836610216337966062 0.74742305545454235105 0.53434686469741865533 0.8188566784786096564 -0.79903337518657358007 -0.36734657038574236587 -0.35859419558235205994 -0.7677762326786297109 -0.40558123314810917703;0.097619325457428393622 0.47835485909298702811 -0.30183532949400060375 2.1006689231003723428 1.6133599758483243569 0.81736266880683539071 0.58766799600891350686 0.93653158842521122551 -0.31498660402114653234;-1.0526620825518866464 -0.10842912128153218976 0.55166672457023202547 1.5657757176459030646 0.58933185249136166295 -1.2033569513679900354 0.18610982093056563369 0.51009913166759557335 0.16176794161749047385;-0.79626943624886559192 -0.41622353047097815359 -0.00080720055007476839218 1.3978674173972762684 0.63301559810855279053 -0.93797666723035100222 -0.12172099817200283944 -2.1836479634944372386 -2.2070755627387885767;-0.4808454860058679059 -0.60787678920788290604 0.19820960706490742265 -0.40125019575613435352 1.1599443054462821312 0.42193818063233817783 -0.37791200539115399337 -0.57676522679890807055 0.57677538441873377195;-0.12646329123348487578 0.10781447463230658945 0.34959260832070504499 0.19613474486639212446 -0.32295776551830251977 -1.5926806097818604346 0.076274325921499519509 0.096900398394484429931 1.1760139600998464893];

% Layer 2
b2 = [-0.076727241472343707396;0.22230462584989915675;0.36550332980775096514];
LW2_1 = [-0.098459541424515101271 -0.48122138011048287698 -0.28277887113276256592 -0.031848097420782504885 -0.44931227573124515873 0.5564453667650876012 -0.094876024618500684471 -0.029277400162447338866 0.14348053570401722578 -0.44699458032470984481 -0.41202352065933744996 0.0019067728643303218788 -1.5182489618014953781 0.54839570713139207392 -0.083116905213961547738 -0.025135899241579093277 -0.59689892071886907488 0.23851560953337180848 -0.040002207284196941717 -0.19693906105084443836 0.81196035731165838722 0.16095505488023442719 0.038658467104278684823 0.22176797218412708235 0.31344269162283477925 1.3039657516168041695 0.03381774434816404995 0.041043065061776885794 0.58784955319985443545 0.42607530974544488567;0.59362093507191293629 0.42671873126008891264 -1.1853062978541688555 0.12398647844552408703 0.21587023235634514307 -0.72939392075006304061 -0.33450999435378375724 0.0053416957980698190345 -0.030539255404584100123 0.092610238193593374945 -1.1547696776696099175 0.32095460292578048556 -0.66620572159294477732 0.61058203023198853732 -0.17022552287259734571 -0.48521123020764372891 -0.64779433380072382054 1.6058291004499949395 -0.56187819799846494551 -0.58676027114983386745 0.029105563128388522998 1.1901185162300074172 -0.66008741465484876976 0.065635166918582732443 -0.021900444592242121478 0.81301538462237532556 -0.84263162230681931675 -0.70913680648840748955 1.0614517123743349991 -0.98057165741731489028;3.0026700142613722555 -0.27505071411115555868 -2.5082222803100124864 -0.29158077893148243165 1.1314671941887604056 -0.49554275145380455303 0.16757910801628456143 0.48517539715282476109 0.4873934458230845812 1.9542629691846016282 0.0050195806172536744372 -0.98265917415072490115 -0.14160898212968192622 0.26448222392384840296 0.55991549783930860684 0.81468348361378095657 1.6580468143267348413 1.8406953474143148419 0.82893495542489781247 0.5273725766422756589 0.53553484713435051123 2.3925745567167893135 -0.25061514863417844179 0.27963888365365280331 -0.2219893166892260572 -1.0420455982549927665 -1.6306697250191124482 -2.3341763549292315894 -0.4581625610447006558 -1.4287350247550816285];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
