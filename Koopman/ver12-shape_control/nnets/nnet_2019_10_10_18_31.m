function [Y,Xf,Af] = nnet_2019_10_10_18_31(X,~,~)
%NNET_2019_10_10_18_31 neural network simulation function.
%
% Auto-generated by MATLAB, 10-Oct-2019 18:31:13.
% 
% [Y] = nnet_2019_10_10_18_31(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 5 6 7 8 9 10 11];
x1_step2.xoffset = [-0.328467178422582;-0.911048438302258;-0.234011224382851;-0.073243651031802;-0.234037138681609;-1.07546003026704e-12;-1;-1;1.99013064737702e-10;-0.546889646064646;3.55320079659861e-09];
x1_step2.gain = [2.87695026827503;1.55373290187769;4.89056550653878;11.6697870896223;5.72628250700984;773830090669.184;1;1;2.00000000039803;1.79918877457037;2.0000000071064];
x1_step2.ymin = -1;

% Layer 1
b1 = [-1.4641502925872729168;2.2234212724802904226;1.7486387737927244768;-1.1477199368003505597;-2.4321067458879079837;-1.8760542527481995911;1.8753473720823405912;0.84534101332806821372;-1.8766547730534144378;0.539705685793661738;-1.0568825003156809839;-0.88650305371909587926;-2.4242331191955490688;-0.18533984086740912245;-0.12924004266448324563;-0.5132776479771301581;-0.68252413756950414125;-0.815513537528397503;1.4634432552993448251;-0.36207141250396901455;0.1933600468984325027;2.3307473716249376139;-2.2603914399887776732;2.1188238794706424351;1.096678952893254344;-1.5916331388545621461;2.0903880261229312865;-1.1712711740351207101;5.8008130952201319985;1.89666925064868086];
IW1_1 = [0.12884682284932086338 0.056949187229886760742 0.96514870005324260305 1.5378876012715594346 1.4612488664717659947 -0.42898365817991152005 1.3584561535230506024 0.98605563977016175148 -0.59811047507174264215 0.02550796959724265997 -0.64015235153473948326;-0.52017396710545549254 -0.90359223354830575659 -0.82773554814293170967 -0.17953402784780897461 -1.3589953590066818911 -0.20807643470021694454 -1.1061800016528056112 -0.27791445787223240105 0.92722577601047384555 0.83830025530251339738 -0.38505812467337202643;-0.5532130496350234905 0.077701697988451112753 0.25069204442799225552 -0.043187908836724464567 -1.8955679079676639454 -0.7461793691743044965 -1.3971233467423491703 -0.14112172262577116211 1.255686301778241809 0.41739651476599076707 -0.076234573098180491435;1.5513185658671149181 0.79893609530648568295 0.65361911002109351898 0.24670729171545702219 0.25847494075992044626 -1.1930316091751780316 1.3844843967512359129 0.49040846007626154313 -0.45342373216698605987 0.066539819665258695403 -0.47274848527804852472;0.74491995085359596906 -0.55903775093340390967 -0.38846659589587861916 1.0833778598647956226 -1.4271141890385830031 0.59718253195115322818 -0.47059624439152974995 -1.7181308331722604521 0.1211186219924452051 0.24760060241330905662 -0.95054758716771725613;0.5392100498349758908 0.20329651077895860567 0.18636950749411754225 0.069262100804099155371 -0.8662863273797756225 0.92624377663079093814 0.19786486678932022065 -0.1662616884252288707 0.30732675768885575618 -0.58163653451946384365 -0.62541723848492181137;-1.4227776122833366568 -0.54785353107383272242 -0.45277983220725631641 0.37905958313685239602 -1.4898924935560369232 0.10098678689103680883 -0.35594936073438038227 0.54108458365817557745 1.5217193545414406941 -1.106975038797874733 0.93154316758282740274;-1.6577519954259494206 0.86067515933881488799 0.68079968134744583974 -0.70605343355438310304 -0.20907700149629371289 0.02573363515591588907 0.26420156076208145546 0.29607628217072035071 -0.2929748499585281829 0.27812321791944283333 0.3694335773855569327;2.4373017563327112889 0.15917653150870825218 -2.0632681182933394481 1.2069715998881707097 0.9439673680498665842 1.3330117178914480114 1.2693092785302995118 -1.4100191623171427491 -0.54344666221964355035 1.0822073217084000607 0.44295414205629879412;-0.63230222749910935942 -0.35333507805119634959 -0.60401863046677606306 -0.97537166145853704258 -0.14032518071820690442 1.7852940021110166313 1.4494791968467082288 -0.35710648929587635036 -0.39572809595957331164 0.31454739860409469676 0.036466803211553031061;0.99452682654678314922 0.64437832185200127899 0.11582393267591900576 -0.043679818078151168292 -0.49694648313517364446 0.41516322732890720282 -0.12046031962159725603 0.88247347099162476436 0.49376161607844998302 0.26445272244378031923 0.030333180432507881458;0.22551003347988327064 0.45791556295253110775 -0.43838554818007186009 -0.86169459487654753715 1.6162082345299100261 -1.1917919150665559069 0.093192336619508986395 -1.3536663725079589593 -0.068589458467442271372 1.2985134713933053074 0.015129278169225608697;-1.0356628497446525028 -1.7131650137575580306 -0.64190385189812082523 0.18741463632498900349 -2.0974747152639516834 1.2067738734707567083 -2.6854662340650770069 -0.10499290491581617091 -1.1601490688705238252 -0.69580869372477172075 -1.049909512304766146;0.99690568405807700181 -0.93688865508274288274 -0.2439494105071560448 0.36980164857492592301 -0.64935754111544452538 -0.7397140232590989628 0.55002249673920422524 -0.32763086741169616944 0.14345439080359428941 -0.66848796003784871633 -0.90014749571262808736;2.1176083208647624723 0.65714100282670251385 0.78946492867546091965 1.3265505671727264581 1.4983400745867683224 -0.58582994772042262799 -0.055892099021825007721 1.705560270385904964 0.51868625547514779495 0.13319572615865621357 1.1463824426261102207;0.13792565509661844358 -0.23108617063930925184 -0.32037857291492172207 -0.80367732346458187198 -0.013048214089225192158 0.95634892880253430381 1.9494933173009170169 0.62701718082469526383 -0.68708042651570744308 0.12293420860807131867 -0.8266686031313690286;-0.11180811252327332861 -0.77063029928903847843 0.012892954797965622271 2.0639219090991089978 0.52736611906581309928 -0.61204735886677552603 0.74046081383972262024 0.58535300417201352463 -0.85610007454456094056 1.2860527303406736888 -1.1394276972817856119;-0.10646864862389199269 0.12685697889214747613 -1.0072409212826354263 -0.38003556054261211639 0.42065479828484936276 0.78760187587771535167 1.2795509680385432905 -0.2477140608034273106 -0.7354362548367227026 -0.38844818623710736238 0.32026974073302721946;1.2293271779257091136 0.72670763357600032251 0.029294263209677318116 0.12705040529206224065 -0.43771275382154678502 -0.81328293835060616601 -1.468461460339336444 0.56494446172139289875 0.86989071737465872847 0.75331115871804510409 0.32180073475023357465;-0.47032784492922824482 -0.90220612189275595227 0.57510543126080049259 0.72448791172707860397 -0.74909942099254855918 -0.31223209278947117173 1.0880851732043144153 0.29163386352747117103 0.31135248193700021391 -0.38352136657326690861 -0.84563169557445772018;0.81390418929349450661 0.55146983031919050156 -1.2331705207747638564 -0.21337566954368830663 0.36644300535240531547 0.55789900401316683265 0.12398946103980555689 1.2500299670664918317 -0.39399009077456292882 0.40583565051469133733 -1.0920303956057018091;1.1311124136572243692 2.1252090638563823077 0.93639503587106187599 -0.0020640494643611641962 1.0476241274024336025 -0.38720280874729351428 2.8049989880646917229 -0.0045063455067091209849 1.1790169569836002061 0.31047160207505963836 0.60238171755071556746;-1.7583666879905603952 -1.5666078912227370257 -0.64205775997674430222 -1.6835971076368403399 -1.970321347737513662 1.4392126532141256146 0.53839850005764477991 -1.9331885582921728428 0.21343492576080791423 -0.39412621822434296126 -0.28520131371665102815;-0.15927297686596569859 -1.0002821752878741091 1.674407930385713783 -1.2261231477192002792 -0.010184002444846067259 -1.7964702304027322377 -1.8764203176956408825 1.2978066240799044362 -0.49205562024843663149 0.43416649094637033146 0.17260974699292722101;0.088449211966489818537 -0.48030124259975648382 -0.05945835101400765571 -0.25743144488688657345 0.29541454213458245848 -0.76027331730595626436 -0.88524912830736579572 1.9540447140568586448 -0.80830567569572964182 -0.30215362252415334243 0.67825487789015881379;0.20919103945118372456 -0.60700834387725743913 0.4862736712526771754 1.13084248184229752 -0.45373792566337567411 0.37808995893971453217 1.1632258596774911474 0.086156883202035405844 0.061588979421814307735 1.3530394676328374448 0.73367446736280594877;0.99637043045484274817 0.30082983421471587437 0.38060791552799905224 -0.060803168440983740295 0.95777682809705610989 -0.069339271996723822467 -0.14967354759068124403 -0.13495942644742031646 -0.034622294373300374626 -0.33578887713528016157 2.2236865238323408889;0.10106838697353077994 -0.44728475634937236993 -0.26905343065236642097 0.020395474044468925312 -0.40765862241857692139 0.34566934114946035184 0.78584081998957500126 1.1144548731314667389 0.75022181284356237452 0.30024895740841206493 0.31374514131386310734;-1.1011279891894629746 -0.28874079829361348759 0.2883662827039425447 -0.2918365549030982331 -0.73718718025596663423 -1.0182769626217371695 1.7100016587151074532 -2.6238222160377167036 1.4482412538477371644 -1.9561307066279844946 3.0587456545607154546;0.15140263047289609366 -1.2020130237791584182 -0.60083837450053922957 0.67807809574340427439 0.11119811956589778501 0.39366910112589181825 -0.12885913396968126654 -0.3286293453561693334 0.50209166529413840063 1.1153004794740644101 0.087232776573538242659];

% Layer 2
b2 = [0.45266720974815077838;-1.2995535874540220522;-0.39204854819199186355];
LW2_1 = [-1.1721082303133389946 -0.90574525990926613161 1.7329729365245194472 1.898589148286474515 -0.24310765936113501451 -0.36310040313135610868 -0.48922573528106527707 -0.31842920657584666833 -0.3333751147770249168 -0.31460999973238118477 -0.837869763249597721 -0.46063481940265521564 -0.72604131022667317552 -0.42574319459400700172 0.17479927531558947518 0.11019087711029615373 -0.2785048945061906478 0.91266704925434560813 0.18998730571296298941 0.039008151149023208293 0.28825584660086800426 -1.0153084321787486655 0.61919801942162899788 0.45347547322301512418 -0.47080643456504844835 0.046262024409763236044 0.078999927457810495413 0.17677434878880582403 -1.5513741038837209896 0.67318357456837263353;-1.2612235736425583266 0.67328820709515913023 -0.65930045840939521806 1.5758100229749332222 -0.019710341535702349813 -0.10807489459307761948 0.23279409070016315875 0.22930968299688875289 -0.32395482971827010976 -0.10716339105465688686 1.6376851946365582613 0.35041397583817984751 1.268869930342892971 0.55765735073851652182 -0.39650781614877572689 0.33547493000227868176 -0.055127039273201700054 0.3428637771713496929 1.5244912077541232787 -0.13850224507850047995 -0.30107421264526879057 1.7597704743888504808 1.2194030071973569473 0.48204131280009587801 0.014095439415235520852 0.27994128797050976676 -0.10878637039952443466 -1.0472612151317910456 1.6682309694609931405 -1.2565266649307782476;-0.51982887938165567299 0.705471754468552259 -1.2864595938499392425 0.025418895439191291352 -1.2683630562000909325 0.92854165652879538939 0.44411599935488588198 -1.1960515377711635754 -0.24306998814144631371 0.36052262605316803823 -1.0096828001827653498 0.26800320360598384184 1.3582912942882521268 -0.64999282968883020928 -0.016439179420635687684 -0.85421100866167054555 0.67171053679066750064 0.0088559104370639143977 0.28096807302943183071 0.86010499156239561547 0.39678781997005646565 1.677863914488614494 0.40127879681953737556 0.14945697206924035694 -0.20383762329459401141 0.48819989420749504427 0.41795158522614239693 -0.1637144453059079241 0.33924223465946135025 -0.67605923528329137095];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
