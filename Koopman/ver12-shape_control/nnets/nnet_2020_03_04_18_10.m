function [Y,Xf,Af] = nnet_2020_03_04_18_10(X,~,~)
%NNET_2020_03_04_18_10 neural network simulation function.
%
% Auto-generated by MATLAB, 04-Mar-2020 18:10:12.
% 
% [Y] = nnet_2020_03_04_18_10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.64473728834206;-1.11032143393956;-2.97223521006465;-1.8732209058497;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.538056438480182;0.916325429093315;0.460114113581458;0.620420882143681;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.7353446909576377699;-2.0275980736785426117;2.1011931044203011609;-1.5306656942826157852;1.9226085129006016405;1.0702725188738904105;-1.1192407745961210352;-1.1844035700988064796;0.81271673727200355319;0.39443298927274422772;0.34426961275815937125;0.39153869773164812207;-0.21217408740560969593;0.046103175265947066164;-0.016828233375411845441;-0.25175874488338301216;-0.31037293089648571032;0.92890027642104189276;-0.55611245213127757925;0.88983345063791763341;0.38016981044730469019;-0.33602021784544300331;0.68241777346676679716;-1.3011716607546075508;1.5704043998010925876;0.24705185065891585583;-1.440980838748401105;-2.0287802914510399965;-2.2991150730871989794;-0.93958458591993010423];
IW1_1 = [-0.10553483254569395733 0.35923423371569640494 1.0456268921806721739 0.67751916309327830934 -0.11597334225351597914 0.370928811689457405 -0.8962583111167621297 0.85365756391409153281 0.22783277404387308751 0.58813263913012125972;0.67221448653937010409 0.18777169635965476613 0.15105168540698193924 0.56208413129529755103 0.74583542182907891505 0.48614775813467342447 0.30265477736517182317 -1.1124985675757654846 -1.2121613936636992381 0.56479892399747788634;-0.17629677261851250947 0.10977823725602385563 -0.0055270429375053886645 1.2275455015834941808 0.78003049552640235653 0.72561663101910578444 0.2567977403800253966 -0.97519088650834939713 0.69601899063509575782 -1.0195080091631838481;-0.59913042714043951431 0.42602827843202401015 -0.49979896942470558585 -0.21234860299493260594 0.44433869473230802605 0.31325144035626079075 0.83572774730556775857 0.83365647404028941914 -0.61428284665541366127 0.28536881737572289408;-0.19053980299603792692 -0.044370136451066334582 0.28267387650915837272 1.190071133720966845 0.14999882706848347014 0.66866059792316168142 -0.22814536922001640851 0.61915139438533861593 -0.6026017079387235853 0.92188697589358870044;0.22061485381752785062 0.38387822054563969232 0.56761667329807796722 0.37490271054693485864 -0.30605154462663436421 -0.66489437017359642734 0.26332702194476031998 -0.51915457327716851843 -0.57931925397279104839 0.4705661099533184899;0.69048334292531199363 0.011867844545369415216 0.67096337220645352328 -0.20171237924449281209 -0.63087015309262128859 -0.40199878738261074496 1.2425514687354484167 0.90986514953058639232 0.6298314539936241685 -0.036709552588045618604;-1.2227844212774898747 0.53032530581651893264 -0.15915170365869538149 -0.31037624050328360692 1.3515913120337894604 0.72010624156774494242 0.19879040336445633064 0.12827531758575708154 -0.37211553677362985137 0.068819626738008024547;-0.91921477958655561924 0.50926641542250794537 0.63982710416576926704 0.03347292200158209774 0.058211320928946076736 -0.52888246858253484817 -1.0640112312502187919 -0.077946371780147905017 -0.076383655588859997176 -0.14704849571159689381;0.68295828725630736145 -0.47556794093237775289 -0.01418503091064794025 -0.39626967216882130751 -0.54310641681778915046 0.70867100652370607072 -0.89049818284907222843 -0.095402456838149130025 0.13868299432676750582 -0.39727287031905678116;0.20253487319582111348 0.15865111808251955439 -0.058983286510441747252 0.67565103818131289071 0.51956417558487655306 0.4751969445881117915 -0.39042918330117448722 -0.40578007964476719982 0.2560130898415223788 1.3194751845171897031;-0.41180687919948505415 0.87125382064545331406 0.092150303784793372031 -0.53338288324248028793 0.68460908439013856697 -0.13723838746399269484 -0.57451742639948599756 -0.073034202078006635328 1.2577527470329890047 -0.41774346338944967627;0.34552843187258774904 -0.23317783783351878069 0.71261335000977743537 0.23927919126012450746 -0.84439389293894329125 0.41825308018869328253 -0.25235256814737772046 -0.594305949056873839 0.033250694715262048284 -0.20889379918012532245;0.28240654625850891701 -1.0612315854738163523 -0.43304802946666509644 0.6542114462154965393 0.51559448950639596987 0.16634936234647509923 0.0029897606802956342223 -0.34802542044847878389 0.18974168845183647658 0.28396184225208798146;0.50815572706439782191 0.48612345757965347293 0.5308463129511248324 -0.28863244712202917874 -0.93751977133608421777 0.23204636096357245112 0.46277610816079012279 0.35983919181845253066 -0.87876899670144337229 -0.65563346927256194174;-0.68110942590055578716 0.17691869800850820726 0.73528169385506614297 0.24140363538643477836 -0.27369931374075540109 0.37591244162564085851 -0.32274477828784758904 -0.19332104956682152896 -0.37365624973190159075 0.56663430983520102213;-0.34383430669030079496 -0.583099252864915929 -0.57653265164249567487 -0.31619152390128146823 -1.1551795796879884559 0.50203377023075712593 0.29952130878936261693 -0.57627903221762954988 -0.34501127444723717064 0.28063071600129135819;0.40943596891497396895 0.99907498413306639051 -0.30702913192134295706 0.96818903980129600306 0.26236430466318055865 -0.26363781755792187189 0.48198579660946044845 0.95605128431391916966 -0.50789384072031662498 0.6949292513245730607;-0.74416620872356908922 -0.34821071531721720094 0.7856834477700489483 -0.38885469446175546793 0.42842621763755706077 0.94383328784565623248 0.61258012105625314625 -0.60912878937226411225 0.13960423345348871305 0.53946614109254498182;1.0052149855663228273 0.082593046756793131458 -0.41678795675635554874 0.038205214586469804505 -1.7253272980200213826 -0.67062812813901173659 0.15365386839193248547 0.070431830487289098786 0.16571442481562348448 0.31713748491235693727;-0.19489759987210122927 0.30098333429101109537 -0.68825420736743847527 -0.14604430276957416912 0.32363872636826901408 -0.063813218021218143239 -0.59981212636420622175 -0.5886599829962297914 0.035489550414785207832 -0.043689655200043878147;-0.77705985466894533786 -0.6034642946479134018 0.55400195054969969544 -0.26610853136100010019 0.61199592291944659994 -0.49070475963173249001 -0.19685642445944478984 0.22901851976623091578 0.47551739304460821645 0.75404594475283492905;0.28915814528692757035 0.87755765371425331622 -0.3094389222786633753 -0.20213047409894333017 -1.056945890453665271 -0.18015403404669957932 -0.61471278911050064586 -0.19907151948678894482 0.20789267074995212981 -0.41403140747888178552;0.033872586300804044535 0.069231452839334906013 -0.93889162761705924343 0.64217723784677360754 0.33157409259624442965 0.27675805650100232524 0.71278810875956677418 0.60072805032744436282 -0.52507895775687296602 -1.3831277472181984223;-0.074480500269434882221 -0.35128941395790630464 -0.31142629403787736031 -1.1104523426800314567 1.1456071343711848876 0.60981669787178993669 -0.9066974646535533866 -0.040887272829610368796 0.90950921212608659694 0.28069441826753044333;-0.51250592651237614206 0.24284634628838436265 -0.62451609476643887842 -0.43525303502308598791 0.32524931973207649172 0.3304141658094563172 -0.59707995121660040194 -0.23765502488815642979 -0.67988418887111046196 0.077980392730230399523;-0.66078080815828377226 -0.70240622558805143605 -1.0726792357691030677 -0.096060328091974039877 -0.63433124470950075224 -0.50774145587641272837 1.069282666007194349 0.039556027375636355903 -0.46318998873340605504 0.33065517341491873493;0.20257164895586171616 0.030171167372793190886 1.2891565632688259946 -0.070813696315326732367 -0.90602897916499414155 -0.027995492505752020418 -0.13350436170851939788 -0.8227154330759458567 -0.65718884782186748339 -0.81597482004002164224;-0.51266227489189164501 -0.18055777945220918834 0.70935238171768233428 -0.59982927651870032726 0.34553100082384230474 0.95959906993305454925 -0.52928480766823404746 -0.5130153939934865015 0.21564691986494322062 -1.1871625517285462337;-0.36115984638471088086 -0.37686541020525188284 -0.44532779100253438997 -0.64731037999782026215 0.21514813489708903282 -0.057448748943822097734 0.66324724874649965134 0.47576307415096980025 -0.56290980242718968718 -1.3829915951253570761];

% Layer 2
b2 = [0.31834471492870236586;-1.1147720504805036512];
LW2_1 = [0.21891495761972362688 0.72203332336726611107 -0.28033882930021419844 -0.31745784138433558175 0.4340661487515310446 -0.37610167089222135139 0.44338919711722468708 0.60340016099094140323 0.29048082606037656239 -0.40830632593182103474 -0.38719005607616779896 -0.48043978796464154035 0.42844363368905297174 -0.083700682356379924043 -0.67733240704897246243 -0.49766410973433622411 -1.0148690601030365688 0.14232137644282114031 0.38393377716635646024 0.93347752599540345653 0.39423310941047184919 -0.35008337739184081094 -0.13357566343108684404 -0.72527738275250119848 0.57265462481358986313 0.46568906544957300309 -0.46449290764053546843 -0.0086289199547293950199 0.10379329594810340898 1.0585155886988999452;0.52529177480232913666 -0.17386157376253069673 0.51090255059850564479 0.74401614079283617809 0.69000379349918561367 -0.37672613683475675295 -0.92059804274342604824 -0.51403397063771172348 -0.30745689990079089204 0.010124472238704147406 -1.7634856154532516648 0.46446232551045568693 -0.19456651769550109554 0.68602437930943604982 1.1699649142798844714 -0.949013325325529844 1.0884041930821140021 0.46230718384713226365 -0.6304088334649390335 -1.1990414685555499386 -1.090677731556744412 0.83108399684033862354 0.76675255133848074784 -0.47955037327985056139 -0.020341834105873198707 -1.1153390408552723567 0.28867536649229391665 -0.81597993882895902829 -0.81889982172875774857 -0.24689759720240822549];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
