function [Y,Xf,Af] = nnet_2019_09_30_20_06(X,~,~)
%NNET_2019_09_30_20_06 neural network simulation function.
%
% Auto-generated by MATLAB, 30-Sep-2019 20:06:52.
% 
% [Y] = nnet_2019_09_30_20_06(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 36xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.61801073792437;-1.39324170158587;-1.38506603682853;-0.846656440394407;-0.821531515148699;-0.744640019602498;-0.663270925978385;-0.292850585327952;-0.34789514769428;-0.605629943283633;-0.280718356261281;-0.319357925815354;-0.376381831966362;-0.268737534284761;-0.19054206934665;-0.252968110706763;-0.185320638022284;-0.618498010073581;-0.294517417788852;-0.181959850281034;-0.146249755332334;-0.143974177821825;-0.128979658055887;-0.0999902920778753;-0.10786557032847;-0.116495150749313;-0.14025197898594;-0.158587970725983;-0.0993685522599563;-0.0656337761243853;-2.75082520032022e-11;-5.10020252199656e-12;-2.12469307565639e-12;-1;-1;-1];
x1_step1.gain = [0.62315006704972;0.699300701266655;0.658357661876592;1.08946910526415;1.22614414442704;1.47989359196513;1.82264804968456;3.07852912083302;3.12600630506073;1.51653643731944;3.27075690998194;3.46078832163049;2.89350667650453;4.09098117290922;4.87988682523341;3.90221408565727;5.35719546685942;1.98248085932971;3.66628916617472;5.16582858604882;6.25413687876806;7.32370788454571;6.88118965457654;9.39717570139418;10.048349901498;8.05128686729053;8.55276317588834;8.95098514692323;10.422849228399;15.3107773803684;35880057065.8007;178153159913.147;466396939190.614;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.053099038456585118118;-0.48872462568935437499;1.2449182837326133733;-0.39946571368501992971;-0.25085997761905054482;-0.0049760392967826243271;0.030576827924668686237;0.49629942922274800088;0.88976101509059579708;1.3822126343112124403];
IW1_1 = [-0.2152043404892099443 0.10980825670390388649 0.047965240953489501896 -0.12633114313484433699 0.20361245769069874489 0.025272898921319744692 0.12296910881820766193 -0.068805810129395850172 -0.12538252716588879632 0.069102304574347836463 0.16868966393914791579 0.0096650571685102486252 -0.17404254807631081015 -0.0019505931595044235898 0.025357375692598466133 -0.014230861991305118752 -0.021421808362885406268 0.037924572277549910282 -0.1504173861279464175 -0.29421517672222163853 0.010059867653752828029 -0.14463243569800657284 -0.065394744353138772874 0.053928221200531270552 -0.14859396996137988478 0.19056687305938399546 -0.0091584136019682849117 0.19990048403462015725 -0.040861683559575145974 0.39340517400764002387 0.0017563808534149984858 0.036787064357312840301 -0.14021130412362009521 53652781497265.367188 677039763646154.25 117281772506903.42188;0.22777173000519951307 0.12779847939172858662 0.24574708785830109981 0.11479142196502277462 0.26099063620059659296 -0.087491626953330708938 -0.31137190377385920437 -0.47587842217431680636 0.086135478456991945717 0.039869962114169196776 -0.13244330528684614134 0.20047052772105694585 0.010275428001382036491 0.10794483210905932158 -0.14893218329251409204 0.46545005420528978712 -0.32792290305482346691 -0.4960665260173338087 0.48318958919373455885 0.085664118201201830405 0.15387981531529959511 -0.0041025704188660735983 0.14892205882009837414 -0.19874521604241721096 0.039369754178283339341 0.21289435236497120107 0.087106275827146431578 0.075928916992403963637 -0.149684830071164926 -0.0099091306626655772938 -0.18611965067512209471 0.075155560624336856246 0.1088191705104137319 53533629369201.6875 -483139626445598.625 -105205088958411.98438;-1.2303544742329008965 -1.8252516443472750485 0.29848487541778467858 -0.83065423978773855751 -0.65967287810359964695 -0.57790381726431894194 0.43362647167121948222 -0.36371771557408894004 0.0015836945167942897278 0.31826713120193700357 -0.17479076832857678991 -0.0025252120731464686859 0.46444618943128634925 0.4632193815146265492 -0.26130397281439254886 0.096961264520908085895 -0.56053202175143546082 -1.0550388050091061842 0.5377615176786700868 0.12572914255365749692 -0.57169222393515639613 0.056133360748150895603 -0.0921795775905323439 -0.13512407143181204283 -0.19005410435341829611 0.056281885195470171546 -0.27270221812822037499 -0.28465479905392332416 -0.27718585508820758889 -0.018811363205278996275 -0.21826404890673242742 0.15706273093957778819 0.10057456451238197537 101123124316337.76563 467703326324035.5 -80550923952870.1875;0.7207204349512227326 0.64680997521858596411 -0.037555619997346856298 0.43467143362899379744 0.24933945803936094499 -0.58851206244035181303 -0.24829316321646008325 -0.36732184695943870256 -0.021173492354945679106 0.0092837320296191711 -0.11732438307182874171 0.30153960786748912337 -0.18687802629387245679 0.11153907863219406083 0.17165981831673621238 0.20622707278784116469 -0.31430454912343269713 -0.19341555845521560264 -0.048595891137361402201 -0.18582376625456137331 -0.26425810231023338925 -0.24621831681076253306 -0.64591476337642650396 0.23337174736420904231 0.19010912881317593159 0.013060681903730220199 -0.0058348671115225278494 0.30855738681301880799 0.02862873274890555958 0.54652214552060884856 -0.129156223132010195 0.20663209775296215165 -0.35375245623489581792 -67308906317477.320313 842170134428002.875 209660938610178.53125;0.11219078843346259877 -0.12486636007970414175 -0.11342697241239292627 0.44565107943834864068 0.65671768488913939699 0.50888141336931358438 -0.25313216232986240906 -0.18963687965344361297 -0.012706146313225447075 0.039141698935710990404 0.079326547898551133531 0.089225338023000061449 -0.073593066258364495114 0.058099439672495700737 0.044492000584832554211 0.14595711953164181018 0.051609666682496488366 0.070732289953753232914 -0.1204608994852855719 -0.51762943856314902469 0.068387755177841944021 0.19047635185133529601 -0.3656710932135125991 0.21443350085557275064 -0.042511436136527219753 0.25529804782009407615 0.013352172121586161971 0.55051921891180810587 -0.09239071028423594123 0.28988575996172621929 0.10447727245739249491 0.029694780185206805234 -0.15897235387022992659 -82499534862610.015625 314125005422597.6875 -211807233390593.21875;-0.19519778391099434911 -0.021742090995040479207 0.38301504554485765741 0.31456644535573646815 0.05071115639671008174 0.16708883172545269113 -0.20720137807708519095 0.00037395162354820783018 0.15197270708852822496 -0.088086642703208706262 -0.13015857622112220193 0.031811864081490545675 0.14068190400224719894 0.015097500451003954478 0.061810533158606156823 0.047278057746500977421 0.062309331790073023416 -0.021536650456704626438 0.092223384638670399815 0.056690446154611044693 0.0088648241073707098603 0.19927118370260052393 -0.096675809706395013365 0.040591740804265967479 0.13442985282538105762 -0.12510391026407066684 0.014237080829926536396 -0.032308543970033777593 0.05793514707297959393 -0.29752541132495990972 0.037800890045925739091 -0.13633252206718018962 0.026412295082540265118 -108483112578157.17188 -520466574209084.4375 -169248845452508.34375;0.16661784295803319655 -0.13766605300168971437 0.23213400294373054411 -0.13799591965651208936 -0.020234565437697835805 -0.063267935706287567466 0.11018546365966974676 0.013773236663544390773 -0.056474533986103164773 0.030974147074223645076 0.069798736101196648396 -0.01251784780193927922 -0.079307918629609730488 -0.032746016968514438106 0.0073301030620674598182 -0.038442210939371390666 -0.0083832180746137366367 0.030275693064849625025 -0.056502975652976371312 -0.053434341212624275608 -0.0069286361309276100692 -0.096331261905057516404 0.037302347076105510371 -0.0090622672122623957464 -0.064144892915610096651 0.045094192458420882808 -0.0067369763016112711035 -0.0014910410192967103044 -0.0066595317555374969332 0.12872118000685284223 -0.015701953035814716908 0.041239001495286552179 -0.098944011115429261749 40378765205830.226563 254981678267015.75 88049982319366.65625;-0.055988949280209900083 -0.39564697969076129125 0.24897714711705062895 -0.34945585396296685587 -0.73243979759144894892 0.38972588308741695773 0.39663845172624884183 0.68774156491711091466 -0.21107811162383222081 0.10936419421295154319 -0.072260880479569078449 -0.41335354764670523275 0.21673208771044036314 0.19940600038416003703 -0.20466285704605927109 -0.5622655505911003937 0.33698412028013891018 0.49938069329106699046 -0.18884956596440044541 0.15912700016111983037 -0.38478638021369732103 0.29615165041411722902 -0.27142012985805485936 0.12888317229111195816 -0.043799125178029439664 -0.082961533374858814627 -0.24570575962573584783 -0.14745360426557702072 0.21058910045008785716 -0.26412264363527515609 0.16496691648011355125 -0.011884361071174780883 0.14689276285166277813 -21685140321179.902344 411629555479572.3125 -117318226435242.25;1.6909827427429322544 2.2557615285058334464 -0.42121600975705053571 -1.052532688576993003 -0.47905453219680366184 -0.029952834816125154666 0.79492316638427173991 0.1841219431644670057 0.53426696625912850624 0.14962579717888649378 0.58045897364952003805 -0.16204221428470960698 0.05223680290857101588 -0.42310808116314591043 0.60480560229397750671 -0.31600980646084048109 0.48223723180408634148 -0.68821598603862088606 -0.66509927041687089133 -0.064897736890942775423 -0.0037000266840218828945 -0.13103938568978362733 0.69861832426994341372 0.34251579599897352679 -0.36115399467774927933 0.022530451072897167419 -0.022661401894810934837 -0.69226507198535436327 -0.11671213993743922988 -0.31413073914126732333 -0.4942996424907498132 0.059561320378470283821 -0.24889407877217301079 -120793628764183.84375 42276644837552.28125 188399187591675.4375;1.4847713861620654985 1.832107018920855479 -0.099908212619009992284 -0.056849975072825915945 1.0255970353573797826 0.34403920166636153821 0.32828004048592934749 0.28911801926324709466 0.26096434534350548828 -0.32537556656895616491 0.34245397652808362565 -0.19857745833413123493 0.45205286289493784579 -0.34991703839325477565 0.29844272427375934109 -0.29627947592156228529 0.15505902540525909328 0.98654795105900017216 -0.48356087718902268646 -0.45174922963267044596 -0.016599393011703555273 0.11730545830486802106 0.10561520325119283514 0.071991617112509648235 -0.099508850332925377624 -0.069535339943023133369 -0.15517562695343589674 -0.074643345872584004885 0.055379177596802192651 -0.27742520338827353354 0.40360642496003268365 -0.18734945831498617252 -0.013784996862103892495 -58913496828257.460938 -185109579668503.46875 25739823762883.390625];

% Layer 2
b2 = [0.17718512488677098937;0.062129637190576104955;0.10160322148882830473];
LW2_1 = [2.2190699192851255361 0.86417142200131147334 -0.34118377164147012381 0.18531235758913000566 -0.98388687727970003394 1.6219571683003797258 -0.84556741667594315093 0.51620595760837073573 0.12762359525796271309 0.33327654024416103473;-0.60102799669576678632 0.59074169629936901238 -0.33923289485717023073 0.25577789583355148295 0.14444810006653827084 -1.3595175338119149799 -1.318868048026667239 0.44001331673260490884 0.14432422734993172186 0.3180949115915570613;-1.1080340756870796781 0.49166962528642366159 -0.18224559265616116499 0.17625482375489584519 0.32230911164166459182 0.30466673719978787371 3.2707776004490605182 0.26518256133381296058 0.067093815950714300045 0.19771074225594431617];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
