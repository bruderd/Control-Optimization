function [Y,Xf,Af] = nnet_2019_10_07_10_34(X,~,~)
%NNET_2019_10_07_10_34 neural network simulation function.
%
% Auto-generated by MATLAB, 07-Oct-2019 10:34:39.
% 
% [Y] = nnet_2019_10_07_10_34(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 36xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.748541107908522;-0.892019848528496;-0.641738310503583;-0.605963650344587;-0.69140750011311;-0.591097061673078;-0.470132015963128;-0.429316553158915;-0.659635967868346;-0.653772985252629;-0.469152319686375;-0.199287165026846;-0.381223221126774;-0.629193952016312;-0.637019534284049;-0.385171390069799;-0.15500731618812;-0.170656982962068;-0.347425150076684;-0.665097429921406;-0.639853066294843;-0.403368931597596;-0.137394396021885;-0.109348011607686;-0.112277521053254;-0.313622768028927;-0.676904898297232;-0.67431605169766;-0.339329353219688;-0.104006734252551;-0.0824620488332557;-0.0789873230610012;-0.13610212867656;-0.287559532363587;-0.695386534539406;-6.43929354282591e-14];
x1_step1.gain = [1.24525971072022;1.18008310092651;1.62033960423586;1.55665513176403;1.45759781944266;1.60824965435678;2.00490168728322;2.03669199081076;1.44131590761785;1.59011948424056;2.2026693461815;5.05921930116205;2.37704555578225;1.40016735876948;1.5718868741932;2.44655556334296;6.32865649885376;6.3143946169452;2.76206732757031;1.32637394979416;1.5395742750393;2.65608933922358;8.05431060379506;9.24641542547359;7.43164304620347;3.13758149269422;1.28898977457584;1.48588447737683;2.80199195783216;9.14041920921549;12.2302164007317;11.4204251174789;8.32363910141344;3.45403754701494;1.26180109126196;24147987278126];
x1_step1.ymin = -1;

% Layer 1
b1 = [2.3597508115436585108;0.41918232205018324255;-4.6350506593285940582;-0.023362529777799782849;-1.3695346641474426264;4.1276511126369745952;6.6435450840026488706;-4.318557417840938939;10.23234712766513077;2.8642262936709261822];
IW1_1 = [-7.4646791330419963728 -8.2164437745107932187 -5.7617485062649418381 5.8537601717430209902 -4.7006880705982858615 19.407534188784225648 20.113856087248088045 7.9961722168643110109 29.12615197360136321 9.2534685916543111261 -10.837426477309103134 2.0025584171585490978 -9.5886456350750801647 8.023878456517691049 -13.258296259070281309 -25.470632939149648877 -2.1997615639567373869 -11.424603605011615315 -4.0424016017857855587 -33.941208069210560438 -6.0529726638723015952 4.6834416609492288686 -0.51851181100057197604 3.6598133200027547218 -2.0213453489399184626 5.5414917589140086918 -6.4750700007002990333 0.48269004000107179619 10.697119113081202002 -0.54923923736967728004 2.1897701837227310229 0.086454515280479982131 5.0227582347046890732 0.62325491041251535052 11.711616636428292537 -2.1798528752359458416;-9.2573207818236191713 8.8081912183353683332 10.246099970667804868 -5.0811894756847033605 10.90539400922396851 7.3847358658198132275 -30.884473867626446975 11.914948804089888768 -29.50350187349888742 -5.1630945076753249623 13.443148610779008578 -8.9092056126652181547 11.406094269216783488 -12.144453050628994717 -5.6306529049499882689 42.472328678849152084 -4.0069492499659808971 18.983967771853237139 -14.979115357995750557 41.053145658652255179 -2.7372288537646896067 -7.9236904569180257596 1.2941759331172273395 -4.4281834499953047768 4.8194838211948338724 -5.4389929798577387743 6.0743119088474220035 2.7958914052371963699 -20.340232734007091864 -0.053231091506758421161 -5.8585422607688233398 1.6396313085662126419 -9.1990223326434445994 9.5080251789580856325 -19.559851027958842451 0.15202909466386610449;14.672201269422217251 1.9719147310821756314 -16.544659136871487704 -10.347643621376764855 -6.9294349986926206952 -31.688993191043614672 23.6600164543871756 -26.815741817960795146 19.515044872140776988 33.583400215234973984 19.535915406656819471 13.815296997691456582 9.6425955155507345751 12.477002780816121685 27.94807191385441314 -38.598745128362921264 14.248388003151923442 -25.648207503781637939 22.590584420105514596 -39.185742645811281193 -18.851986445315407792 -9.8999092985371479614 -8.3730651404700076057 -2.7227599603214214241 -5.7221791847988807689 -4.8621139506320725232 -8.9962984634675322582 -8.4971605876115514633 16.919400386898406197 -2.9073882881600834338 11.550772990118503003 -5.2149950207296980054 13.814077813244617587 -6.2866295625513837209 21.223119024601640348 -2.8851719461703981828;-5.3172435015811645442 2.0133668447382597755 -6.6140676899732460114 1.6486583214165773104 -0.10257786078479649849 10.132248129161615324 6.6675802841804481247 6.4956787000034603707 9.5532644623785465399 13.937050996686844329 6.4199169061390870539 1.5063393430503928538 -3.4072750978070898142 0.53692684876450569309 -11.317616671441374621 -2.7079951558330668249 -8.2334730639460644852 -8.436142637474153716 -7.6061495129647394009 -21.263636999546161377 -9.1036126448732712646 -5.3690933617307150527 -1.4882235163975909842 -0.87402177411797132844 -0.36043589151558630412 2.9071966855176620825 -1.1127739411210115783 3.2906874911583048338 -2.4092290277351162686 4.7372956280964562126 1.3654258607244991186 3.1244463552184398303 5.8957944797887309463 3.5324754068625474623 12.269694049760197174 -0.99259445731275952607;7.1796167693531298681 -1.9482764362029962868 8.6650642628307554816 -3.1660864892682241134 5.5822518567440901904 -23.452995972449524942 -8.3181304207816104679 -14.557719751067502045 -9.830628867617805966 -5.1232169650276775386 -3.5331916985781184337 -5.5029263221188982058 7.1475741035773809884 -10.627758460904960458 25.849132625008941488 5.6204192329894420155 19.154499113579696257 7.3694626824742144322 14.49153822753043741 24.309308432347798146 -0.85249412328031271002 3.9614548523344952358 1.3529554863503545636 -0.21028047681096259658 3.3753096703804832401 -5.2658175143332766055 7.5906066525970397052 -6.5360064471311654088 -1.0948189968715973386 -9.4930208144015590932 0.018943472226877075548 -7.576368239439522867 -6.4049321722251253419 -3.319673394330545424 -15.677065066768729906 -1.677645639442191694;-11.800661537884984398 -3.3978252754622322307 -2.2182139608145274856 -3.528174741020785099 0.73961726924530557525 6.3239182117454735277 -28.181916150416622457 14.12327224766395517 13.935968065223161005 -22.194362893779508994 -6.7756558816338312567 -7.2933751584541735014 24.91459368860268242 -12.934216995607698664 -10.131345320502450846 40.74196758667963536 -6.1527069035347539128 22.81663631889688304 -23.345846289152007103 -17.383309207402390939 17.884615589370611133 7.3930929161327849641 5.8234440215955380893 -2.309960288859677302 9.7361818962704820279 -18.699861892113386119 9.8570744712517281982 7.182979090020753965 -11.855274326963996856 0.064901242482521048771 -10.693768256935845429 11.265025066567146084 -13.62208196798971116 13.548771431952154387 4.7719274832129814357 -0.36538373427903259039;-8.7558030722238804344 -10.190210419548437315 8.1077063761446162005 -11.251433823316014937 14.097083745486749251 13.403596171284664962 -7.3884424996929567442 31.362814267605983787 26.907698066360307365 -58.009091104799367145 3.1769287336139431233 3.2545891726585658432 12.489744139548312418 -18.697594973781111349 2.7882585588861101833 30.603484265158201083 -44.288030253380668455 -10.931155124984204718 -28.493472884596737771 -37.340517274730196107 32.677057407399388467 -15.825140814478629636 -3.8811826637717716793 1.2650945267050617282 -1.3432326645248404695 -2.5214253365814336405 7.4346748015248982355 -1.1259255193113071325 0.4097800457485060166 27.604228712390799672 9.4314759480941336989 21.142884808548249254 9.1858233268065934141 4.9363785496679257747 14.207323577638279133 1.4258488140416825107;12.212201401851650928 3.7191021156775523338 1.6165438489640331365 3.5864063937452934638 -0.58715147534180478495 -7.617190906490126423 27.638825220412417849 -15.143509500790738542 -15.046363147421816464 24.942687089584254068 7.264859691728192459 7.9439951235461077061 -24.903687144107532703 12.390189177844035839 13.499534553824075189 -39.709241594211363235 7.6811198121258996707 -22.420615197676816877 23.909048656612753803 19.394537532841798821 -19.962840556502101208 -7.7302217113183253616 -6.6206021731222746141 2.0842681473174176077 -9.994331333577342491 18.649410358573305757 -9.3329657135806414203 -9.5407539854205012375 11.307039022774603154 -1.2063736455731057795 10.477749480365083912 -11.903479653503612923 13.363323565169983098 -13.507334432582961625 -5.8883883880559206858 0.31517469962965449781;-11.73446747110149424 -0.4269786124643554226 -1.3416838967229036683 4.972105586841406577 6.5282018011649416422 39.455940694741016728 -8.4628454241967396854 29.88714689587794382 -0.37633183727773933391 -17.352879126396111076 -6.7776880630683420392 7.9809121459018266265 -4.9705856661025515919 -10.721047400277448958 -23.357192027218989239 23.405760056023755311 -34.377246460307006259 5.2048220868727046451 -36.733955904824959759 4.3579911935414274993 8.5151489615569317948 -12.052705316596551199 -7.738018246313242976 -1.7308045183781948229 -1.7121866013339017698 5.4243358357438502537 9.4429049197733547771 3.7282535432769776662 -1.4759420758902024318 19.653730875466038697 0.6087153475006368275 15.291315699689926433 -4.5662752628780154396 11.88000612797154254 -6.151865695961800995 -1.712393206419423386;-2.3326643321622975158 -6.9089386071194125449 8.8264421628731710712 -19.396559315512376998 9.3576692894579220905 12.810015435587922994 -5.2508458133086000075 15.480703327054140317 6.8640165102019583543 -29.773093013915275407 31.819807291470592503 -14.257672146487296416 17.544617451792213103 -15.883690488421418507 -9.515634649191248684 16.329906067088785449 -3.0678769625922956976 6.1520168034976387972 -23.989456362436470727 13.773220914495901468 18.230944369285694506 -15.36737515200631421 7.3730561268463192803 -5.2282240466155656122 6.9498977965709833882 -4.0605829355630644883 5.676810410460545242 1.4490501849289916247 -7.199174082019347054 -3.324237382903567628 -5.7442987375810634632 3.4289884668258236999 -1.9796015445748427197 10.535987974812137224 -17.961307745224420529 2.6332626049204330698];

% Layer 2
b2 = [-0.056567790573859265402;0.013025737144425583378;0.10084101882447754628];
LW2_1 = [-0.36311532820405195698 -0.34020771657419990319 -0.00058427173796419054619 0.62394637685335996302 0.58770666457403064609 -8.8324289914327565043 -0.36921058531218775567 -8.9983864085393143739 0.53539351375832955338 0.33356812927261580981;-0.52158726920649645109 -0.57917955985437064026 -0.45587906008156048321 0.99215328420814430377 0.49287131204852940858 -4.0630714561464307266 -0.11185994189803581678 -4.1331463435054107691 0.10746023651338379445 0.25662881261048875459;-0.15799483683549528368 -0.36731462564291184059 -0.30187038297571838763 0.63701339895222675036 0.40555636612031964461 5.4377561112720913528 0.10512976359501188806 5.4216856192837425965 -0.11462103283906009688 -0.001524928757481024133];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
