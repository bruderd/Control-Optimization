function [Y,Xf,Af] = nnet_2020_03_05_12_16(X,~,~)
%NNET_2020_03_05_12_16 neural network simulation function.
%
% Auto-generated by MATLAB, 05-Mar-2020 12:16:54.
% 
% [Y] = nnet_2020_03_05_12_16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 4xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.53328560304802;-3.3960269522491;-1;-1;-1;-1;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.43875632806486;0.412938686407154;1;1;1;1;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.88035083806522629324;-1.5856850741225738677;0.50966603363709195307;1.8201413162225474895;1.0074439147375024994;1.0642954690251973382;-1.0814289742894962476;1.0799556064298356794;0.84000882680759370036;0.67451025736833747359;-0.7338252367505858631;-0.55228559695734891211;-1.0512966330761546185;0.69843761851892260939;-0.10691366210609447307;0.53191869250267775904;0.34139938448671597326;-1.3338241291800294608;0.67392818234800300203;-0.24932401410729063129;0.22187175730125768824;-0.36255767879178107949;0.96839155599459370016;0.78435996186259027141;-1.2843945513038088624;-0.97174689861016438908;-0.75861135153782222051;-1.8176389803757051489;-1.0478507197733655243;0.36274003640556062855];
IW1_1 = [-0.38752254509911449043 0.62012911847251395159 0.53941950734901655817 -0.3591428502104030418 -0.31641953637312453251 0.31986546900456130915 -0.79161337671670251037 -0.57602157988020596946 -0.36300549636301121526 -0.23121673338626777539 -0.050779603999334350928 0.055012603913409084677;0.53538337300596960944 -0.2065494928199659852 -0.32857011769328592354 0.51603097471898173865 1.4638389878562878543 -0.75651674862174156377 -0.94835044873877194505 -0.23974559002122761142 -0.18030221570357291005 -0.5383906672492382306 0.17847469680599511999 -0.11264569942868801755;0.076597990845829799778 0.75101888022130025568 0.20292458744839939055 -0.48317411129416792948 -0.54502509985993929931 -0.42835770504148124038 -0.037763379448614631251 0.41914910106871799966 -0.92041071900187121368 -0.26049220629530278615 0.22808330712255234229 0.14653467475657205865;0.48967536340578210474 -0.11208753751936544052 -0.26086508953130593813 -0.048698084888426439176 1.2749202238120476149 0.42521896198946840251 -1.5732963195154743286 0.71496195258262351668 -0.45699657753821304462 0.11061088950861069913 0.2605982199576556968 0.36562783324940362206;-0.17240435513842677917 0.32832699034501428015 -0.17330732167251558518 0.01548945904771191831 0.034745233879767981056 -0.53939329409871528132 -0.36568029324689255155 -0.506230706989737822 -0.42060328549116371422 0.57579362396805244817 0.072607643386237402661 -0.1514902625777094225;-0.45761499194491339626 -0.58649597910510331555 0.065280671641496687552 0.4421010221434928944 -0.63982564738931124726 0.25379101808123027961 0.50236946553618389011 0.48197808159538718664 0.084792104362406903184 -0.1707336263097760376 -0.26291596654286764068 -0.83717231051455776036;0.15998645103895448027 0.68527150185425711459 -0.17238560887093076768 -0.45784402029866305694 0.0074788173336208484121 -0.020616142570372260334 1.0188521119118716385 -0.97923144429259556532 -0.3886011728787678865 -0.19516961541076013886 0.37968596999258397151 0.6070210597100706984;-0.28693455743741153041 -0.045653045599193475823 0.17516929874178385762 0.10613268118793081629 1.2744206637455413045 -0.01263201381572530424 -0.93651130033384333284 0.28529530903293964794 -1.2979362223622801231 0.021620280024509271749 0.20128448931991482773 0.67177541657919759288;-0.47956699811859693217 0.66640398076202722599 0.38698501908681948169 -0.26814886998899584158 0.47122024892668867846 -0.62662158783925836492 -0.44547940706204025574 -0.27346572034820526564 0.42494793892049753659 0.54789527944392724113 0.019009574717067566352 0.090120528862017018623;0.31006675353063156697 -0.57794397224953386605 0.26012261438773881528 0.6611112647323786895 -1.1346859581694435093 0.13220800167710389239 0.63908891138962609091 -0.57882612440391800757 -0.60255362542635004797 -1.240854013256359023 -0.12777301516739300591 0.044224064095168845456;0.42857457992299546889 -0.34917007755397211355 0.078092875719362117581 0.10122240417130794199 -0.47359719933702471018 0.41831660330682696181 -0.79650368610730115648 -0.16216027830282642164 0.32819708847308148858 0.91668179813048067395 -0.48142364970593820583 -0.50254092988900955774;0.19694204871368420351 -0.31803197293205731633 0.061854832874129787867 0.28145606642347548165 -0.69127071259922301394 -0.40258644473512972262 -0.94814731794058848546 -0.17692601703581270489 -0.13073355447649251393 0.077022458135888247077 -0.059667861697727607451 0.051999389921333426245;0.015479678399131550914 0.5072113959222389612 0.11260024149300933149 -0.20064917245641730736 0.42222201123289149205 -0.22526838641886820502 -0.56515129665114993696 -0.18750653506682349314 -1.0171057367175799779 0.67716540522798740476 -0.30357026542723669627 -0.57276924806117779365;-0.40623439054158477779 0.74408375518404124005 0.43311289616927672874 -0.35176882396878184078 -0.55641546879435455075 0.58869700070350361454 0.10326460833673835327 -0.066500491958829940908 1.0302681497917705045 0.20356927775337632647 -0.98657902821956544592 0.294494599098674259;0.10594903184483803193 -0.017698871631361749041 0.02517128561476129206 -0.20001032562539874937 0.91992511728523862491 -0.60903862727372926056 0.33061446851732506635 0.13169378975476431215 0.17978375089251866226 0.47746268835443111955 -0.20996241522384662126 -0.032618805851986787392;0.65193058577302709367 0.34731240661918411083 0.41574318489524170195 -0.23315555273379415246 -0.25663305193540314475 0.22341093705615486242 0.27404287334832805323 -0.23119383941666729609 -0.34503214694426798115 -0.12883013653523237019 0.26138622450554022114 -0.029717008469774909563;0.031359810376226510131 1.1048409573642938852 -0.80180410934964196912 -0.67415451668466330748 0.11568919705484440041 0.22183699329320982763 0.36607465178870624012 0.10625026694601621968 0.31503968969894602381 0.1920154111541561015 -0.23416823792641311419 0.19173741432629645698;0.34823765500986186838 0.29074523064359897306 -0.048731732359372115226 -0.13197769041801488132 -0.41733954393156408313 0.68079392864390630979 0.17775658496049834278 -0.85914062341221730801 -0.72968446455274360574 -0.57165081306737264288 -0.82515673109789744455 -0.10918132487703219313;0.38791736546174637734 -0.35345547113075193035 0.16782834752519007471 0.58189040676374559347 -0.24566825065021255514 -1.1064769919593957503 -0.73322150099232497045 -0.65939405465685729801 -0.56568383498815133503 -0.27093804318345898752 -0.14946655636239847276 -0.76030765433650648877;0.071484626679822652062 0.084217901277420945116 0.16584943978378996476 -0.13452857779591961829 -0.16201084073657362472 -0.56887854499570911226 -0.80964701199358357631 0.59727706191450213868 0.16200368186470776033 0.95873973500860354413 0.13968931189623579048 -0.094674875856432777477;0.0055772457108891598104 -0.23150558126497025602 0.27307748564952610826 0.44809958927256571259 -0.2235496414312531932 -0.18928796694342867046 -0.45320117060645803697 -0.11116392610678288433 -0.53551641444253872404 -0.50217751835936907945 0.054954971262309387781 -0.49478551259165010068;-0.59073231013389315702 -0.62453551719105615536 0.1979063440103107363 0.35338277397718342865 0.34498995802956400336 0.61890077877053828459 0.25990983472319395542 -0.060801140469846533254 -0.88934736634464206517 0.25141834015010733339 0.11084650334851896269 -0.23188079612458156742;0.23213836980010485456 -0.12280913861577481827 -0.57482247419017939993 0.045329993719739287983 -0.1377649416459228171 0.93194248541719204582 1.210452409092509729 -0.75574654761347892507 0.93895545911459665778 -0.43545852781280219856 -0.21658022682400085435 0.16629570155475045801;-0.069551001963899378167 0.2556160611678605088 0.044347447368516208777 -0.003925126664069857399 -0.89015565976696031658 -0.19733580204805448166 1.1119043108200370451 -0.14851278848669927091 0.81146723966695066821 -0.48700917959204104157 -0.19922093792902587084 0.14070635352672214435;0.13105690613235571051 -1.1224234238631880523 -0.29815254049950551396 -0.60950451524481741306 -0.041995540345271781257 -0.45875757062727129387 -0.2167535194046124325 -0.27954404885076383769 -0.5549966433114219555 0.83472576693993916219 -0.10356848602682100502 0.54900375696152281524;-0.19956503971227473881 -0.013783016651936711577 0.024099579994587533305 -0.0086463387762087950961 -0.24789407229163445967 0.14039456218346679783 0.059785915582328312545 -0.89961983088616559456 0.54143339248753463711 -0.29373992294276507486 0.54688820974411112008 -0.56261671969255344639;-0.20401240525284974892 0.37747990796159164306 -0.14977264400500558961 -0.4893557955700608697 -0.13314734782012571657 0.39108956525431626261 0.96902353195058177349 1.0936889643970233443 0.28015008025474819053 -0.77860445355848473259 -0.019503087335560203436 0.65233543993977893827;-1.1255754635355386117 -0.73443275708086552811 -0.44844093563020615001 -0.11257833374270288795 -0.23108153467885078625 0.32259945350426011412 -0.35228298831988763551 -0.23185993772994092921 -0.68372019970633890473 -0.72407424734850267534 -0.45415938639234865182 -0.56890535451331647465;0.022989484980897798017 0.12946622764522697224 0.068755409858151136926 0.049443507615066037419 0.35002279493945082089 0.40969180393937681961 -0.67097661680431197606 -0.49251889786642427671 -1.0882389172790645215 -0.58092067909726108343 -0.53264204952349658573 0.47706110771715798391;0.5170054557576612142 -0.85046864081875972463 -0.15326410307857801785 0.67177701637783626687 -0.12886716468634920596 -1.0167951422115331095 0.96740836579549172036 0.080731729177466737823 -0.24562678975957391581 0.16870938939731680573 0.04540993168406488173 0.091887214474332137848];

% Layer 2
b2 = [-0.089211386122212577021;0.42002981654984927751;0.079789299161317467357;-0.33813767855695581188];
LW2_1 = [-0.089209729342476382086 0.034555938433236302321 -0.010072208956753687589 0.0094932442643652029807 -0.81549641101359759965 -0.14501441804947529102 -0.16369589482968685545 0.055238145718107367621 0.35031896627861253135 0.093380831139119532813 0.40065231075365254076 -0.18359188643046267519 -0.086332685545682436024 0.18858220031707953468 -0.019203451476725901664 0.51552229727561538208 -0.33364510673669356411 0.092701578225648673115 -0.046776051211557791165 0.098727428677331821594 -0.12331386433224862664 -0.39011164776164419798 0.031331819079289439933 -0.071484771930093143899 -0.031988505885775543602 0.044039822023700367359 -0.32470419493234864428 -0.027244510937197111144 -0.048542576802660081237 0.016829100860575620796;-0.6569034671853615226 0.7682320306133834098 -0.88494786750509379925 0.55964342505350228585 1.3058116441605835956 0.13566313466426319079 0.11870982241384264722 -0.05937556525167499849 -1.1132306196741599269 -0.0057127285077627279475 -0.33612892478683287223 -0.42465351115163557649 0.049692239987334588247 -0.06370215890259507685 0.34194986222533668707 -0.66941598856200890122 0.45960130774377228047 -0.077690309848519351066 0.070626391542212660357 -0.070376808719016969995 -0.3977092366176523397 -0.75785345398277004225 0.192166602155416949 -0.52846780872439791388 0.03983585395560135245 -0.11142189812181942099 -0.3660825906334765345 0.0039046732197305228373 -0.021162940819107037282 -0.67111540998607943642;1.9018113932177926895 0.78018444784642726475 -1.2856138791745446159 1.5893697652324159098 -0.73710786614531798033 0.4884784274205974941 0.68858789137258935575 -0.3517344363636068505 -0.9928170066098165325 0.64981988528066436661 -0.28840186461343841895 -0.30443709613866437591 0.051953320439175540435 -0.011599822255998627762 -0.33490008875577037539 -0.052917876219695250684 0.14551481438920083056 0.17831622297226770724 -0.25524229457439095992 1.286384513087791337 0.37421370035043238778 -0.15583891180050318814 -1.2800003230162149137 1.5013759720276436127 -0.012206094693527118344 -0.026300483898430589841 1.2914395056326894995 -0.038794610397419375392 -0.064756258997170509928 0.56311579691432867012;0.27311018490703781181 -0.77870306807721634268 -1.0503277333774403424 0.50708445266435020482 0.75641567877983417745 0.2288552259353872631 0.59431019611428748117 -2.2925507545359198325 0.36533531312041306327 -0.85484310988917744378 -0.81720835642417155587 0.2927374964140737057 -1.9748814436138009132 -0.61533561245336854117 0.2566068477075229004 0.56785126509455685628 -0.14138287157733209209 1.1880427253457950254 -0.17861022114393843019 1.3977950344620857503 1.0017214538438392601 0.24098525183021465845 0.56352896466448787471 -0.65893756060128427787 -0.015417689716389430463 -1.3511655822574122343 -0.62207433897238029186 -0.043555321928562359957 0.88787828179086858427 -0.37423493910615357461];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1;1];
y1_step1.xoffset = [-1;-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
