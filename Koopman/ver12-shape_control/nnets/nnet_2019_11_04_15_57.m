function [Y,Xf,Af] = nnet_2019_11_04_15_57(X,~,~)
%NNET_2019_11_04_15_57 neural network simulation function.
%
% Auto-generated by MATLAB, 04-Nov-2019 15:57:39.
% 
% [Y] = nnet_2019_11_04_15_57(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 13xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-3.11738622696302;-3.21151194290798;-2.76971243787888;-3.72888855734577;-2.40985760053113;-2.84419283669366;-2.86054100478889;-3.36119095716313;-2.38486137538853;-1;-1;-1;-1];
x1_step1.gain = [0.318398780907246;0.342971068344154;0.355702655346419;0.301684541348909;0.359682087726338;0.342519045641102;0.365607482272337;0.373601489862757;0.396403766756011;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.3491402014040811963;-1.4876429275089408932;2.8278917133364247505;-2.1238053530929708046;-1.6016202138533777166;1.8270400650962157485;1.5069429840674326559;-0.72216106372955679582;0.059158244101702131545;-0.11532173548122096052;-0.090997295625331223179;-0.45376788432718451194;-0.41895051305363900651;-0.18095083832801434065;0.34193448347019672617;0.049153414501640971257;0.040789475448103643118;-0.73539974353649806282;1.4927029185429676605;-0.15211973797498920535;1.0048373169757003343;-0.98689581526954672785;0.012221325479215894294;1.2981265802142716304;1.6988753437641797017;1.4076682659737833614;1.3067472744785142424;-1.9801747417204611512;2.1665305087842265941;-2.2782146634205324709];
IW1_1 = [1.0338896583869092716 0.15966508833144177348 -0.13316272149248753465 -1.3672282525696013433 -0.61397068825318890095 0.23454138067252588984 -0.61093585046580167752 -1.2430724694220540716 -0.23622647985203562571 -1.0400165525267639488 -0.88463030629323091691 -0.75691663267097475387 -0.92592560564888326535;0.72878503744900413608 -0.41223687837260808431 -0.65015497354204554448 -0.73688740539016206466 1.1923231330377332959 -0.67738778741969085662 -0.013548168914935848628 -0.7322984436056304558 -1.1217226141879788059 0.66767364307142540447 0.29913507837874164785 0.30803537615240988989 0.10357873159313596423;-0.99067013428539540953 -1.3660941851675802994 0.39922593303973841206 -1.0472048091581183105 -0.99689913021340315069 -0.25740221938922203115 0.80694069358096964795 -0.89725462143640899448 -0.30413470854585838987 -0.1661556392384064551 -0.1422675192589227533 -0.91856225920137601904 1.1771687167048958678;0.88789195065423365261 -0.523965073161024808 0.96035583801103752144 0.66481854077945223835 0.88548970961392414747 0.80940711105753471166 -0.36436356333185093703 -0.6656539359954564139 0.54902877356098944706 0.41902816134081832811 -0.40607804703909561317 0.70640439387132702986 0.43179168014461100089;0.15675749387758869391 -0.85724610818547020141 0.23246091247369393695 1.5118622512386090673 0.83760744433880574 0.44377918746852540455 1.0631173816656582787 0.40512253800261138759 0.64874751356179216621 0.4503276780080429087 -0.093790975024161588047 -0.45457487287601994197 -0.64085405986541266188;-0.48079349780485824972 -0.36823768856547767214 0.69303248631753178177 -0.92617896980140168584 0.73306236539722335888 0.7090047417654108397 -2.7065747877273360622 0.017146569075932573123 -0.16273587373165587788 0.28013134461868777203 -0.71939497086781778457 -0.90615989078788550248 -0.31451625414104522616;-0.50496277767796959868 0.47448928268476331382 0.17961205308435140848 0.19905749460427360487 -0.8547914643109434385 -0.66745661924847343727 -0.033056495949953239311 -1.0756648909220700716 -0.59586066295284834116 0.77853591018424850301 1.3898224281243323208 -0.38449242958321083741 0.58812059738985100754;0.9723183030333647503 -0.001864186637517091516 -0.68298187712025903995 -0.51634210057926144266 -0.55705598151938928719 1.2270588112503608702 -0.55527636560801096888 0.0059847746786863970092 -0.87666720678456622196 -0.17337723442114630346 0.6065674075500200324 -0.43145754552981646635 0.91785212071069754991;1.8548081206941202659 -0.19436756783418521199 -0.5474759059189380217 -2.5616887872631912693 -0.49570933973122272009 0.63847185179035836899 -0.45082585135642827545 -0.33249571627688256914 -0.28399307566791665014 0.59420901720079977171 -0.13668937319694293708 0.25773784074596606253 -1.047700500519379796;-0.099025350112553978121 -0.82324503124258963105 -0.66623079065056867165 -0.13781254806398746116 1.0945401040003930326 -0.37508096081445368997 -0.2340859658244999475 -0.97538067484657042794 -0.57898819335714046819 -0.045460448274007657365 -0.8623735852304127425 0.17995076608070764701 0.26029056305818781825;-0.52443921075572297319 0.6837508585952398743 0.94767144914215795115 -0.85730517037640241451 -0.21058993986794646847 -0.010611628517600071864 0.5537873532656684139 -0.062884009904060303442 0.2010286697053753624 -0.76436073780477697959 0.40378340228716846916 0.68289531864729868804 0.38046502145901756053;0.78502929250601760636 -0.53625602995755361491 -0.38281016896687347639 0.071589409275865503735 0.98782557589343444882 0.09422067912540606216 0.54344748235524864555 1.3545785793514566464 0.16927073102718606656 0.41224561213083793509 -0.33349198273885016786 0.72175807828648030906 -0.58341377328814958414;1.1004171508777154109 0.40801866184999269205 0.40521226870569559964 0.55616977196598726962 -0.30290943542132220401 -0.38977054499531815779 -0.18056770230098498353 0.19783362928805542369 0.27200741465058131396 0.30041299217081279815 1.3966372051355513406 -0.47295122089824059852 0.044639182344738792541;0.21619480811454272473 0.69091135976934281437 -1.0656465028768469239 -0.02633279228392634147 0.10013273707081171704 -0.45952428900944874979 -0.44614866257425478402 -1.6775734796328505283 0.039405100352126541663 -0.053728077566201001836 0.17498017220264697191 0.62421003523958940029 -0.4051911431842519784;0.47097422542324318684 -1.0626508154613127921 -0.091331227136535131361 -0.14774775791548230841 -1.0309740602134216392 -1.2479278065369436845 -0.61433233405331721944 0.85070631769752125262 -0.55411356459259053509 0.95632386840628180735 0.88744604991057995935 -0.078715579173431957094 0.36910053164985956453;-0.77209913203658619985 -0.32645419445004875136 0.092188253588652943615 -0.63264381305803329969 -1.2532221925853563871 -0.88089065100682251153 0.062597623200330881899 -0.33299187909244393202 -0.10822126997755382449 0.275671843791728155 -0.55860471372483255781 -0.087692600224884620363 -1.2059196438203445556;-0.77678705434636663441 0.7566866574969548509 0.005969934976107788005 -1.6295940460813542749 0.97273265083326676539 1.1465269762420018385 -1.0060645244788206654 -0.36953178365862354715 0.1776878762958847835 0.56479013412572565134 -0.56725183092082143155 0.39420789160829422526 -0.18325571621641098541;0.89397416864051182372 0.36237391666406715274 -0.61508453835081899896 -0.29412240277212098327 0.065361145282161858816 0.27572885478433750706 0.3357286800945161187 -0.27234017927756853927 0.26035338509276645391 0.77323536779732171542 0.85613895543958529188 0.91372641966139267478 -0.15439208412636482026;1.240843466454859767 0.078078603446001815236 -0.33980023063680614426 0.1959787108486391316 0.058967438204936897805 0.087379554725867308873 0.70228188457787954491 -0.90514524091594317223 -1.4528321363043021908 0.85742986768076023818 -1.6106251582319435212 -0.016885457932580713591 -0.93157258718165758538;0.64404458125934904711 0.88871347555060709045 0.27516008498464961107 1.1455363070793089797 -0.69918566662060999128 -1.4749833870516648737 0.32515622462527771219 0.26726527071053168827 0.5152339933873149036 -0.27168228309196923442 0.20776378987200258552 0.35916397005035882728 0.90612147937722631319;0.18825510072297080288 -0.73050541779607469639 -0.27137080988156020434 -0.19156384152845401525 1.1330308374815147854 -0.56540684459453083299 0.97954982157305825474 0.37689613263172394575 -1.2682247010106555418 -0.65515952313286085484 -0.6328123535850134207 -0.42073189589815906952 -0.47772211367425310158;-0.59122784735923927801 -0.042704464313504185424 0.4394185270628924167 -1.160262320927918589 -0.082101522594494061313 -0.53742514325937973396 0.68987326627777156851 -0.82617234106264580973 0.83608961290697048074 -0.42833044204294579149 -0.13949175500529636951 0.43194483701623798133 -0.32696234856590250528;0.61597793016232771368 2.0299461834193590626 0.56693160948349374806 -1.0200615801112502545 -0.54357038128380608111 0.49876142426168612598 0.93676550130830182894 1.3473123453607083189 1.1012154267184059986 0.93939267641016410693 0.67014342422677108946 0.52442042026795410159 0.26626148528664483894;1.2386428679125491836 -0.94212427120391117885 -0.57867015644421937459 1.4438847923610300672 0.20490791366320085243 -1.64193765326680019 1.3906612744404869275 0.15871447310322298052 -0.025665375701009955633 -0.37724218543125465075 0.54241394621726057856 0.46506125931694042297 -0.34548402016798435143;0.15091319710620818006 -0.30135174483048549066 0.80684812069133815537 -0.6990922189090932326 -0.59437803249786047566 -0.59658748707714592818 -0.16447469859389812763 -1.0478264523681395382 -0.79847349254433652721 -0.21056804271356568958 -1.1884077144971003648 0.12295207865644521006 0.035284224097627658878;0.46986315230476516369 -0.013421874509978917039 -0.28803984172212204751 1.0444593632204284273 -1.0545945019853109059 -1.1372787909373787141 0.96853478653081170879 -0.25345472535441843087 -0.36258965651415486775 -0.99860974515522060724 -0.72174938496924390119 -0.19859484969458654491 0.21433660526350725717;0.58386589891332241198 1.249249341124228474 0.96135672429322083232 0.62783091770829813072 -0.55200946321581467746 0.36375273909449529208 1.9138430891660620503 -0.73610395699239283829 -0.30276772230107928952 1.0883043888963661594 -0.6762045832545927615 -0.35029977843196652421 -0.31073852880796298814;-0.26006104741575086781 -0.5174292742216904939 0.78636660831247873205 1.2065338099707023645 -0.75100770280496242925 0.29648650858104241834 1.155585285840487364 0.32465101517278083243 -0.053755736102286080791 0.61337511946339018376 0.013200158815765802162 -0.55677349436253209536 -0.13274310835408822951;-0.73776810522157143524 -0.81592296126578611748 0.50608678320726385724 -0.93774542773879754343 -0.76796160963060666749 -1.2210916637507525095 -0.61533812748424099315 -1.9667378691173713623 -0.19914148846871776444 -0.29048988963127125862 -0.28041330170567435598 0.73691069772942574545 -0.4304007590864155075;-1.9036523037366273048 -0.38091300585572818171 0.46831602325223381511 -0.13951700697173394228 -0.026612449077254927976 0.51477484611166401951 0.10067834144037517141 -0.21669259682997635275 0.81788878389026409277 -0.14446406254199675723 0.61409357649155893455 -0.84986136398218903309 -0.60920886482046365806];

% Layer 2
b2 = 0.65619658579154660494;
LW2_1 = [1.2691288313829098833 2.0751469968672977551 1.2609898498812073253 -0.90731927007846291389 1.3398829354992385365 -1.5128701338788641539 0.70333680919871488513 -0.92025488910841746204 -0.59943648346778699576 -2.4733634886136215414 0.47287301362956424278 1.3325770118490829486 1.1421583529970482651 1.4632252488672816693 0.6556505289877065934 0.95067945843722467814 1.5282406359193845269 -1.1463001140489321728 -0.98413553368451012204 -1.5053078950739995356 -0.79996409837136783771 -0.56985649518107484024 -0.50306408047050166221 1.3934035244187805702 2.3270456647865174205 0.6899340993092277774 -0.60816180658938068238 -1.6817778424063836162 -2.2270960645973212344 1.2726227689329825399];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1;
y1_step1.xoffset = -1;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
