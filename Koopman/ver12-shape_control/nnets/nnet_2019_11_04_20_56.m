function [Y,Xf,Af] = nnet_2019_11_04_20_56(X,~,~)
%NNET_2019_11_04_20_56 neural network simulation function.
%
% Auto-generated by MATLAB, 04-Nov-2019 20:56:40.
% 
% [Y] = nnet_2019_11_04_20_56(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.0414680022291759;-0.0262478593634704;-0.0194075445527305;-0.0150152300885408;-1;-1];
x1_step1.gain = [21.4031105149736;33.788291631072;50.4516621593694;70.8605720879517;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.087132369438443629805;3.8378846882355701631;-1.3977903530767421536;-17.020901122908689729;-33.998018963726181596;36.267747540059936284;-5.5644202274238407924;-0.23162445266738648786;-1.0955833037876985259;-250.50188416904614996;-14.782734240909428891;1.2663813676558783872;-278.16893028684950195;-42.484273743349902475;-282.07558216055650746;-5.0612988510580443346;157.34401040519188086;0.70606820883897025709;136.38652915120596276;20.223048870716826997;-14.452375593414709343;54.970538356413293002;-2.4702976705004329183;1.0861779199775425386;117.34289543012546631;-5.0490911852807398574;5.9935748695315336221;230.43358967246570046;-91.862623376623929516;-1.3133225228202889401];
IW1_1 = [0.24974210653048312114 0.30423254716772568651 -0.18827584199086003225 -0.3954778596800661572 -0.68369978554657862002 -0.41460494666482439197;-3.7776035793153464049 -0.48751616520159685164 1.6444135164919444492 -0.43575666597257856072 4.0155514390567041971 0.59806629969378566347;-0.32606125202781327532 0.66198012125238925307 -0.38284789058110357818 0.862558296634852395 1.4437256529048121401 -0.67749094564772149862;-14.697114566352103893 -10.328910868643927046 11.85421704103644025 -2.6113449395432506428 -22.559686997889269122 -0.88359418015310497996;6.1878088652531237912 6.9985285178602332223 -0.13193088692275867224 14.174253331613593687 -55.247075833051709992 -1.4529118832708178832;-10.804716950636112927 -10.28711292124113541 19.108250035743399309 2.1643703459933254507 61.975293565694364872 3.1688575123563915703;-4.5347333199181152352 -1.7541295786978132742 -0.3827301420241160379 1.9133607386636399816 -7.0197210317838889537 -0.81501867554266949067;-0.11808788350658123989 0.50351777377526230062 -0.029915459589415941549 -0.15952497562107831319 -0.53427592242946886358 -0.51242757358367796439;1.0712596321727374526 -0.24606915697295189682 -0.3568537320098750798 -0.44566772582445413065 -1.3801254879027033962 -0.15192597270394136988;19.613217776861620933 59.413414623696333194 -58.642630962266160566 -83.449697537250003165 -426.07726336654360466 -8.204630490570018253;12.304522566289827878 -0.40619265289069295122 2.8846789772282432907 -9.0617880546310409784 -25.864743713725289354 -0.85936446884854134076;-2.8540446163136423685 4.0875543820178217302 -0.42306921781852008246 -3.8625723257573953973 2.0769526469549894898 -2.3842997735357362998;-35.249628379440530068 20.366576694656693292 77.82183870094290512 80.527803632622308783 -439.89483940719674138 1.7983929635698996385;-8.3783212341628221509 -11.250447755974331443 11.345361351109508163 5.4829413791668031308 -64.898676936290982553 -1.2203491933366650279;77.888468845048905109 17.738256382686774515 -56.874464916158416372 -100.8068788322644167 -481.6190744477846124 -6.461539181021572098;-5.6470584159931664914 -1.9102114898915529828 -0.8915954287387123367 1.7149140109719946956 -6.4839871267146698131 -0.87079854079054686;26.209771219347221205 -45.778501315815717021 -25.204076327682972902 -23.252411825983323013 255.83338346160763876 1.9412396748108176059;-0.82325627550838442748 1.4995704937630782716 2.4546740653800691589 -2.0588607338788671441 -5.5500768473967996286 -1.7992419537089796577;-50.393862911719374154 -16.034111749124143387 9.9328616991028066963 18.522017608086006391 233.96066651849088203 2.9166242194512781438;-16.857763727111851892 -12.619563749612423109 5.6127584745543011024 4.71744548847687728 38.585806267451104645 2.3029232386805742472;-15.831938738477077777 -2.613701523821352346 6.2017710403005992248 -1.4557636667561699717 -20.134663421777368342 -1.4221364379335856842;-22.948961057825211896 -8.9001319315945863764 6.4434366330874679463 10.118848242765102086 95.512612380440785387 2.6846708427460663771;-2.6334717486973859835 1.8923769174857061337 0.50457330677155798337 3.0716373873457305521 2.7572331203017750312 2.1980200799714912918;-2.0081103983783612499 0.15203755992704606759 0.69650810640061189272 0.63611845630550889474 2.4862907845601807111 0.51416378034138587871;-17.536740177350349512 -13.760157873859098387 -40.864488532272041255 -13.70514118493953859 194.42738347661466491 -0.57099585168737643226;10.021657327323630682 -0.72792906198863682743 -3.3811118561736841492 0.55049290181334353811 -8.945959948481920776 -1.2349929752507202707;-9.1396596133545244811 -1.3118365318509801476 7.140859191694844732 -1.128590045205728476 10.092233247227591519 2.0255450677649871061;-29.388497869265620466 -41.409060574227311236 -67.01028158578668581 -59.856293759077644268 380.21260561884849949 -1.8396389081930153431;-14.702118121742479673 16.592466367543590167 -17.026294746112924372 -15.585009940167996234 -149.8931658639373552 -4.2022235485747092554;2.6823447488863396693 -4.0266165748281554926 0.49101784752578198079 4.0927126518506042885 -2.0866850589130425675 2.3776402277451458289];

% Layer 2
b2 = -5.7784081351724632114;
LW2_1 = [12.206786057965874903 -5.5206026678346127312 0.80415929967697397096 4.3006593762155347349 6.9657821644936692707 17.20091469752390978 4.9269608861975715541 -11.005262882413228809 -19.522500330906147781 -76.937005342445814904 -2.7093870531411985425 -2.7263693990099864273 -50.844487897005400612 -8.1621206025323953526 53.513781035075254522 -5.3063993762703276502 83.752163614198025243 0.16751503787389379618 -51.024576966760314178 -6.6993879576199057979 -5.7348489732440821598 -32.10698250864626857 0.34467356957928257932 -7.451362606732310212 -46.828212931661894913 11.056691683597291487 8.4689145575827105006 -95.969351322719916197 -53.644951112620987033 -2.6282039767291029975];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1;
y1_step1.xoffset = -1;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
