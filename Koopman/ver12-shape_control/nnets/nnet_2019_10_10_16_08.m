function [Y,Xf,Af] = nnet_2019_10_10_16_08(X,~,~)
%NNET_2019_10_10_16_08 neural network simulation function.
%
% Auto-generated by MATLAB, 10-Oct-2019 16:08:19.
% 
% [Y] = nnet_2019_10_10_16_08(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 8xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.579754433464736;-0.805543758446051;-0.203588990146155;-0.125523154590286;-0.223927909142362;-6.17935470084711e-13;-1;-1];
x1_step1.gain = [2.14010824611054;2.03372170692418;6.20638380148667;8.55015998110298;7.84113097277866;981642116310.616;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.5914173262465327596;-0.39541951058842361721;-0.69155600944397843666;0.39324885834169603926;-1.853153765259535124;3.2678622225723521488;2.6282255736702788695;-0.26951925152154693199;-0.2738936475022047401;0.41701044824682925727;-3.4162228192256338666;-3.9834176902484501603;0.787195985845154933;-1.3138746159373977385;1.5598444748794753068;-0.71503286740065485905;-0.64517818982478736256;-1.6446044477154222463;0.53783931390936712269;1.0879617073002294525;-3.7786257691348934529;1.4396773660514432525;2.0406439436971490764;-1.4545825185087413178;0.82766685371943715666;1.1437554448857882861;0.75062602479318307758;0.28285625894269922354;1.912198965574560372;-1.2962431232399667103];
IW1_1 = [2.9141100794281129538 3.1779796913434550376 9.9764005348146991281 2.9509128115596365838 -0.21438290875388477108 10.196374692106729754 -1.9418105646728289759 0.67336227450381724857;0.67293884360076683393 -0.12214510812315042265 -0.25378098893280565118 -1.2739898847376360802 -0.16088326420687060203 -0.37387594201027635199 0.23908742464986523779 1.041928551888602783;-2.0661170063532829921 -1.7457395323949398414 1.3668051246368497775 2.4057714632048647907 2.5687422362118499386 4.4335807754960310234 3.6829660609546586159 -1.0446260480468456677;2.2851675651229141906 0.9567785887417302737 -0.52806325693968136914 -1.8993082019865465959 -1.1065710388991929491 -1.6850264556287715134 1.2576903447961809146 -0.91727603001732294086;-0.079005812216504212042 2.4210780171674368688 1.5358187132516734064 3.0295549083122912393 -1.0464952048298055143 1.6750627020210115958 -1.5865931478994901305 0.74014078156800966468;12.493616598346431346 1.2752307891595391354 -0.79560235207333740437 -28.433393409658965112 -10.819595971521664524 -13.727947436432421213 -2.7146057348317218505 10.085497807715670504;2.2992594819415570484 -3.5616668072628181463 4.6437303424832876431 0.59234690344473606149 3.2513237065981965834 6.516900102651405291 -1.2932342759578068225 -1.7195064056275182196;-11.9007758938692767 2.9503355016581398473 -8.654754971229143834 10.798792202530643536 -0.75880440282622763082 -7.8759438845362756965 0.16757986030395485844 5.0167177031784300212;-1.2954695728416936173 0.48200345361360491525 -0.83051918825249526623 0.62567594848208640812 0.73433076203941471949 -0.2185861242203120669 -2.5747087091169760242 -0.9590913018870917961;0.75827269012007636473 -0.34861729312468231479 0.97939461745126521475 -0.31322544009629404993 -0.8257558977336530992 0.38292405631411502442 2.4043259353198012107 1.034098139225752;12.428381339752693435 0.055023542705450789736 -8.4639189942798704891 -24.999970687349275522 -2.4024311745676918406 -17.023356969932596172 2.9377763248940786944 7.6647946067196608411;-9.4398314723092457967 4.1310919019353624648 -3.7676314245520945434 23.228016013402083217 5.036887679356847336 5.779687482249888042 1.8927302854113519093 -8.2804055283947608501;0.12673317928959640377 1.7969653416592015205 3.2360821650261142324 1.3217082121088969959 -1.5193866346642681542 1.8952670183702895468 -1.8511815483583724529 0.52366857324716653554;2.9984434985387760086 1.3057672706558700604 18.953691428123530471 5.575132170775872531 2.2808714770159377316 21.016784371335095472 -1.2377076491784770873 0.38788799548306157616;-2.39992805765114392 -0.89858292605132461528 11.973655739766167372 5.8981608505149365484 2.1345369750100391393 13.555202423044010018 -0.24572470894437700717 0.88176759623214195916;5.0554791132476362137 1.0103828810566679586 9.5321267450680444711 -6.3461109439992196002 -0.42981190253778689403 8.1886568393045333636 4.0696930991728459404 0.22937937816391629209;-0.16099614570630588206 -1.1001345638275183969 -13.70293477662004733 -1.4216183187324729076 -1.0905513163869295923 -14.474267390680180867 -2.9961069892136507065 -1.9364801480435391845;-3.7217339962586830637 3.8981087332667652134 -0.072955182138168081507 6.2198325313717992557 -0.93094125059869425876 1.583342702912406974 -0.57830542899312542549 0.023520817221395540209;2.790059721138137494 0.79353959200532731 -1.0186255091861171618 -2.5974693404329607382 -1.2954991530941379896 -2.4281350760701911895 1.6687895864016863978 -0.86210611458219643666;-2.5125188380362879492 -2.3581425843608125881 13.079353763964018498 4.1351092358903986934 2.386041086605852346 14.78333634594848256 0.25771033920499353265 -1.3780865865111453505;5.7970836731240327211 2.2126995580125488061 -6.6721769296636237456 -9.5093456692268869546 -2.6203439220974837909 -8.9218551932486942491 3.9815079534280348739 0.18157580934253139682;-3.6086343994907750243 -0.069278858193715875391 6.7661567299068696713 7.8431518385690637274 0.23688414355753498186 8.7596826625861190507 1.6779676648999510835 -0.96759558130087341965;5.3000218018857188085 -3.0250976394159376781 11.005926884493632656 -3.7468394062022372104 1.4383141589779528946 10.395416290512539348 -0.60302169675921624137 -0.76527172772828955249;3.1691030683158465386 3.3929084067894308419 -16.110321732702100661 -4.9680320521717966642 -3.3282634759035447658 -18.318963926130944486 -0.30837500168461157157 1.4173927675196800191;6.7572347788187832052 -0.9019257985233183339 0.63049375107708527377 -9.2805173641636304893 -1.023186565514604629 -0.57767425669000671551 -0.010799686634576761979 -4.4078925770574359788;-2.8255654335127022847 1.7591497331479739596 -2.3164681122509147571 4.005854165377303211 -1.1499099286751899296 -2.6906116401702866447 -0.20363325266554707649 -2.874289430019090652;0.46914537941798040155 2.1877228839995428444 2.3210193785786330523 0.92888790942586740851 -2.0484750184582694033 0.54811286628392041909 -2.2897611878336383562 0.7693860311655574824;-1.6150083796281435866 0.34752346084843677154 -14.228922462161039064 -3.1613100336764117237 -0.78074541057972191016 -15.098860924019545493 0.20526602605609506336 2.0528052329239656615;3.9772529291159814946 -4.1816372809016479906 0.36353582253128569057 -6.7052228415669912209 0.99317968522375221774 -1.2936315192173915012 0.66839571616649384733 -0.29743716040306239501;0.67675090280325100878 1.9056382901124022666 5.4377467911437191717 3.1274254009577502345 -0.86875986180383690805 5.6414098945351565106 -0.97320968930540907582 -0.38738122635854160825];

% Layer 2
b2 = [0.039896215445247830422;-0.68807554605911114276;1.9341827862859333198];
LW2_1 = [-0.89677540074507355872 2.5395717005511833086 -0.78725621832797487709 3.0381022292617538838 0.60750742810116731274 0.016638904244734801369 -0.15270690389051666536 -0.78896232187560244586 -0.59732333388466829494 -0.6826922807601844001 -0.21367810200967166101 0.019253297139757895307 0.54010562494642355702 0.71210935664209307205 -0.18054460778219161288 -0.13229937894101084783 -0.18764840489502088161 -1.5959576667596846455 -2.7668630693280529265 0.63282326286838608276 0.068573253118585142385 -0.055715740236887481562 0.0087306487849006381152 0.60909664395960361194 -0.79851053113245529236 1.4094148966075890073 -1.2075012701854255237 -0.47461736835026074877 -1.6919656621506347083 -1.1441224975613892845;-1.7376792031884999989 -3.7946073777469537802 1.7935714555465849251 0.65588961985764004936 5.0434334432613505683 0.87167500992841973062 -1.3620996288301430166 0.69327993899845985482 5.2677376034920637693 6.1808759393989261 0.17698756574051510704 0.88209907095724215953 -12.047715230804477926 0.17237572198672818091 0.85889017886044072281 0.28414522028012700883 0.50835756091971295856 0.4520211785418930539 1.5302384940865831897 -0.2182615356506918125 -0.87244736832909441926 -0.80822460908381743572 2.3510088144995329174 -0.16142896939825310265 0.62072549961010103914 -1.1612081030217866751 10.950003793507844918 -0.79014908750094381418 -0.29916871426503105491 -2.9693567249390988572;4.1068063838898254403 7.4577175674696638552 -0.76789768077183284678 10.494170480302875248 -9.113484245302277742 0.7408839632268670039 1.0559393877668716843 0.22527110263564914527 -15.841961381089554095 -17.240161415228840269 0.30116263423223643692 0.83017738467718438233 6.5770660154348812299 -2.0143282063570562279 -1.8933690645113687712 -1.4940018589712051877 -1.4079343970053330715 -8.9315640092692181184 -11.590384146957919853 11.090091952576798917 -0.46631774321176966414 0.84785073152438072963 -0.63442127685512195168 6.8210980893740771336 0.4862898949809230098 0.29384290000347279559 -5.5809526127410604701 3.4633795198652332914 -8.9289923591601088049 5.8213984823911859579];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
