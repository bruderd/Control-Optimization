function [Y,Xf,Af] = nnet_2019_11_19_13_09(X,~,~)
%NNET_2019_11_19_13_09 neural network simulation function.
%
% Auto-generated by MATLAB, 19-Nov-2019 13:09:58.
% 
% [Y] = nnet_2019_11_19_13_09(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.975184676707708;-0.142008679854492;-0.156775523722971;-0.250764380370045;-1;-1];
x1_step1.gain = [1.74420099605194;2.32888155788257;4.26095175873896;3.80270509869694;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.5442714791081706416;3.128465386457716324;2.6841137582096745717;-2.7671406427688958196;7.7559716367824114158;3.2975155689654833679;0.22960355822219807864;0.41500088989200750733;-0.51069771230854610344;0.43892388834177836765;-2.699270185749810036;0.15276851880764502623;-0.66825537753309771638;1.3079086263385824029;0.27310810436304461257;4.0081811860685361282;-0.054281524454883871289;-0.088191939067767677329;-2.6876050554564994144;2.7037908820920768527;0.066765268461244656195;-0.79342063850969068994;3.6424804360697033978;-5.461721820766051394;-7.413681281937583023;-4.0608443530468170124;0.70054387745399326892;-3.8237694557680570462;3.2846313433671938675;-4.4759551695654078429];
IW1_1 = [0.81874831408957227108 0.014798870813621661791 0.020340904363152566975 0.23609470516384603589 0.22376411520318370552 2.5641441690554178656;-0.44817971020614794098 0.0597067347853011271 0.55927651478080175895 -0.014906270418748165593 1.0259905420553050437 -4.429879598888887493;-1.3783918645462744923 1.1875759554734202084 -0.029552164994230870065 0.19338810786574200939 -3.8656933529988908305 0.89653801615280259707;0.4166344484772203649 0.69043421089207801522 -4.4626777135094197746 1.0845742700970912864 3.6126834174968545099 2.2793202436347761441;-1.6016298644020823261 -0.26772496142992258106 3.3064072577202940906 0.78998859595824311164 3.8085135523911439748 -8.7668850590680822421;-0.9196031669865631919 -0.37076846021599674241 0.11406662224014232909 -0.28728484203202248048 -0.38173408226759414363 -3.6331154536213552397;-0.13416753274841067278 0.4006590763335036165 0.47252663938654076992 -0.32948729294587270067 3.9276744777152332588 -0.12890085388768943164;0.22479468303784341798 -0.46298319046217178974 0.038630149924262287275 -0.58171749832708219419 1.22379340636690781 1.4396197005091886378;-2.6057810798452205603 -2.7890019135144865636 -0.53784549763556843693 -0.73748059952281308504 3.7037659344526283611 2.5568945364422681621;1.7269597641540042066 2.2241283839358501062 0.53059108074156813295 0.72718639994785583269 -2.7360331056166140584 -2.7841929747812490525;-0.17786025817615158662 -0.38799913499650057203 2.3258408806789989676 -7.8143673168242324678 7.5173660501245080923 2.5889960457181908637;0.97438389939907255055 0.67843363369837572652 0.28321126754897529842 0.21029074084294691049 1.7076008299798697276 0.29184584023298143496;-4.975388797598311541 -4.4059835018893256375 -0.58643936980424327121 -0.85846156663249084673 6.4328436284710432957 2.3243828880227486167;-0.50810318662362419229 0.53938233610414676455 0.74107330207615551565 0.4260492777410532228 4.4660489924953541419 -1.9938045404886213241;1.0300726351601234843 0.70214246324935236654 0.36732712007054652004 0.22793229912885257238 0.80792026720201604029 -1.3350220836440256367;-1.3595563533482202256 -0.53088303071187281645 2.9973970287596229944 0.72264343499634975387 7.4755483207859452222 -5.9172339217369227526;-0.34400703378815034039 -1.8222635337694090829 -0.45138468801705117217 -1.0950601504364629868 1.5591509169776767152 1.8833926574050550151;-5.3934825939458557187 -1.9389541550495241751 -0.83043033849894498655 -0.018798692637433913472 3.8087506692824910637 -0.03775875353981131971;0.40481588278188529451 -0.21364760325481754744 -0.67475265930084027399 -0.13313842709866932634 -1.78063046724416707 4.1359064923124115865;1.6075601451414713861 2.4017508408075256554 -1.1269357831495203648 -0.11513487602044901459 -1.3548904262084113803 0.23235245521861608298;2.2988382992368809887 1.0669347957210284505 0.46612083566622619646 0.13039903003599229159 -0.99491393637917091564 -0.76896591562016147758;-0.03853483301035150882 -0.53901176204269818371 -0.51860898852934600445 -0.31489244860367110457 -2.8888981593938782844 1.7455347136366112792;-0.77136874924913212404 -0.33405884847646510893 0.60061314268412246964 0.20571802144451686867 1.9902753591560764512 -3.3278777586514354248;-3.5118536279425032198 -3.388349779298880815 -3.5726159149954139771 -2.9312223315232839305 -1.9191252581292654877 1.3465200612160821425;1.0423452588250710082 0.4152355694874677039 -1.5254524646540190691 -0.59557142510548455316 1.172606413752851795 7.244273398774235595;1.3805774288392698157 0.49156509471525672295 -2.6887919650588050224 -0.64711250497257832848 -7.4911424543111060359 5.6925912268641178926;0.47235531339465813838 0.73411078584306876937 0.35322953092678632814 0.15946275751692173817 1.9552860933506877039 0.5766097889419621314;1.2306163277570674186 0.2965706597970648728 -3.478807341101728845 -0.71573373116083982559 -5.282236928988521818 4.8215197069991644341;-0.62439233242352043529 0.22220912771214951231 0.93816204248213175276 0.36349975044585508543 3.6305786641142456794 -1.9341606081788034199;0.98885501864611413669 0.43238284424909256831 -0.62943453928130210784 -0.21520250360014850366 -4.8324052458377542152 4.5948194483339355187];

% Layer 2
b2 = 1.5117252162244778635;
LW2_1 = [3.905107077615012745 -5.9662506208172239042 0.32512603371036075117 0.040290851175252405392 1.7786294766670687206 4.5355789044653640474 0.56955608709564964354 0.94438230808489698198 -2.2228733722010418639 -1.5715853659379144247 0.03815543453594346518 1.8633350948992064566 0.58194018480767550905 1.1379876236723378558 3.2760965279690932306 4.6110885044122094101 -0.36923379438095232929 -0.39642014619661730679 -5.2475059470027973774 0.22004195786454991413 -1.6785559729841195153 2.7946518700944094071 -8.9212094481235251209 0.40510762924423387998 -2.1838375420356728185 5.0879481615057349231 -2.3777068826963696502 1.2276058789323225362 3.0537463219987750485 -1.9905653013860475919];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 1;
y1_step1.xoffset = -1;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
