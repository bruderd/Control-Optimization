function [Y,Xf,Af] = nnet_2020_03_05_15_18(X,~,~)
%NNET_2020_03_05_15_18 neural network simulation function.
%
% Auto-generated by MATLAB, 05-Mar-2020 15:18:55.
% 
% [Y] = nnet_2020_03_05_15_18(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-2.26785674641711;-2.5776432657719;-0.730215958515107;-0.585702734956854;-0.853927353346007;-1.26958429210293;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.637166157857367;0.452572375876872;0.97778241358006;0.955781734596481;1.22876187407991;1.121699426943;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.8606423774921475589;2.3994411772336401434;-1.8518331302808952454;1.6609233403459719991;-1.525536303912171876;0.74362581671525884719;-1.58427789027635324;0.50519243480279318881;-0.24276175781317843594;-0.34093298354228396274;1.6819952920389062978;0.17991542379312686073;-0.015638734332212151507;0.5889218207090173296;0.3243409935423315904;0.71952245668399228418;-0.12964046846199847596;0.51570534587202765398;0.81653921233801807222;-0.051715511176000372728;-0.82620499851458140128;-1.3463474997982953774;-0.57021447688319493174;-0.83385349695148069937;-0.37253862300512557981;0.30933363862479063;-1.2573511833156887363;1.157709842382738108;0.8646018852535611865;1.9151592565257071765];
IW1_1 = [0.22432330183714860317 0.17610875206973508611 0.21720510565790046575 -0.29488392320389456014 0.018224943010096444906 0.11085915290700062985 0.62374649875038667979 1.2995963783949937564 -0.41576192422733870835 0.11562275961001518276 -0.36539816402605423962 -1.1413561805434229157;0.010901754424777330976 0.30196922606330250938 -0.86929703321116091885 0.52796340187007173572 0.44403054931809643469 -0.14416762409003655576 -0.27629489982413918403 -0.57612178662487878444 -0.21089314386888338704 0.081503844032722608248 0.92576467467021517077 0.50828285501559467008;0.73240445652843433333 0.28556252021423028653 0.10708297527120080872 -1.4365528219189553916 0.039675562653602780561 -0.4006725428275161871 -1.6585527667951145414 0.67645681461180284799 -0.4403193430792423646 0.37046908213136114929 -0.44606565343768717069 0.17208851083836063101;-1.2589056221270711333 -0.3398886332823798373 -0.25060569295985801741 -0.60191897445109310283 -0.69800575486111537948 -0.45876958017140306856 -0.7806642541593775686 -0.19312108588225815331 -1.1289045809761624195 -0.11164243446791523307 0.60983496226702427201 0.41878472387126947085;1.4847484032449334013 0.80475490478836886332 0.89860623206631673465 0.96679405123398742816 0.64789387770873707595 0.12219602604550668101 -0.15433520523051802442 -2.2235104202890174641 -0.79618959333635797027 -0.18197756905675541161 -0.33164905063313421252 -0.75910060662368539219;0.19723142355138004178 -0.22625004647494156851 -0.058154361413791315349 -0.1428919288611453231 -0.19286537195968661562 -0.20093452783272508499 0.089350053261119541381 -0.0723352405232582929 0.99447338477975089077 0.10321042739131930377 1.2114530568407475553 0.15617751168162724573;0.15082345572880603846 0.27931523014898207435 0.052688154089972592808 0.7180904100414953195 0.080757871027642771922 -0.025433159419946251706 -1.4018449366572449666 -0.27985544855324939739 1.1353529324610149853 -0.87759971055977148424 -2.7113903651848745291 -1.6846773895212936445;0.073155653847209248242 -0.13541580132610195331 0.045752159521920833518 0.21532700064160786857 0.39413232918577878472 -0.025521829354639459508 0.2895048129046011165 1.4969529610037266565 0.80855481025325104394 -0.1550591842152852784 -1.0996332653101335008 -1.6767485939738318024;-0.18370186236695759674 0.24870973247234615111 0.11081852548984316709 0.22590490050200759398 0.33276482787248340411 -0.008154247109477928343 0.425207759376548311 1.1477493286653546178 0.14778680340324432119 0.67547930244138232325 2.0696890953008417746 1.7710831325056879404;-0.48355637563431508319 -0.44198728207042403682 0.12662659910953744102 -0.25859394467791779748 0.14590498219972866667 -0.51121448263502666798 -0.62756550389065435258 0.029622234228458430016 1.0844540808705407375 0.880469688117466176 0.25293114349929701756 -0.55898324317165537511;-1.0676030709245962758 -0.17674417673298661868 -0.28972756816350120346 0.24586267293389182931 -0.22139317624204915558 -0.10451552535104018105 -1.3254822864833735174 0.6326462239742169924 -0.0085943878041653785915 1.060643909601886925 -1.2506748779446532627 -0.38847815496117910072;-0.022186205255629712352 0.027936178156529472422 0.049417144783124720975 -0.12869707031725979851 -0.21341281537118442224 0.18924474473431257548 1.1509769851162614529 -0.53519360538235249969 -1.8095910527537111268 -0.45510131804271852785 -1.8427185194093276266 -1.5714739440845431062;-0.3124900440760944309 -0.015394018030861709653 -0.12814007891143669449 -0.25056789127362916192 0.040310012098932514191 -0.26073384934048488004 0.62093358433408196717 -0.12669364143989242377 0.46064408460355471542 0.045630954100363038672 1.2780043902947046952 1.4732170769843326852;-0.54271320690234203798 -0.20133910282600808728 -0.33524326242857932501 0.26319176572345981402 0.076480840293431703869 0.050768871188031333697 1.5411640836562061629 1.2344329101487330203 1.4490843414240235365 0.30771143566479841613 -1.3450910565041378497 -0.55430175123270231108;1.1090425588538697088 -0.030936324377936884333 0.16011520403274256963 -0.07059359941796028437 -0.76144167088566316881 -0.094551446900783847616 -1.5983045178060135694 -0.21203619530817174876 0.57449602402966271075 0.079216999181288577647 0.039817763837452668785 -0.40607136622860684483;0.45368162910044096403 -0.041942114787761636263 -0.23572240257492635407 -0.71201476774188066088 -0.56880757930071446093 0.48953154835579948401 -1.0137730092883026067 -1.9902018030854553565 -1.0410628067582439193 -0.85990797810480990027 -0.36861405164847488303 0.72962894787882470737;0.69588119220800970233 0.37465991733194303759 0.31954223918492230538 1.1315283442428374361 -1.2274478127434966801 0.076848637149341370023 -0.0072405522812280659339 1.0012170274206955156 -0.22005469789579479301 0.052459729679265126867 0.17334382534357203887 -0.55290053009481243684;1.4298754203593282419 0.093649852385931958709 0.56014092030817796974 0.31606366273412828116 -0.17982559571723305547 0.40754943755988659593 0.89171943407430787065 -0.75057428732679087879 -2.3849367148709244013 -0.035326569616760811199 1.6629053457965052853 1.0873703337561957394;0.1252291696964481782 0.57204203229902073069 -0.06196111734287919337 0.55856816760463690041 0.11650215663217844408 0.13349955050677930757 1.7557618604049636257 0.6355714380719506007 -0.38146823181614591958 -0.076414781433319103887 -2.1177419191019208888 -1.7776670327598227406;0.29579198795657318799 0.55411672439642434274 0.029625376807979910548 0.27171445439586339177 -0.11368719421438180928 0.33329191233042559928 -1.7025435441163188077 0.8013348629756144037 1.4849629121618879157 0.25047652320394309111 -1.0078028347204734949 -1.0658218826386121059;-0.71048680203440262027 -0.35861527694438177782 -0.46500805887573887221 -0.6131123500178141672 -0.077306352626060989564 -0.0526851668247025548 -1.6347448259376151647 -0.91019841643730714509 0.62512128990266191408 -0.20612703186183203852 -0.089539802798582965315 0.43835922743807170798;-0.22810855352440650989 -0.50958952773791632573 0.59570580157169517044 0.880275723302589852 0.60112662510222381052 -0.082237109822394169334 0.13187389724794684742 -0.31247889870608019924 -2.0602305548369241883 0.55005133729615918181 0.036747586998159602334 -1.1401179492837516527;0.16652450268630369923 -0.22156376558494461637 0.15790599376477454374 -0.39442471599256584414 -0.42253261710541140106 -0.13091724228020332199 0.38082818873985535557 1.7818531459108781778 1.1073578280538047824 -0.76436533116274130162 -1.4823686587792617164 -0.27623107202268615268;0.684246256342637027 -0.14606934650495573269 0.032025593949089506407 -0.33188839758858001971 0.20206060101177791832 -0.075705178589389660049 0.8572003663163398901 0.86422372894084964479 0.91269567090593417547 -0.99988611565461871233 0.3412669067428871772 -0.034277932859010443178;-0.35867112231758785379 0.33130184070877294333 0.047619938781045513532 -0.0025158835587735222522 0.1472277013558996317 -0.32469983950437553144 -0.75508920547544011725 -2.4545457691426140201 -0.30132930807441110632 0.09783514449735500329 -0.017849723186166580047 -0.32147800147617361377;0.69278347563970277267 -0.78874081253657890578 -0.51575544989898958192 -0.21465090383227250492 -0.57445318528581656992 -0.31594661129013579259 -0.013471243944373871571 -0.037641011604394598866 0.61286958122923762549 0.25093325202070521085 0.034750933143982642992 -0.83117076934011335787;-1.0823342678237892756 0.27858015276522807291 -0.34866900692443542065 -0.34485590681481970154 -0.050608268006656506599 -0.11651260003613324312 0.76815181432393664362 1.0920971338070599721 -0.47405244342592034457 0.59726733516467966911 -2.0809913026572628425 -1.0741013996238459871;0.42305590638872431208 0.50971510162847977199 0.01657371515739294171 -0.21342010768284752631 0.73468095925827825443 0.11487137060677084233 0.37380985065663507871 0.16926720915852552785 -0.22980506476302697827 -0.51730446247160954965 1.1375262750178574134 0.48089338221955341135;0.93052724707644818292 -0.16736305381554780758 0.40079993934590579796 0.25886129873279672964 -0.49207377730503015778 0.20864210112286621368 -1.261066478657163703 -1.381621104790912824 0.63126150997793550879 -1.0385459489218129558 -0.61879333637814626368 -0.80351739046656500687;0.064426791883215484003 -0.09615831306478526963 0.18565813444307760482 0.74913255596966399352 0.1105112149939099786 0.030784199044958646119 -0.30913042894488734769 -0.50458947375506235655 0.72886904104463789977 -0.024730134540324591463 -0.73292167418738662921 0.52812876041054945819];

% Layer 2
b2 = [-1.0902031486153369588;0.23422815338598063084;-1.3206790502208551885];
LW2_1 = [0.56634142182047486624 0.50110709522566598828 0.43592374621015755887 -0.23036782205636652243 -0.43844413183498409659 0.62419473071734665748 -0.36549612583163559876 -0.82721926624193764521 0.54446411061687205457 0.3301605440734904362 1.3278250854401187908 -0.18060116981042967366 -0.70866160068893602197 0.61489455026067885157 -0.71825281432492360523 0.72002035801103048129 0.29917999241056530968 -0.12615652747762598485 0.49494597016502334119 -0.69905002286040573978 -0.11243162861577747635 0.65936651907225263258 -0.14962671601621388429 1.5744814012625967248 -0.073212018773577205999 -0.050235494962718452161 0.88093507569361129139 0.32953223145380017289 1.1269619058002535716 0.55778178627844521298;0.96243527240459436634 -0.30962843277976098699 -0.44207351037206049638 -0.38086475952177695214 -0.44551430716997253434 0.16635562134253611966 -1.4580534533883491299 1.3673496681924286467 1.7802656660659381682 -0.95015328111316521564 -0.22462846680406098332 -0.72573074929134162581 0.021027819535875305612 -0.08828852259572111949 0.24705413419902505501 -0.51540033189360434651 -0.04918065447940517948 0.18958540605680063162 0.59569589205378792318 -0.18494832733601687669 1.1844578850003955051 -0.30687334702558971555 1.8823934193429412431 -0.585005954460842581 1.2351589028086451538 0.42924039601712754566 1.622267531121170947 0.22383132531998767289 1.3365456723163857689 0.16775813463154229388;2.618141037761925638 -0.35042090571032130653 0.020494239685218074154 1.6719614034105987344 1.7726945327821468368 -1.8057090942786506726 -1.5472682590613209275 0.20876128082882783321 -3.1033837334214817716 -1.5454130389332232376 -0.53798593050909282454 -1.3125236573556993136 2.6788457545683570515 1.2251109488247966528 0.54290490693570181424 -1.9902747360033070656 -0.28049071767823652301 -1.6906143161729549895 -2.2015035716414046441 0.72024912085632364356 -1.9624594837057591779 -1.0801469238358534231 -1.467380549498325859 -0.79562730678008475316 -1.7621201627071927387 -0.11619162639421082295 -0.84926649299420864381 -0.87005582912014833852 0.0052341749186738464883 1.3600237316657151077];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
