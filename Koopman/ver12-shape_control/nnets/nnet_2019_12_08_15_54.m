function [Y,Xf,Af] = nnet_2019_12_08_15_54(X,~,~)
%NNET_2019_12_08_15_54 neural network simulation function.
%
% Auto-generated by MATLAB, 08-Dec-2019 15:54:26.
% 
% [Y] = nnet_2019_12_08_15_54(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 15xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-3.60594452042375;-4.49450067544448;-2.6577720939313;-2.65382739603075;-2.33817721347233;-2.02251761641556;-1.28107944532564;-2.31081135819413;-1.62675323250757;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.238772700855979;0.226198148908114;0.374447713765633;0.359525485574873;0.398760862657798;0.497797538956544;0.759924168988763;0.511707893496391;0.584224275501668;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [0.94442161041818162293;0.77822257686391049791;0.53956128870912445361;-2.7013060244653672726;-1.50265262567250657;2.7490511796584855553;-1.4028256592046843831;0.34173701082564977849;0.82941696674103371212;-0.31707592349578511692;0.41294231111069218398;0.35650676952574933409;0.37379104406988777898;0.11390547663575267823;-1.7381796064248098421;-0.40760869493203871761;-0.38527082177655103123;1.5089504980444745641;-0.59660594546222067702;-0.51104817971996463477;-0.36642132147505296347;0.47430047526883556408;-0.70586645371979950259;-0.70128018203972597444;-1.5893082397328197608;1.8622858324604771862;-0.3401734584421364227;1.4346904776704065831;-1.6097788287000112106;1.4442997174677074668];
IW1_1 = [0.20520289444918018984 0.11841055541365042014 1.0679547091012289162 2.0548748347392837843 0.87414580233879468629 -0.21488572508949393969 -1.5234101747872408339 0.34884304815624150864 -0.036636643314370845315 -0.78406143725187749105 0.12866870436104974051 -0.76040124592740332421 0.39887605797995301371 -0.41422965804466116424 0.06864296534230053537;-0.039668545825785016257 -0.20919808726782909702 -0.16970159869549089615 -0.24293242911626442004 -0.24836483741952419813 -0.014862664893895828275 -0.029496445244391329699 -0.046144735437370340558 0.17660909284821510457 -0.18645306315619250559 -0.90989089965046121566 0.59808207502693178093 0.16708990771923451502 -0.10664845897105713901 0.56711606805014147525;-0.63325547182313923766 -0.16619241447411148282 0.073488276368967542229 -0.39426224065600068425 -0.54035076065411413726 -0.22188283826103377683 0.14539891063825050033 -0.65427555843089613141 -0.18264084299548982715 -0.75899564229794336256 -0.50223821530977208472 0.039127396075238470019 -0.22535268738422656321 -0.12070820110009379544 0.32975121134123264177;-0.67155560019649584991 -0.016981384563899002554 -0.27023998276940813801 -1.9084863851992779349 -1.8347261224513919942 0.080404064404850927872 -0.16875406297440320724 -0.92964966947285965215 0.35591301235282657434 -1.300878417468628756 -1.0757481402130182335 0.10488473562989716892 -0.5840582991686601444 0.0071159673746238076217 0.15009822069381026366;0.16515549681538949089 0.43362915103486815438 0.72864341521461351014 0.17723750280812866631 -0.55318041754983526825 0.8300678057311863256 -0.69482005903668664359 0.1207538562314218189 -0.17634544880972258252 -0.032223316936717094627 -0.49446651308691180748 -0.73444579627985573378 -0.1802359452918137761 -0.085679964924416096572 0.14230766722706111871;-0.42717495960059764792 1.7085859238946106142 -1.0245050143566263312 -0.59639108793542305875 0.48283894856174214283 0.47108413004725224749 -0.059424806336222879555 0.52690541926981426801 -0.70663887423507498742 -0.64231352056310775378 -0.050640126734478901893 0.38678308294426860803 0.67826660033451857679 0.086603743069477170935 1.0517274306380062221;1.10797127181666899 -0.65154899908957575327 -0.046997714605967369494 0.17191706978151777285 -0.40724242805546029267 0.26382201624285706032 -0.46039481117143277178 -0.51548023086575456286 -0.50974942945065759847 -0.11850428643755270275 -0.5223264984595734628 0.12118866653722856763 -0.2197796914701355131 -0.89770775848463024715 -0.43485295245614630222;0.65919620428568048709 0.66265951915200116407 -0.13595844926400568742 0.35427874718623952877 0.26916599065757645937 0.23392546395677529802 0.26754165639799654119 0.48626522249651604746 -0.49431321904507335985 -0.18064682945691701299 0.99114979297281591286 0.41998250916627427598 -0.058567079778850041072 0.31667060192064722113 0.13964228202258818778;0.35474587341008673169 0.97314971389544269176 0.013222656996397817719 -0.05231572403113259051 0.849339572981890778 -0.17766954530403755719 0.23884744567595536657 0.16477759819609072434 -0.83393385757676430359 -0.2015628452054985531 0.10952608303471492168 -0.14767447431628491494 -0.33484209245317464454 0.67369331256593356638 -0.39848785309252560127;-0.39412180180506539706 0.67997592625125879984 0.27528212994286022086 0.79305994180236905056 0.3152083376186460284 -1.1240330992858886816 0.072528827768635367734 0.33248477671413306789 -1.3062152689187462862 0.85893503953888805658 1.0018238270942876333 -0.44903821262293230898 1.0583871102928592567 0.2837939424325073845 -0.28177199455427826003;-0.89759517318939152641 -0.33083441510233424498 -0.037886741033752946439 -0.34419122137246088711 0.21228396953167763539 0.32489908863645033943 0.2222241236894779981 -0.0026274723531949945726 -0.1337255524030260545 -0.15744851155146513677 -0.17822160111220045065 0.73288757539759552539 0.23665135505158413354 -0.084725995892298636147 -0.66618941236506790116;-0.50048025375586879804 -0.10397729155584962968 0.56596281352240429552 -0.39649636027894546997 0.31299347676315009137 -0.080578271109682242379 0.38468870974851671063 -0.40348193258151848761 -0.34563321395187313056 -0.17601327666241961545 0.19089599230946738273 0.41817169746472210301 -0.78427334907262657993 -0.65217261434155737732 0.046560659452160320371;-0.5482007018562157219 -0.34987296392723982175 0.036524165748410400423 -0.19113083374102138312 -0.72747754706566480909 0.27415991635934489068 0.031314680946917979043 -0.72984223533350778279 -0.31515875772271662036 -0.50642980259570380408 -0.070589535371895897886 0.28756273340492077839 -0.064673685960299931441 -0.80266643408200655241 0.06347398490058719922;-0.086855604080770476561 -0.47769321085062882437 -0.11010683335865431576 0.088633547585925342993 -0.42753985527748611384 0.92259924768355316971 0.029172673565126920614 0.16644635472564414669 0.75622256463944292904 -0.33398908588496961647 0.048643505414331641989 0.81690670839728019015 -0.41647727046732596623 -0.36550579684505479783 0.26480556850172742855;-0.80251459251497314629 -1.3272406629436066527 0.046547962603737204346 -0.42165872183118052741 0.38730630808629590289 -1.3993461518976537672 0.10150797140243084105 -0.22062727175007576519 -0.23221209026841158063 -0.84268643372907758859 0.69702772072300556161 0.39904600153673575047 -0.63482136830647117876 -0.16672795027892833852 -0.043170351465605986963;0.70108718405670544804 -0.28142774475642179377 -0.23908867126190880281 0.17837398444508040241 -0.32556359495124992387 0.12918854148660885439 0.10398544162710993133 0.26810960138300909961 -0.0096051472805414733758 0.1525466157958378921 0.017551982881510653361 -0.0307956507536808477 0.37538439725001832015 0.19564101956110710456 0.75459757531774485084;-0.55143936013589123224 -0.5278345548520197994 -0.016610173290776415744 0.3617858979586761059 0.22348445832777347198 0.17052093938722931443 0.29850920593327934238 -0.098505714120631637787 -0.34284438586292298456 0.2948254430843370022 0.028378336173938790987 -0.34497907027933022439 0.28478546691327477625 0.72528207420076307166 -0.30319266412471124195;0.60556375054684297154 0.8191110609293873468 0.13817544190038966168 -0.38534530686207341121 -0.31766599368505105128 -0.25727497967267903833 -0.15562797298554903458 0.016871213634071201282 0.14207608034126797958 -0.10141343748113010315 0.075108822552388349036 -0.25002179984978739613 -0.51456060844692574907 -0.11760722152611513547 -0.10236577099490928866;-0.3705261721028401678 0.19324291919564845488 0.24718750852913567995 -0.033762538534296324122 -0.96262120670125739252 -0.073833484091720705256 0.068624622880226957 -0.48052434712707786657 -0.32185993985623057023 -0.69837392201396275571 -0.25815618613965979344 -0.1613854320979268564 0.85133389590583952167 0.17507472000823920411 0.13795145865524757745;-0.55542061081492588581 0.71207196718644205635 0.11187514287594026163 -0.7824894911329374203 0.45747849519606031965 -0.097871797732693305294 0.8162921676140993954 0.28975798388538098749 -1.4293716514603287404 -0.41977134372379443228 1.3360768189139176076 0.015219332535131068276 0.80732013944949299056 -0.82054127405252841321 -0.57683352720052827323;-0.18051302056818979702 0.86558801608984192733 0.48122268871157930503 0.97111930785033151459 0.94918840727831621518 -0.90867036665078559921 -0.79039995217245961889 -0.93207063934781897441 -0.16751995589034957002 -0.49231315847030526767 1.2027439212097528198 -0.077934634671217473123 -0.71757828933916001368 0.040366748547150214932 -0.17698797244556488395;-0.08441338948805085507 -0.78598159909175646654 -0.37044484849799952375 0.14874803044408860253 -0.018639078732179341358 -1.0316346948836396802 0.10099647845249110079 0.1339519890662882462 -0.24092225307538087109 -0.46077187804388342052 0.056299411229488019459 0.15365002092969479164 -0.40185289961477516085 -0.01284118729175388017 0.2153813507952428985;0.69271790213188733087 -0.41190472348801199232 0.061922104409904379918 0.94269117501756849453 -0.51369437535573136966 -0.081097920276474305679 0.28041168341794414642 0.14543277944456758921 -0.31445229989171480378 -0.40276915413675973276 0.050972378004848439836 0.031425276582026408223 -0.69545082258521795371 -0.041052443115007865304 0.56120537703202399982;-0.43096731939038213088 -0.56416082199934203256 0.21595829316287837307 0.30411671327744765891 -0.76960407241215200713 0.63488366755717917655 -0.56770903145917961385 -0.0096068094350652624702 0.79221907807173919114 -0.75925876010723070131 0.80588640686743884256 0.0037478211969782342095 -0.20810574397683470615 -0.43963545202917925225 0.37240203305334040884;-0.37609469110131854563 2.3113930342369233273 0.53033936607098342009 -0.74621368526973241853 -0.41943372520138816339 -0.91952527937514905165 -0.040574855229088088726 -0.11950991866530344399 -0.46955106955448205897 0.072547359087583793147 -0.063155280219320972246 0.45964140323243452002 -0.87589511878225856378 1.0353933312940171163 -0.67725236329340543495;0.51549057673893416975 -0.62630740369322479566 0.6957885334165379021 0.14262618648426150791 -0.90120784392873642954 0.30021653209261944806 -0.24733693096214107165 -0.64010192348955907704 1.1724049975976424953 -0.48165812224868925773 0.48932446449840899527 -0.22166024079435797667 -0.58897851661034439363 -0.3126164107956626026 0.26991954226617942414;0.64520791250893771984 0.0012433950978389535225 0.11937334976513859497 0.41271115271075164976 -0.67267800550213929789 0.06573007804916174146 0.22565223708491599641 -0.59753103907353677382 -0.24487011411714001974 0.3245139941367379266 -0.53806724208910028384 0.43770121045839333052 -0.04142602396590797792 0.3979081181692199487 0.16466094785759097241;-0.03894148110751855657 -0.97114213702820662011 -0.55372056798526292365 -0.73227111088201135569 -0.58704863144451380208 -0.056182129808866151932 -0.32986975998925821552 -0.20304866728602524728 1.3339015258305282341 -0.69624691514987158136 0.85442539243753323763 -0.77349914532248065235 -0.80673150518218517124 -0.05229308189292941611 -0.30534184197935559935;-0.045164776889410618299 1.3529827894966945934 0.58328737110484385475 -0.41866084853463919613 -0.42908154488588517994 0.58172559201012430385 -0.26071444504274365883 -0.093439242805245806278 0.0009804418646590165598 0.31256172403664439496 -1.5147432306482047082 0.60227793286212549795 0.12981360743208411601 -0.24094011112799365582 0.41533127373446099284;0.56514373401917250561 -0.22690711236548130603 0.068185364129511275011 0.82782295744185363517 -0.41463050197226758442 0.30365581965268478859 0.18274219241914138601 0.50964228768367325628 -0.098365284781772518996 -0.58059618155318026833 0.43275086147321323304 0.82374342097768571413 -0.057674146283272442748 0.40313661911053627618 0.09534124267194574176];

% Layer 2
b2 = [-0.70409672281994228893;0.15654804683285367117];
LW2_1 = [-0.46021336882332997131 -1.2215897844232592728 2.0795191912028827552 -0.70097209868457088788 -0.62122361283480387328 -1.6170420983182418606 -0.2218637892916931198 -1.3268103863893747629 -0.86866858246050937531 -0.38349260314592237275 -0.31134010457328809007 -1.469541753673436979 -0.70378105435331994588 -2.9668156132473857411 -1.65570228673418951 -0.0034424053943440616893 1.7021043196039675749 0.79244886465253816521 -1.29309267610606482 -0.22342381393146151791 -0.71537994054791298471 -2.3942110129378599837 0.92011566078109752187 0.80988361853346035879 0.037070750909152835884 1.3127318912109906535 -0.97619754488190979558 -0.70788351279689953888 -1.1240884813134073283 0.68239603247816615905;-0.19289997524201279999 1.4818721542857271611 -1.1979558828525842529 1.5879455684750523048 -0.96353165139619623147 -0.91628073469932136419 0.89093736862567973755 0.8094320422896882361 0.19699108453343036618 -0.05256628772552376927 -2.3376543913709126876 0.12707203199005803751 0.92288767362527079907 -0.39961584969497498943 0.99411645837198048259 -2.0027000322085348749 2.1421043582479311063 1.3015376070157955724 0.2789730703579572646 -0.2026460549475504469 -0.2309985198736878298 0.38947595621840830349 -0.99767224114769037513 -0.023897654009698610783 -1.1161314802835398119 0.032968238122428779324 -0.8112499557200356648 -0.32206106940118395254 1.3566345524744460871 1.8203793053897114884];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
