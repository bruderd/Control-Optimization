function [Y,Xf,Af] = nnet_2019_10_10_16_30(X,~,~)
%NNET_2019_10_10_16_30 neural network simulation function.
%
% Auto-generated by MATLAB, 10-Oct-2019 16:30:43.
% 
% [Y] = nnet_2019_10_10_16_30(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 12xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.keep = [1 2 3 4 5 6 7 8 9 10 11];
x1_step2.xoffset = [-0.71740263907439;-1.16323930167549;-0.609483808430793;-0.5779268954105;-0.71859453153099;-6.99662550118774e-13;-1;-1;1.99013064737702e-10;-0.546889646064646;3.55320079659861e-09];
x1_step2.gain = [1.33301691973468;1.20743101514934;1.62390543388507;1.55665933114409;1.4931802716797;1425528092860.8;1;1;2.00000000039803;1.79918877457037;2.0000000071064];
x1_step2.ymin = -1;

% Layer 1
b1 = [4.236361509985790974;1.9673972436257887164;-1.9205611057500853178;4.1768412780162291753;-0.9920409170369729468;30.479431118965333525;-2.4086768647926133369;-2.6306259623414485205;-1.7190731711458100417;-0.2589315698627468465;0.047839565994407133587;-0.020865018442359634099;0.87514530784424937604;-4.4563264351127873653;0.96447267995267083052;-2.2743631652113602826;8.109398027970676992;0.19719136396562753077;-1.0373002420118433431;-5.3016503502964429373;-1.4825401781589819805;1.6680697980810055281;-1.4547548926403546243;2.6720349694765350712;2.0877695820786117409;5.3341672979059797655;4.6524561059597573376;-6.1006134219704284405;3.2318280958213230214;-5.9787510529688683292];
IW1_1 = [-3.442195971381459163 3.8808757129126258967 6.004202119203316812 1.9050831488696839955 8.1353538897545583097 -1.9606635435066694928 2.2157278551644115083 3.2067924850803981585 0.23921057757451383297 2.1910979582158720547 -0.014374708311736449085;-3.7968250298505807905 -2.560524789585588934 2.0808493261036749011 -2.0173794748655957676 3.931620457047463546 -1.0298448604862457945 0.54335370255191994815 -2.7137626939146435312 -1.640047363451545781 1.1686234208947916535 1.8799323749556100527;0.19642723201085385276 1.2881543549360272571 -2.0051578795308691028 0.35449208059358094935 -1.9557047351305176797 -0.34754694888255133201 -1.9250207022239431698 -0.63181158406337767364 0.39781799049544686042 -0.47887580725020789663 0.17661403885379495238;-3.3716486169367181347 -1.5014847158964004237 6.0034243923199825943 1.4847981136168231231 2.7124659705231470852 -1.7034377986437736485 1.0952904825911091713 0.27838219157939880777 1.9627591195614735309 0.13853596684360366953 -0.99513080292634803481;1.43439306506989106 -1.3666405475547331871 0.40160561131382244149 -0.58685610501567164743 1.1954661744241519283 0.57941928542699061566 1.3133480148137550714 -0.5062387877531260294 0.6407723332902497404 -1.9224996543634080837 -0.40210198561165705344;7.3118430162769465497 -17.674156508408515265 19.304962776538488356 -10.016413570983187853 10.513367375183049646 -20.320169176024450053 12.029065466314120769 -11.082630175324197808 0.013120331523792605477 -10.960763120896890754 3.5139957992214743143;3.3035813851193567281 -1.0843606990329179851 -1.7809049933164642354 -0.31652118674543949783 0.38207279541790573063 0.073722773435221100602 5.7358044231950797709 1.8379337695966584398 -0.76181483989566656234 -0.24307435994937387491 2.2682278708295102732;-3.3574601049390473406 -0.24463838341679775001 -3.7061639373910759687 -0.91018551935393787744 -1.6318988186416418795 1.025714838477382651 -3.77128671498331558 -5.1339811685333316404 -0.62846483702154820605 -3.6195441754286536984 -0.078282869156531806332;2.0757966029185705992 3.7222449525070988585 -1.4588733387462309299 -2.9909853617182187158 -2.2313052600738707554 -0.63127638369223693093 2.3818896842468868513 0.76431416021209375167 -0.3732330171204421565 -1.6123759508504817983 -0.73075933649663193936;0.47931142603672116653 4.6387810438938146262 -1.116167539365375827 4.3526314704281725554 2.073353329608266904 -0.50665196731420369947 -1.0213565702595235329 0.91477577906515616935 0.87570689535066970066 -0.53319074035461044847 0.11750220435404162833;1.0322788907855500184 1.0930444154292744408 2.343894469539875125 -3.3028654233957048802 1.7310149986000025191 1.0428205066314670812 0.71693030854853845302 4.932145168100123378 4.1336421891739583145 0.62589228032029176063 -1.9494226376663932321;-3.2307250821248736372 -2.6495701366081871875 1.0229617194749438536 1.6658234053184628465 0.82295735565699479341 1.2745740140073646973 -3.3513151397204170578 -0.4100191347957055088 -1.4171264838973733902 0.17390125707466577709 -0.680622594519804891;3.8338364609683113216 -9.8161054938587035679 -0.019302638779017007586 -5.1472030210597221611 -5.2470697393659468943 -0.55177945932420224828 -4.3012539759714059073 2.0320789509943097961 1.3017395952361525691 0.65128879310108100942 -2.0075391785574403514;13.249785579839496563 -4.3763356381069602463 5.3826308555456909843 -0.14007921330689923622 9.3493404209382280357 4.0597587178262228846 5.7312516204005659048 6.2350814192323902319 1.9173903238787259884 -4.9362114814654471928 -6.9135578019788681559;5.3577294746269235048 -1.0688498202688541117 9.5523611195798583395 -0.61443663470493037337 5.9511916281776464643 0.97694692232529600773 0.98612896106661085405 2.8821958284882329693 -0.76468834658031548113 -0.37443746701083246986 -0.25132614513186490868;-7.8970711222492013803 0.095990984667058104618 3.2192450911352845644 -4.910485278781645313 3.2615722226069348011 2.8944226342285896969 7.0397981200165649085 1.0188867158442018734 -0.12188982692850057477 -13.771512686847890095 -3.1564463817747130392;-19.967395671231468413 -10.516449434650091632 1.7228844035663553047 4.3572346172242371054 9.5671094734643133961 -5.7195930748252683529 12.547270872163958089 -3.838943871001813779 -0.43664757994905567529 -3.7976929192517188127 2.3517025452778206329;-3.9995277989311790456 -3.1634291646630909867 -3.459118655591896907 0.34336231851084164646 -1.7004506446586733492 -1.7637304572311971462 -1.9039890428558203794 0.52634101500618601932 -1.7966202783932270215 1.0086691871981108282 0.41468897147722383334;0.73202709844286006913 3.0237699038146419461 -0.52225628366316767526 0.12081335737603415836 -2.3880587421992482966 -0.38366624009947458696 -2.5332863415733886114 0.14897484258940940638 1.3136533849830760445 -2.4597824511421673144 1.8435947289013137063;-8.5470930668354601067 -9.0383545003663563477 -3.0872564643187709876 -7.4423520259770530316 13.177924144888608637 6.9745817538235836963 -0.75078597718473416567 3.7995962277314920819 -1.7781789538793175698 -12.14801486773264827 -4.2607463947880592769;0.39514118000834352884 2.6549287860113790494 -3.9496175954198973201 -2.1807455614600343985 -2.5918063250944971543 0.15103489492617044876 -0.32294576467979707601 0.7778586355458898538 0.27262594499728981523 -0.28934275090392325147 1.0009594467399467455;-0.95446298536888751762 -1.3206373449249160235 -2.1487962476879394202 3.157228747418896031 -1.6148348103381549024 2.0636482252727867959 -0.76600481334114478571 -5.0228195447485273206 -1.2609931534765959071 -0.47549310502372149623 3.6752465232229436509;-8.0653407107271686272 -5.4451402435514104639 13.832372662046058309 -1.3486381024116043115 16.484440358994834952 -1.6907533894077961811 2.8196982651401496511 -5.2475987425586474444 -0.12518155460368185494 -6.0762642895769634066 3.8030854433032872386;7.7624902876443488964 -0.98031503332674296836 10.504818104071237173 0.27409357640194487171 6.5876659057695130528 1.1604590754791339613 0.56925023180338618634 1.6381924336695623534 -0.87525926371005613458 0.464190567388889197 1.0670149257406122967;-0.66503273216670266699 -0.91448836905156205557 -1.8521551340965531907 -2.2536154868992221978 -0.78665607856966301981 0.48260612999587770844 1.2352693275145767426 0.10138659764211546688 0.5015144166572147455 -1.4863399815895401712 -0.51447805244912481193;1.1820434319389074851 -2.93818063038110866 3.9172489290524317163 -0.34035624223486432571 2.2017004238051560705 -1.0202167440260563325 2.3554183646221242832 -5.7108142475083090162 -0.49814320618975804766 -10.136241819992420687 0.88396064033898746892;-0.05030041030742143926 4.9681359211602300618 8.6339093257778838364 5.9659244386806360438 8.6763468503536529397 -2.3189579747370894225 2.4995023076219529123 4.8915549525055679325 0.53489781585213058701 4.6788321527362084495 -0.36312345975875681692;1.2733175599011055112 -12.604729332706057221 -3.4958146348299163897 1.0125450601457870459 14.304986186422047112 4.6217526640768049617 9.3574867895256268469 4.5503540849546393332 -1.3079110908912636724 -4.0153054227340012616 -0.04425859370891827016;1.0749357616708521412 -1.5299512392496696922 0.98456543270817942215 2.6633897869252818325 -0.406429111080016503 -2.3017721033975107048 -1.5931998781650535957 0.64689673882339482347 0.89479909402103563476 2.1148668936840024912 -0.54279711578764233693;-4.8972002526949527379 -2.7374092156380660512 -3.5307775201836011369 -3.1432666422541397644 -0.6326921513878983605 1.8376594822985166111 -4.8919033354193874885 -6.2408704944670212456 -0.41345462324319165459 -1.7239429803686154852 -0.69191411672690106283];

% Layer 2
b2 = [0.31328665035527408778;0.073272969704277962633;0.084259183878779175814];
LW2_1 = [0.5425045147093753295 0.067381908818336916367 -0.024708405044519148042 0.17563208999381785258 0.29945898492257033707 -0.28441748651452397612 0.13394491963718194172 -0.15786242737479336262 0.20179392833099507598 -0.15702638386051687158 -1.3791357505667920513 0.2690613949230566404 -0.088852415230115361355 0.016660565918696575854 0.53047972382574859473 -0.11437540943820348471 0.0054794820429952696 -0.29663339384247422448 -0.15866691160178336695 0.13776323160209397178 0.18825255975326213309 -1.308791686969151602 -0.051832061342343797861 -0.6368811634854748549 -0.27673584813763746348 0.046805111007297270365 -0.60646853818762802568 -0.21172689604087252535 0.72026172908362207092 0.38807275324633894176;0.77553061301087788948 0.12092139075130853287 0.60395757070247224618 -0.1505675284955649007 -0.39218699823857577913 0.12985313811838727904 -0.060072391182263512599 -0.079189509482693001829 0.80534118576580104865 -0.00013941818907522302018 -2.2145564394483847614 -0.075366616108663186946 0.013066995769489483936 0.07050317976950123966 0.58331101896013182184 -0.036340758846294382578 -0.11972328099815771063 0.45642374992191303562 -0.12314083777981026102 0.04275744166820402703 -0.55496904353438925028 -2.1875864095805082066 0.04580938579942247374 -0.39474541763255965865 -0.44869755184035620132 0.18389655947676672443 -0.55895539662622073518 0.071668659565682316104 0.1894907748119550317 0.38174455783113653284;0.65119927753153650229 0.30820649521236925805 -0.46767098985745331197 -0.50350111140696252043 0.11599007643463024597 0.27794205310285347021 -0.38979985938259137379 0.3753373143142855195 0.61769113641608042187 0.21872087087729480404 2.7251759073552332957 -0.41915848583348480627 0.15842729058543655873 0.27399552380234115656 0.14624493639697758174 -0.12955460719357170252 -0.061475062379163475379 0.62933526709711773428 0.3819730866844565087 -0.038706489300789570507 -0.4960165380830657833 2.5256835392037704224 -0.13566437370205711166 -0.040577914153474642367 -0.49592452548455051575 -0.096141480311591503982 -0.030116440062819632706 -0.14140998436542315253 -0.42663679551063593554 0.61549720034956323378];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    temp = removeconstantrows_apply(X{1,ts},x1_step1);
    Xp1 = mapminmax_apply(temp,x1_step2);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Remove Constants Input Processing Function
function y = removeconstantrows_apply(x,settings)
  y = x(settings.keep,:);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
