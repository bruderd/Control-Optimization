function [Y,Xf,Af] = nnet_2020_03_06_18_53(X,~,~)
%NNET_2020_03_06_18_53 neural network simulation function.
%
% Auto-generated by MATLAB, 06-Mar-2020 18:53:54.
% 
% [Y] = nnet_2020_03_06_18_53(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.646165886655855;-0.914333789088408;-0.957569476346819;-0.95005564363618;-1;-1];
x1_step1.gain = [0.75051603689017;0.952189914998059;1.35451176695564;1.34993474792278;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [4.1552290392828297172;2.2446783193217858532;-2.7655414855713527089;-3.0334388205736453337;-6.8200181095223895156;-3.7604274829524673152;-3.132486402032797379;4.5426235296200561109;3.6818362390775818405;2.2943551192605853295;-0.42452856081503581587;-0.17946679564878770252;-0.32421888669100246139;2.4158092162836646288;-0.31911189613367163531;5.0075496830277499427;0.47943070013222210957;-4.9228326595091163043;-0.19955464748350587589;0.61154619256217268575;5.3807766678572015451;-0.23226298245013091148;-0.97386801264391564814;-3.603304721923139109;0.37424755778207602352;2.7814844731540717682;-12.077334644734042612;-2.5854584344190714162;-9.024055442433136065;11.201111749596963207];
IW1_1 = [0.83222568401142860139 -0.94678522854296309763 0.70303546307447661867 1.0456176548566027407 2.992115973691491515 -1.7130474003929836435;0.57258334781721842432 -0.79490298556901928251 1.1654409327661181539 1.2794093308254508301 0.98962708240652919045 -0.97172347040478934677;-0.38471965633683991026 -0.36486532927411946536 -1.2787326315585718639 -2.7031756113562934729 -0.35090095105591595503 3.6888470997383544514;-4.3985499220784562979 2.3359965628596146558 0.51216438800957309052 -0.093926129847028846931 4.2299535793277023288 -3.6377141827129446661;-1.7209328028651891263 1.0329347405556563722 4.5163411233132730871 2.124064911094346364 -5.2848123222949370259 0.04882637328375805108;-0.050725750724217741339 1.194713612134287839 1.8928280601564855257 1.5733705805846787129 -2.5310745526365812097 0.63180177208098187158;-0.52378636917092913361 1.4610606997304314003 3.3558468490304105281 2.6562003115173165035 -1.8143663187385770108 -1.0066620061506073025;0.16608933118691260322 -4.4414029603102349597 -8.9529395055231386635 -6.153283743581663856 -1.1076059386070660207 -2.8990546623425181849;1.1391646479859562913 -5.9621297996242708095 8.6553233613276887581 0.4977452943949534081 2.5765583849341369138 -10.417516856945722381;0.7306244873935443529 -0.13550144620122420158 -1.8643716497637359275 -2.1192314354251879926 1.7223705617362519149 1.6086578345259026079;2.1199905953890825216 -1.349120376503079477 2.0222798325623161375 -9.9499983936137752494 -3.8254261187054869886 -1.2274978941934289178;-3.9978845256656048157 -1.1829812401232260299 0.68262444141797429253 -1.0133084095919153711 4.1136340795013408567 -1.325784735194862618;3.3178385763169879752 -5.0295856573696591241 12.165474163655764173 -2.4564711511588970261 4.048357755645178635 -9.9040656278714020999;4.094892267123507068 -1.723955190006473126 -0.49381033597019036163 -0.01175508298113044775 -3.0820361152892354895 3.6854440096925875636;-0.36216569663009856583 -1.5810092945119607055 2.7148418445070303662 -0.48448118358250558124 0.39112345601018644325 -0.31804086235201395327;-0.82770941128291841693 -3.7123028348830295897 -6.5478905385631342995 -4.2207434652535340547 21.459350122715754594 -5.8935066433158951327;0.3279516716344942906 -1.4980372297262052328 0.56630357235117589898 1.2603113420423344149 -0.13079873453290369323 -1.3874052997396673081;1.9421807818543594948 -0.07186480127668215534 -9.8530628992154323242 -1.2481091599425484517 -8.1781047591554099085 3.0940666566613654886;1.0375562293909985634 1.0841360854592234642 -0.87438602289866351747 1.3276233783117925569 0.32235551637411991033 5.1192390951256552256;2.04680779363502241 -7.605703971567484345 9.5611941199345942266 -2.5285403618417992 3.1651972151841905045 3.8245827913119412322;-1.3286709387310913222 1.1383942102198802981 -4.9673481697074883812 -3.7850805557732525308 9.1327755868894939795 -3.7651764773217482052;0.51687137175700137437 1.1645772323226377676 -3.7970927370334326412 0.67579150863084369583 -0.47231202176758896316 1.4392620203141262003;-1.7287679186124680353 0.55125540554374674596 -1.262324831993937746 1.6708642595945180087 -0.15058353458835369021 0.95004207117092975832;-1.0442573256930662851 -1.1225431047375227234 -1.3209678276771306127 -3.1227943355749858689 -1.3389174639238290432 3.7429621201868950031;2.3415517307935798108 0.73150799253800657951 -0.30255858490677067785 0.23583049269487244004 -2.7647869154824165072 0.14161329109236420187;-1.908248010693884833 -2.0438514543150154701 -3.5324469375392144599 -4.8386374779321021933 -7.1517712512274655978 -4.438081802149613786;0.67234482041571996813 6.4621151682961581741 11.154691413431937264 6.3185058199413051128 2.737766456230497969 14.282734584045638115;-0.17112543312728262235 0.76743396034754174373 -2.5940927118450094468 -2.7483310093703217092 -0.36445643897627855168 1.8231628147161207387;-2.8088090498743292223 2.1351571643334503747 -8.8186647246435612146 -3.7251997084333132726 -4.9330592426416082219 6.2835004846043212012;1.5704749350287907639 -2.0263055883978040583 -0.16473513242024184766 6.0177460561808917561 -0.2975226372997196167 -21.045279147559448063];

% Layer 2
b2 = [-2.9167905518903349815;1.7994999359947070339;2.0723716618196168504];
LW2_1 = [-2.0018590594639853464 1.1653173110055565775 3.0900667980359739495 2.8527227389441467409 0.35943104564772759835 -1.0503298508212302043 2.0065383349760352871 -0.19546061986777207853 -0.017128944887399220193 3.2773298839575732977 -0.013304787280433981803 1.2489999478191811111 0.043425612794899613733 3.1084930629890581422 -0.45674865840563755315 -0.6445466285235247339 1.5504003938010364472 0.20624554274678599808 -0.22675895523729730496 0.059380956896840225712 1.0961312680215806736 -0.33954346199974039244 0.43562301931188346371 -2.3499195788920150818 1.8585752863537554624 0.28370411348905549831 -0.19945063736884777184 -2.3203218121074904445 -0.21323770049364773604 -0.20790652762047245883;-1.6519707176318307873 5.084897766459444135 -2.7484150916720162527 -2.8987339260272606545 -0.048572630077972522855 1.2563351155457944675 -1.526878439973203605 0.2676381346926712812 0.17058699524305370732 -1.447804667952044877 0.26872206821742594673 -1.3776128795836617424 0.096724515590313850377 -3.1191213726262492223 1.3083297512495568604 0.44407160129342743149 -1.2923489916342556505 -0.45644970154177277877 -0.50251743929417558299 -0.24044582653962079388 -0.86383607721937305524 1.2367518830329164992 0.31465029682319417548 2.1616163043631200225 -1.8979189866646826168 -0.31182113698200225604 0.32417175493651206875 3.406511308627417467 0.45160402867244398006 0.2589399403385035936;3.204968346061347173 -5.7120247167381279496 -1.9454421101067858046 -3.3997004426467980487 0.44529266315164556245 -0.45059278320110418559 -0.86408362394427462583 0.11875172877232732793 -0.30875129713254184649 -2.0125951296665136603 -0.10827948896673174339 -2.2256934527681195846 -0.30988175309730503493 -3.9290587800648428818 -1.7369121702984173794 0.74096260711161943124 -0.40047220965216906441 0.37411162474015197121 0.83141469199034190307 0.39072162198973070524 -1.0103371875188806861 -1.4701993118560248153 -1.2516279560275751503 1.1143960362307687717 -4.0406169271442191615 0.026727363650979277937 -0.0063403656309048653933 0.15146814660538293618 -0.23698072788961571655 0.071557706889931849137];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
