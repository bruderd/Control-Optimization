function [Y,Xf,Af] = nnet_2020_03_04_17_58(X,~,~)
%NNET_2020_03_04_17_58 neural network simulation function.
%
% Auto-generated by MATLAB, 04-Mar-2020 17:58:50.
% 
% [Y] = nnet_2020_03_04_17_58(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 10xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 2xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-11.7140071265891;-8.18411306908274;-1.81523757655205;-2.47668218292545;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [0.0858823470148043;0.123392187189668;0.211573221436794;0.334394072523502;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [1.3153901893921899902;-2.333032331789648417;-2.3999841935234327295;2.438523247861000165;-1.726017392289954655;2.400679570039476296;-1.9281886009335562626;0.82225637932883199888;-2.17740454855368748;-0.7092521326827306849;-2.7214464052750284573;-1.2333522031624613025;-0.34326506352003388622;0.37141835657793564884;0.67098851351083788064;-0.30117114011171863819;-0.65561997648805347971;-2.3007816279069053245;-3.1496429562760814846;2.9157350204950560624;-0.1954218932677108389;-3.0205724671583964458;-3.0835903774068507133;-2.8160137022581128718;-2.1631194035946590404;-4.2776927880746136168;-4.1531684333161056344;0.0051836379916513977695;-3.6343646369612025993;-1.2554364866943354961];
IW1_1 = [-0.20568279393117078202 0.72085020165951108062 -0.7638575437189593087 -0.94668894610128140332 0.58299332681531723654 -1.2243040009849182059 -0.16050017273604105794 -0.3626080542471174506 -0.22074133747631463631 -0.19815878654709909168;0.74022271602978551019 -2.7032063861484063594 -0.027039396253343402077 0.89815886660609489667 -2.5242908087962541153 1.8717585829124556707 -0.48831285730430273873 -0.36625041951678954932 0.28163427636309773527 0.48666372988959194501;-0.76282919319568420757 0.56915350958984001206 -0.22339564201023529022 -0.14356383970913488834 1.7584907325381546883 0.61345463985732862078 0.52082233624992313459 -0.50258530405147616715 -0.89668361158802445399 -0.25313605207613004699;0.8877724849945640706 -0.0025561360907098863021 -0.36104689074459506148 -0.46133663516929912518 0.35777998885096612414 -0.45811238992625480382 1.3862139681355609699 -0.6420518918176287837 0.034109754454190198414 -0.62435870059082232419;0.43740286439017633802 -1.1052251929293723798 0.23089633801397083102 1.2243736076524145417 -0.3657055956101688543 1.1415558382669164228 0.77717835531645895752 0.40953335902478571473 -0.1578013553599395824 0.4375654854398463578;-2.5697809977048580166 -0.25256286213435696908 1.6540669510474099724 -0.4015949732167317654 0.38674621125944236288 2.015149126128715551 1.1585207674763478014 0.16630558167672324088 0.94551899397656147261 -1.4099374599668634822;1.3124695017937413333 2.1182591597345536982 0.25233920200334142292 -0.40650375101952374024 -1.0226985081322657045 0.95436007301081215992 -0.90511218218594580165 -0.60907310308165396595 0.15877495884484005284 0.18699995787425191529;-0.97196655810112364549 -0.31542857368488713687 0.54304468762041313568 0.17105725106528149593 -0.41823211698335716058 0.72941930990212411334 0.70287813557062561731 0.20340275307922883741 0.36990751455613485321 0.0075648732674610990115;2.9683232013071396693 0.62317801519961157908 -0.5808592338204352501 -0.58476428799098911782 0.34710062479083597653 -0.31697934094188751075 -0.74727560694416872433 0.22935728899522606072 -1.4673791920754242213 0.83040588942528659189;-1.6394816399085363479 0.13579777011200558356 1.4791615423167876475 -0.66448455625636948518 1.1955070919374273242 1.5656558190994596114 0.74370340054071748526 0.69975789884720407397 -0.51626685131100769066 -0.84236016824364368105;0.71413227084697228353 -0.56343304012729544805 -0.48220584007890848754 -0.56613536212522586055 -1.8107559594363451527 0.75776399975012109778 0.11936108685255071571 0.49283775615376174128 0.5441791130274972188 0.58093997125237839541;1.1581556264813701596 -1.3861283062283904499 -0.18558544175759189576 0.19457992102143106816 0.15797814407133822789 0.31771956379995092146 -0.57701593254827476809 0.72222891040232395365 -1.332039517257910699 -0.087451320238211061042;-2.5951727260880641523 -0.79658542509799867837 -0.14245424498591008344 0.59509004025635425794 -0.92571832774886975148 0.64967170204521973442 0.44843704193006983516 0.13306901001219192948 0.46214738158859952621 1.1072815511281974832;-1.6029999051124212972 -1.9942850353450742862 -1.7936132167525253855 0.13210129382674790088 -2.8888504685139277939 -0.87146566446419881924 -1.4800771002302579582 -0.31842988406337474627 0.37209930385103540118 0.18425043511536773333;0.58926299538537529887 -0.40274879956211834253 -1.4785226399406836695 0.38198580255447500686 1.112716864921703408 -1.5096482574896352702 0.84276328826302904229 -1.1406270704445744535 -0.66984874276783479274 0.81354368040893842995;-0.70693152857211538631 -1.7500955554244048695 -1.0399627453419351131 -0.17985170588695476024 -2.0725663374663430005 -0.44311432357345637012 -1.3806361153366282224 -0.13215076387243188116 0.24374527294770084729 0.34366696774311350504;1.0159630468519300628 -0.64245106084324377083 -0.28247196719907513573 0.18301273617672478289 -0.45356464241042870889 -0.35467943342673319274 0.75827890485609883431 0.71577714931459957004 1.5790410637384901804 -0.24404040322305323163;-0.60898296994824607786 0.33562605129028244555 0.19261104936756312522 -1.334332383949669909 -0.77209617008692166262 -0.29302236757873822981 -0.29320025642071168015 0.0052007762103507141141 0.01790079286999805841 1.0079537977946924077;0.93947645502371579518 2.138623080044445679 -0.30301898701436136285 -0.69336084121584296014 0.16878807257220074245 0.30763426665952459116 1.0064838140138430145 0.086896641227828391729 0.62288415087242676726 0.372544119348803493;0.16170568048696173924 1.2202418318091574623 -0.17392800798394345008 0.024182911930112543919 -0.44925434319074258882 -0.5173094427580741117 -0.66622445906144311945 -0.47600317215978388274 -0.863997497826379246 -0.89810887520298299247;-1.3308711194023690183 -0.11542120655799513462 0.06465481863156338771 0.02235708887533709513 -0.04279756100426783394 0.27744281932885633823 -0.0044195204541684803001 0.50154091123766630922 0.37650899260516035305 0.19531628224520619641;0.46965992457211003241 2.0650567060286091348 0.9894559787415383445 -1.8772962137897473145 0.61226901814452328043 -1.1748098016904346963 2.1737122926322434147 -0.28814233656267873585 1.4520187561939690291 1.4596690185560268205;-1.2863062867098931097 -0.94222857018469963197 -0.62228714901982795649 0.67222548889198474598 -0.035687070596453138172 0.51184777617699517283 0.57258355297751029056 0.66275283283160968395 -0.4776253662873226058 1.4769177966632891508;1.195418870314669979 1.1846566836359371244 -0.77329842978946705667 -0.76970536713911852367 -0.060050746804477160568 -1.8871603716017069097 0.050461126283244943369 -0.068695643690022706318 1.975310726564480035 0.75970153826780872919;0.16309986728356137831 -1.1766161420522858183 -0.46666671194673425838 0.0067718922700536095249 -0.35134126782597990823 0.38191065548537478369 -0.33337014882227994361 0.72758527980701459548 0.6089366038538159831 0.84402935879458285129;0.036727018925780306746 -1.9189883848612117045 0.10538394153066840686 1.2432505703075809045 -3.1764661914830565337 2.0745528776286472628 -2.0667976206026579256 1.3985453961115834609 0.66793222315076772322 -0.0034544818519923405249;-1.3183366465562780245 -2.0999020980307450124 0.89974108285696585696 0.02272361857668567936 -0.75771731849170687045 2.732817201414146524 -0.75136461896719397568 0.99610488718303691336 1.2199578632849332749 -0.70281238881706586952;-2.0906771961076198174 -1.174028327761458268 -0.089319817476587196059 1.2606029688239064335 -0.18284871336820168741 0.18285324295904106795 0.25903491840665149315 -1.0396252763439977063 -0.9641395578861210458 -1.5565026490429749728;0.25888009660179123195 1.2832066185130643898 0.99746512377147689143 -0.74184878581394486652 0.53590451512293402203 2.3065663483466369854 1.6984959038704499079 1.3269647009296288154 1.1121929589008616723 -0.4242081873113053847;-1.1813356274553188374 0.17530297859811330707 0.45034598250406643327 -0.30339478008373016449 1.3652862365811111456 1.4989715545045940726 0.67414225537127614452 -0.93124801254670086514 -0.54833047781554367095 -0.020088749340582287561];

% Layer 2
b2 = [0.92479195566771921211;3.1981829894718196705];
LW2_1 = [-3.4707230541144777902 -3.2408780190810246857 4.1790114770639092967 2.1188742471987187521 -3.0790228394532621614 0.03002232613410716483 0.64953880982892819862 4.1116651744658065937 -0.30022030736345661772 2.2725570470706051296 -1.2617778890692907812 0.56598724242926945482 0.20417881086007505509 3.0324641314875511178 1.9619685457780533522 -2.0767602829737032977 0.3456937409604722844 0.5529511553993354811 2.4928661059414940482 0.52257451122382347908 -3.0161887462429577411 0.34485760646350377412 -0.59957150606954356942 -1.6879105960708657985 1.4121635354375512428 2.8819043940614132993 3.0006165325935878485 -0.22320939843133016933 -0.59110456807235156607 -5.1811333738438936081;-2.835892727111699152 3.1165669216927756047 -7.0241176872805342057 2.8898378293277913187 -1.4623627493405517708 -1.0905683661268286144 -4.0985231360613338936 3.5839873699717101907 3.3702449271169294676 -4.1043980177851366875 5.0664239238810333532 -3.7653983238541832712 -1.9403516570733696511 -3.2897837972991639255 -1.6333568929030555239 3.4179686185587412339 -4.5782944044775391035 -1.6491920389985741391 1.8502033799848394136 -11.05739404397628256 1.5602236529750932448 -1.7342149613132424868 5.2841042950464593986 4.1537445362609322075 -7.500942455100966022 -3.0953683467402797191 -4.1019007609606585874 1.0449885439683568311 1.065962793721206614 6.1309321382154609026];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1];
y1_step1.xoffset = [-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
