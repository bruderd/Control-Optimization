function [Y,Xf,Af] = nnet_2020_03_04_19_52(X,~,~)
%NNET_2020_03_04_19_52 neural network simulation function.
%
% Auto-generated by MATLAB, 04-Mar-2020 19:52:12.
% 
% [Y] = nnet_2020_03_04_19_52(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 14xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 4xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-0.871181939021257;-1.01915417608471;-0.65030085097753;-0.590132730182261;-1;-1;-1;-1;-1;-1;-1;-1;-1;-1];
x1_step1.gain = [1.22480717790365;1.29564918435435;1.77620639969327;1.80708641517689;1;1;1;1;1;1;1;1;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [-2.9510566777571853869;1.9400084235779488928;0.65681039908641913883;-0.86589645657004432611;-1.1316647945949860343;0.66659449759084266063;-0.32092710382132438873;-0.4197272289297830361;-0.43659969529172426572;1.1408907248316555449;0.33412660082746653556;0.65671584696264539982;-0.2646787098732742427;0.43546583875574795819;-0.18296150524331489251;0.23500680967086651219;-1.0237237987916338877;-1.0686969366922445257;-0.016290878045229346266;-0.29640247823829368734;0.089123638579588854158;-0.78709296226007818831;-1.2069461009439172994;-1.3858566199248125717;1.3116088943911512477;-0.71999100373307767242;3.1018729168822476439;0.78623702104358306197;-1.489747034991862451;-0.96554595050115599175];
IW1_1 = [0.55209179436974276101 -0.30559067908835518823 -0.014870004059774431099 0.11741595897848766672 -0.062745675591976135532 0.95772171370490666309 -1.63813190121762986 -1.7913369806236159043 0.34496824472329890021 0.063151796851365751828 0.078517405115059016318 -0.30910110782603372748 0.11267878032406433708 0.29348777093682121286;-0.77670228616678671507 0.51445880749827521683 0.21385948331667686828 -0.24079081302589380731 0.60403410685315073181 -0.57558269338187939557 1.661089622888140882 0.036773019072269833019 -1.655775929501888788 0.12437087556575690539 -1.4775427561834213463 0.79420906106169986138 0.54356429414206464124 0.13590509404018183415;-0.49076233137860825195 -0.29274961566806761981 0.064141267084328559833 -0.2055814406845992981 0.86821713571414926847 0.41779853394899285624 -0.52260484329748324583 -0.51333917048960620022 -0.40762209152699663273 0.14094182593915466351 -0.71689576119239462049 -0.1542216768743717159 0.038342532424510508693 0.11933719845431212114;0.80180715061222740392 -0.4880825718989946771 0.16890029506582340812 0.10838541620814555466 -0.78970463559485992722 -0.091719014455234018635 -0.31629919441170661898 0.0056416819518332510588 -0.14638578553874992405 -0.39758497408252263527 0.069940569765476398589 0.64597915627386826021 -0.14680457358010526314 -0.29096995141156500875;-0.9805668108660574589 -0.057349948034142665676 -1.1242526744590857213 -1.0337983921074977989 1.1302136338500390345 -0.16832276538920357134 -2.4298986814158953784 2.2926436466315642804 0.97482199363405830361 -1.0827963173117256535 1.4641988649572132974 -1.0055147570226756759 -1.1932845273772856309 0.66226288329202509519;0.16871017736791082964 -0.14304151782982624241 0.061581767780584696637 -0.088858469500571440891 -0.00047620632434009521443 0.1438272732175404911 -0.39092759884148031713 0.42061208739200317552 0.65671724603775027962 -0.84982946133776005038 -0.27571931922738951437 -0.33645494171473422362 0.28573598718937565089 -0.026855296786025054795;0.40207465336554804036 0.41235712904516341748 0.22883320170001919536 -0.016282588815145528083 -0.65278683585868280126 -0.38646546477545878906 0.29525432515129124145 -0.2058547040667575434 0.81025523095649787386 0.82548702109429139551 0.33979817549920232622 -0.62111935634281678631 -0.15631876837029767824 -0.018625741373593882738;-0.17734062448311463389 0.18140663299113549134 0.34647845014304906597 0.23815265656623951784 -0.10227576631595111656 -0.13236087550604627716 -0.041386586378042329593 -0.7248264186938170317 0.36364209309225409283 1.0999502016890529976 0.4955176721871329959 0.44954179134080490821 0.68010949010430743478 -0.45849131809755028222;-0.1215426593047261028 -0.1787164026965555319 0.20859819902980394901 -0.037811262221031323449 -0.079369747379744490234 0.055037344626330406139 0.07048283245963050947 0.51131259309072307762 0.64541281873312117412 -0.22111978303609797214 -0.5516762187193864353 -0.095751802232319396802 -0.38351650876995602157 -0.45691838294628056572;0.73806460322895794945 0.14524184932851397223 -1.4049236544852052866 0.67191513127780067016 0.21361251602066402833 -0.025008680624617411759 0.70303077068370256608 -0.58233640887910764761 -2.1071269499839293537 0.015403437040110429593 -1.9992529689855409458 0.062389119477824703242 1.1961495941216135908 0.52905738210833708202;0.6958244915866103053 -0.17672725591344395912 -1.365246596407013957 0.25796279595551485642 -1.2638940681371781949 -0.1508633690790978088 4.4569441677862142726 1.0193100077860264285 -2.9498432050139329341 -0.090538418924583904945 -2.0450584729066743073 -0.053424828127598758543 0.83851379098508116439 1.0012919039810999067;0.69418101180800140249 0.85156466269304165184 0.18865804876711794735 0.23346154896281018365 -1.1557238863255614447 -0.55481806452710891175 1.4661394979900062019 0.59843514513841800095 -0.28079095164241868465 -0.92809593958514946532 0.36253719251313276661 -0.6283870319714528474 0.00048912318078162908639 -0.011934782689204864736;0.056005251570540370842 -0.43386119518219562474 -0.12601632007952343062 0.015245228899710850518 0.54167483421953754874 0.40505318217789065827 -2.1002021470011200677 0.53419418553130748606 0.97865003653906745829 -1.0589725829214726716 0.54827039503407504206 -0.1083091314304636954 -0.18458021076514241621 -0.0088264156922168521963;0.44911707091299579719 0.039138688555431282168 -0.07014112065298694354 0.16621433373437188852 -0.96015279555201571426 0.056077449916822695586 1.1191560032088854193 0.58165580775387604184 0.38315551933201691392 -1.1214410442721927108 -0.12585863483292555887 -0.17373986912171351937 0.21008103219507326398 0.040875376437771768212;0.19030687117155603572 -0.53300337153630783504 0.00065372010249809485959 0.11646798992703813469 -0.025146071206775894025 0.19283078151178847937 -0.12777029339845843992 0.21653373886018772998 0.33429381594914225895 -0.17482132679793896401 -0.26823359141267594241 0.15764143466761168511 0.10249598988284418233 -0.025585511743932157214;0.18864196461782742342 -0.36310808966284563448 0.10479069351768438567 -0.1659214960980885667 -0.025625418982526019379 0.26570481869666451313 -1.0282551052023705118 0.73995083947626527632 1.6373127011783423779 -1.0958143367586301586 -0.16374347947427189687 -0.53118170282804111348 -0.18115328277503803256 -0.30944261264022138169;0.24879638886568872236 -0.70110379085883212102 0.74874445302937064906 1.400039768230929127 -0.22398738884891522538 0.28511934418089462939 0.24007913076633458083 0.16053955115184567748 -0.47819528435360458829 0.53961759141455167832 0.33630833127813175576 0.64465222617714490472 0.73770637176065001483 -0.83525873829295926853;-0.95234605240870773279 -1.1276585935128502491 -0.0013527788458300893555 -0.038694232034562521527 -0.93262454754052925843 1.1586992138488299009 0.15442813627901438855 0.20031063363117551646 0.20105392660829277118 0.0031082209366084818242 0.1653876073578456618 -0.21047185049479261165 -0.028522593686854572081 0.28504800439697625114;0.14985212584951460024 -0.2818668275930182876 0.29836159542785872789 -0.25783162614611104813 0.3954828816538634717 -0.037314687764363627109 -0.59144578281035442568 -0.39523345861185016359 0.37294094382943659971 0.0046921885060088380434 0.10906761083046520588 0.32337155447658089136 -0.18967940251579687438 -0.19660039170217061266;0.36598118636353288435 -0.059847697113304294814 -0.037394187451692088853 -0.13420398184093432215 -0.19040663547109484832 -0.021901639445984701082 -0.91561078082966018687 0.53348470999172159512 0.87433833754966272522 -0.83935281724898980205 0.85893351262565975635 -0.48228709713525047542 -0.17566371404218489305 -0.33247718290308020395;-0.4225632790236538705 0.15337698730179208373 0.1097547451492000975 -0.11650773498574606979 0.77564451941839718252 -0.12128924859591411201 -0.61149682223594359343 -0.34723551246983103136 -0.4805233234406730003 0.23538326449007415664 -0.17150883767155306048 0.43291907597254691842 -0.11944486523992789428 -0.19748340638066391728;0.11234701386704951109 0.10072812810453873889 0.19523117504885686979 0.11306619274567522582 -0.1627755986186581183 -0.068727849258120976561 -0.51908402324851499188 0.0099892321797732299554 0.47966507029950722352 0.26982511639662687397 0.95546846397198348377 -0.45524566196121968309 0.13311176011492986682 0.12695721341722474018;0.38474058914891579031 -0.20991518259920002865 -0.36966069768799514339 -0.30285419109495959056 0.39783229349289328525 0.13200545086255977001 -1.5581715681843015808 1.577999485405054747 0.87342224627579145846 -1.8315889953840680526 0.27474999515656928217 -1.5268325669834856839 -1.4026804695409562651 0.03757872641622422849;-0.0045021585008248651144 -0.082285237145579837037 -0.093399893482262949518 -0.2146948349449632476 0.67207192984440577987 0.03184993101336796445 -0.48228614104178485489 0.71866391619799474544 -0.37143973609595215546 -0.4010018573213950388 -0.89030734570362191072 -1.1072025841885628772 0.016846721758382844636 0.25107252206780505954;1.1099797364710770609 0.070412835488949554463 -0.28056164239582020992 -0.19696337365820015819 -0.043026308452493215728 -0.082467272203014529985 -1.2280688494590610293 -0.93410147283154953968 -0.017837329466989335081 1.256879331603919514 1.1995727807978555646 1.3422859307102563697 1.6175527947800834028 -0.10835880660618243954;0.12483943218970788847 0.048933859932776900548 -0.26249980005754386392 -0.12585511752769582006 0.15359324190179282632 -0.086559687825496528513 0.49791601472481655799 0.31424931087964325105 -1.4935783986773010223 -0.10374585457489510221 -0.14360142740509937442 -0.52541586765677361637 -0.57614475051694802321 0.72103733056180230321;-0.33044992235829057092 0.38974556955578470996 0.0033713426190768373651 0.047693548836233806698 1.1994984461743078974 -0.66983931279431851991 0.98234368105928104864 0.52286050719716070656 -0.97534833530008890889 0.8749398316096288486 -0.90674356118414844996 0.519945626073094469 0.15450256115711366589 -0.083679338512602480238;0.21776603468269478681 -0.091775793452976150988 -0.14174668988119212831 -0.093316124088238736056 -0.00083928514860448326373 0.069636910676529079067 -0.24385389981524085989 -0.020863246870515460285 0.44385229952053656399 -0.54117861258679944569 -0.46481348122258220323 0.17806019622836855021 0.28885008068672884951 0.066070649374821655009;0.2099954821609004707 -0.21384803486765605052 -0.2968882899293949218 -0.10666035087918823709 0.15706565548951911815 0.16365904955670360077 1.0993931608124387633 0.85207025300471939122 -1.3270178671646877255 -0.71566109196336524789 -1.2881259516773233553 -1.2919827619678971864 0.025017878059522540013 0.36875152956099499502;0.59343377385912399191 0.24415260017383086377 1.2321784540760323257 -1.1160092192399859723 -0.50006208226342596657 -0.19198573018044290395 1.6199593367090030505 -0.49467839434423371836 -0.51175878551321285492 0.25272048530537494226 -0.76730446662673590374 -0.013971927443879952196 -0.52591114991473819629 -0.85655584071876167407];

% Layer 2
b2 = [-0.98459556359431388284;-2.2335056916489879342;-0.99740335631034804376;0.50430572973292697725];
LW2_1 = [0.076974426661142028583 -0.0075710797975824979666 -0.092507763576717694232 -0.96757703263965399998 -0.0085296639393809929597 -0.13664937717151706686 0.11051146949463606928 -0.03236108399525181728 0.094532498272436538134 0.083053459090153339273 -0.0061419451549446302599 0.045774941267762242481 -0.10095874495061187004 0.013098951092836694232 1.1364949726719586476 0.050941845359397455728 0.017739686108747369786 -0.56016618329988365765 0.31334275819263718299 -0.024987847659476866008 0.074990400852627911443 -0.019881101674652790212 0.0058968094222335912247 -0.04524961366462040141 -0.0010797437828738306285 0.053179675923607873378 0.0041479399122168218381 0.5962981647619176595 0.0010453622740354119678 -0.015074983205961699217;-1.9832761581479185775 -0.43419402245602811696 2.1821564679974039258 0.86725276185929334183 0.1045687069432416072 0.014593456403055368037 0.80315474691107813232 0.11315067564957904944 -0.27508027783433863789 0.13775391777969187013 -0.019877716098949865797 0.78632707245247712713 -0.74822948028027957967 -1.5219104325522052612 0.21917262721537694725 0.42600868385357820722 -0.28728007681314460253 0.39055685573063203542 -0.69653751245943784642 -0.13765973308257672958 -2.9818753323993476556 0.45190475364854887363 -0.015514967214584968885 0.6015234568269426374 0.0026220854009532308139 -0.11944584354831790096 1.5665655194840635289 -1.2907184670867013487 -0.33666984581450865033 -0.079093257159934218792;2.306960578504394288 0.94100297293941315147 -1.7782802623914331086 0.22341396584418021787 -0.21386188713273546202 0.52856896294564359451 -2.2804344344798090916 -0.3198240493267715534 0.578201462483698303 -0.41411664841654904912 0.25540300672571286666 0.91188789865508301791 1.9168722807170439637 -4.028656939049265695 -2.9633822103394371617 -0.6708228693167210821 0.14332520636580978191 0.12572789745998089184 1.5774232490336532742 0.49178600520785054062 -3.723083682422262175 -0.28840078716066031017 -0.035202431254452444531 -2.9120122915696877719 0.16972300118608696362 -0.41216407887781758568 3.1505516906757344842 -0.95926006583619549684 1.766544807747594259 -0.28707780281305206316;0.11041598837126767596 -0.3309548223786136778 0.25706844081832092019 -0.02357396324064817833 0.016909885953743972187 5.2425994638830424321 1.5484125867147631173 1.98934651987420974 -1.5396111161191541328 0.0045260620084110218461 -0.10137793722186645706 -0.87490486067626715982 -0.0012260253953924916959 1.4808889763058856737 1.5384991047425113919 -1.7135696001950007084 -0.36803353921367587542 -0.023876526646076697696 -0.43147095319776318512 1.4007935859750619834 1.1394427325239020465 -3.6622386664562012193 0.67020474930210605091 -0.15352656739679296227 -0.18179025990904093546 1.9326980240191597993 -0.26908882154972818546 -5.9137148994164601135 -1.3123741320974133817 -0.1087035792376234572];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1;1];
y1_step1.xoffset = [-1;-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
