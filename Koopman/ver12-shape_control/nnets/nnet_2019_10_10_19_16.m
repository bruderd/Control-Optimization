function [Y,Xf,Af] = nnet_2019_10_10_19_16(X,~,~)
%NNET_2019_10_10_19_16 neural network simulation function.
%
% Auto-generated by MATLAB, 10-Oct-2019 19:16:00.
% 
% [Y] = nnet_2019_10_10_19_16(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 6xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.12520182470669;-0.919903580947738;-0.964677203024396;-0.629975818805019;-1;-1];
x1_step1.gain = [1.02168829524382;1.07363252809921;1.1531025043986;1.59009301111279;1;1];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.4504720768509993256;1.7665002753236584976;-2.213248187783484866;-1.4127419898615851679;-1.2012415502501663234;1.4669992467345085441;2.7949113215442666913;-1.834853650704850736;-2.4354237873384669832;2.1374793086543109055;-1.601755424015373297;-0.034085877240609227523;0.64435178411676730104;0.76763652718718622392;-0.2518298215621267433;-0.34980992611744188281;-1.0815472203180989119;-2.9054291648115992963;-0.30853788027764328383;0.64930713271214013371;-0.22662706325869280688;2.2898498305005525744;1.3375457556897629718;0.57276539877367982356;0.94069680869984861893;1.8440641309824583605;2.3164779603799594554;2.7197690906220146623;1.6443930806149102963;-2.0366827737999457781];
IW1_1 = [-1.7390782424918251881 -1.4954172604907394195 -1.233645684078157112 1.92357981278938861 -3.4028340493893964869 -1.7935826365107647717;2.7068893346391904586 3.7832966782546550988 3.3587441360052809891 -1.5650659675205893517 1.0572203020082122649 -2.4542963230275511854;2.0256023280464843239 2.6800262987517080582 1.0553622018386552561 -2.8853142980088271052 1.1729281257042742936 -1.7289057960326652541;1.5792149638732257966 0.64710401240783155252 2.6480679241306606109 -1.0169823548685053005 -0.52540946885154593549 0.68194940188635355671;1.11532411202956383 -0.89587710119087282656 0.55596025643071489419 -1.8522794677440685973 -0.20760716571421078402 0.31253143352996931581;0.57877320519070452054 3.0967970239407742739 0.95084606328102971862 0.83375564243132083142 -1.0174598962046088602 2.325479382297405806;-1.412163475125302714 0.24485510376221780726 0.44211097356146272785 -0.7836176372025673853 -1.447996979720896471 -3.4497286120477603788;-0.64293981901340235829 3.3761241107728454658 2.2024850050570341509 0.12124867791803972672 -1.0717460855679696863 0.99316520612526570932;2.268343975695032988 1.4979052184966361594 1.294374280442261993 -2.188725001440857465 2.7097426456070046186 0.67266476633879435099;-4.6738252193186156092 1.3954835179183269211 -0.69905021262232636126 1.1084707084779228392 0.010311509759156619465 4.6107330847270020513;1.8924632351016053011 2.1303536347137517204 0.85546730393602787856 -2.2370014036533212298 1.5323652021048652649 -1.4617732921260742085;1.3027885884967527197 -4.3310577697751355686 -3.4286381846399112128 1.7412514747906062684 1.1872076282260648483 -3.7473838732005857466;-2.4600486342998233447 5.0387359096644166456 1.4556133590930449007 0.43032077032665272398 -1.679105781281856169 2.6334357200022422418;-0.4926842794656953739 -2.4849578693139071639 -0.13168862900644634495 2.0728794550358666804 4.1807385650340505023 -6.2203570044252636251;1.9808567469663154181 -1.5602030584979991179 1.8248796790674648438 -0.051574839055602089699 -1.7685455108680352421 -0.10876230482679215272;-1.0147164805598536397 -2.2661897009322746754 -0.67215294756698973355 0.31015310016084984834 -6.3234451648847729288 -1.1092209214209327595;1.3282897283023324952 -0.36889105898720353505 2.3630295838636699024 -2.9378705752596543377 1.2608650599135970971 -2.2794714744707551546;-5.8135330535672951058 -1.6839727211842023813 -0.76265774351884652038 1.1735648694968578987 -3.1525816621797861927 -3.9700844055479955763;1.3367088125899742046 -3.9808668366645316716 3.086768927961634823 -0.26607189054188645772 -3.6803773613817898358 1.3545822241472906811;0.019105183100806839847 1.9449322716910848463 1.2705294264968576279 -0.50900455392556309686 -2.5118858582797765067 0.44627402805761851035;-0.21954995194168616668 -0.91974244324763776426 -1.7046839215695861469 0.24176699743428314848 2.2442535235481990696 -0.47670706993018308051;-1.7717587163104664416 6.2698435299745201021 -0.19961622267093348526 -0.35640115524853693829 -5.4772054996470282973 1.2015652657492175148;-0.47128930895627113573 3.5983862107749158277 0.33545675675472708122 -0.40029513220990037281 -3.331073018693679888 0.59901143022874792088;0.15181690575179657143 -1.5787925211863507169 1.5098254714585306324 -1.1147964762632824876 0.023735387086400265566 -0.034120493501624132859;3.0097657242630400098 1.782531340751977611 1.4004842604984522048 -0.91363521370858180592 0.32791738516773188961 -2.2371866664348978304;-2.2371687305333169959 -2.952161236594506466 -0.072040267528893822679 1.5729125723005632498 -2.3257758872241329762 0.21712741166710239349;-1.5830606988022140058 -0.56215572517654066598 -2.283065632394924549 2.453108780828444857 0.51849015886622717986 2.5868100415233370448;4.9608128014321390964 -0.19265945833142755772 1.352139447231362368 1.8146476798465744906 2.3448641121191804437 0.82777215382516955433;2.4444297171893625276 0.48332715997682523801 -0.38041610494000460685 -0.024184200343875611461 -0.45967025872792982577 0.53300013679439028902;0.097208546267819662123 -0.13977047387384364252 0.8735602019454947742 -2.1510587025126719496 1.622242323897699956 0.27908711087583781829];

% Layer 2
b2 = [-0.46268911469860618535;0.44721696506116148662;0.7556118394596111898];
LW2_1 = [-0.62204814707254441064 -0.93545800183234462111 2.7872423844995055653 1.984622680959219343 -1.7541170964130994303 -0.14781494099126385455 -0.098861465252629579514 -0.20008390677790929835 -2.1803561908693054328 -0.25313346901971051084 -3.8105753633143639725 0.036692747224184980859 0.19599902170049468553 -0.18634677608692348794 -1.3438242017268544615 0.29603795435963020655 0.87442465256940971052 -0.16373321015078065588 0.65020455410403832364 4.9156439732852126312 3.0077762652909902918 0.98748555211324817726 -3.9069784504123910018 1.1772129849066461649 1.2266189353832752662 -1.5346427418319712466 1.2187029985035355839 -0.27369383643992584165 0.9776509303901097514 1.6277291565268423579;0.95647507583479263182 0.90072052018955306441 2.6855505808563640002 -0.13325009910052543205 1.0188307763327388855 -0.91241626674278419884 0.41683757714315267107 0.47711419135496596633 1.5019749109672344556 0.15294834409543001108 -3.4235002436554156091 0.031722267517609606391 0.57741083940169146693 0.24822532571230071508 0.95729438013500911531 -0.17408108524714660525 1.0978394739867880503 -0.2155635656862107119 -0.091849096122308585 3.7919444480589654667 3.0812405704628837988 0.067894991862945369698 -1.6810627820066001981 -0.32291279372661246816 -1.1400783474918796401 -0.61058239132560165885 1.0404517199077427669 -0.39801432627232491424 -0.24016153884948493458 -1.7242372046268747976;-0.063986227286094404798 0.36233834642176171448 2.2877652597933262335 0.19913169478007031188 0.56982818676979440919 -0.089259111029675416993 0.33006887340951568399 -0.038616995374976550992 -0.27816340682254014904 0.26716898295127189389 -2.6312231146360458567 0.57140251392450125412 0.64030180448962947803 -0.16671068379760439759 0.76783944634318745948 -0.28755911385185961571 0.93599375393724226768 0.29055111150026285971 -0.26015871018164643536 0.25403960341939690881 0.92432246772282744551 -1.0441782750512464961 1.2304076268704471353 -0.50422289493889216327 -0.68414584739943373748 -0.77742159940862243239 0.54234120823722198335 0.40790991945298687993 -0.6249975757246939434 -0.63665056877175918437];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1;1;1];
y1_step1.xoffset = [-1;-1;-1];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
